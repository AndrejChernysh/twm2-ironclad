using Ironclad.Entities;
using Ironclad.Helper;
using System.Collections.Generic;
using System.IO;
using System.Text;

namespace Ironclad.Features
{
    static class BattleAI
    {
        static StringBuilder c = new StringBuilder();

        public static Script Get()
        {
            var isAlwaysActive = false;
            var scriptGroup = "BattleAI";
            var order = 3;
            if (Properties.Settings.Default.cbBattleAI || isAlwaysActive)
            {
                c.Clear();
                var BAI_VARIABLES = new List<string> { "g5_battle_difficulty_high", "fire_labels", "panel_check", "player_unit_count", "enemy_unit_count", "open_battle", "labels_only", "stakes_lock", "pu1_missile", "pu2_missile", "pu3_missile", "pu4_missile", "pu5_missile", "pu6_missile", "pu7_missile", "pu8_missile",
                "pu9_missile", "pu10_missile", "pu11_missile", "pu12_missile", "pu13_missile", "pu14_missile", "pu15_missile", "pu16_missile", "pu17_missile", "pu18_missile", "pu19_missile", "pu20_missile", "check_timer", "elephant_fix_check", "elephant_fix_check_sally", "script_delay", "reinf_check", "sally_defense_check",
                "sally_check", "label_ready", "stakes_on", "army4_ready", "reinf_late", "distance_trigger1", "distance_trigger2", "distance_trigger3", "distance_trigger4", "distance_trigger5", "kill_labelling_reinf_allied", "army3_reinf_allied", "army4_reinf_allied", "army5_reinf_allied", "army6_reinf_allied",
                "army7_reinf_allied", "army8_reinf_allied", "army9_reinf_allied", "army10_reinf_allied", "army11_reinf_allied", "army12_reinf_allied", "army13_reinf_allied", "army14_reinf_allied", "army15_reinf_allied", "army16_reinf_allied", "launch_alliance_0", "launch_alliance_1", "apply_strategy", "relaunch_movement",
                "att_alliance_ready", "def_alliance_ready", "def_alliance_ready_siege", "army3_moving", "army3_run", "army3_reinf_late", "army4_moving", "army4_run", "army4_reinf_late", "army5_moving", "army5_run", "army5_reinf_late", "army6_moving", "army6_run", "army6_reinf_late", "army7_moving", "army7_run", "army7_reinf_late",
                "army8_moving", "army8_run", "army8_reinf_late", "army9_moving", "army9_run", "army9_reinf_late", "army10_moving", "army10_run", "army10_reinf_late", "army11_moving", "army11_run", "army11_reinf_late", "army12_moving", "army12_run", "army12_reinf_late", "army13_moving", "army13_run", "army13_reinf_late", "army14_moving",
                "army14_run", "army14_reinf_late", "army15_moving", "army15_run", "army15_reinf_late", "army16_moving", "army16_run", "army16_reinf_late", "army4_ready_siege", "army4_moving_siege", "army4_run_siege", "reinf_check_interval", "ha_fix", "elephant_fix", "elephant_gate", "elephant_gate_s", "elephant_gate_tier2",
                "elephant_gate_tier3", "elephant_gate_tier2s", "elephant_gate_tier3s", "rally_walls", "rally_walls_s", "second_ring", "third_ring", "second_ring_s", "third_ring_s", "del_objective", "del_objective_s", "sally-out_fix", "sally_defense", "reform_back", "reform_multi", "unit_under_fire", "kill_sally", "sally_reinf", "reset_position",
                "defend_location", "reset_army2", "assign_labels", "siege_fix", "army_sieging", "army_south", "army_north", "army_east", "army_west", "emergency_stop", "omfg_cannon_tower", "army2_sally", "wall_advance_s", "protect_general", "general_wait", "protect_siege", "g_stop", "army4_ready_sally", "army4_location", "path_n", "path_ne",
                "path_e", "path_se", "path_s", "path_sw", "path_w", "path_nw", "obstacle_check", "label_army4", "army4_moving_s", "army4_idle_s", "line_passed", "army2_idle_s", "army4_idle_r", "wall_line_passed", "reset_position_s", "repeat_test1", "repeat_test2", "repeat_test3", "repeat_test4", "repeat_test5", "repeat_test6", "ob_defense_launch",
                "ob_defend", "ob_siege_attack", "ob_under_fire", "ob_repeat_test", "ob_engaged", "player_units_closing", "player_enveloping", "player_engaged_reinf", "ai_stuck_launch", "a2u1_stuck", "a2u2_stuck", "a2u3_stuck", "a2u4_stuck", "a2u5_stuck", "a2u6_stuck", "a2u7_stuck", "a2u8_stuck", "a2u9_stuck", "a2u10_stuck", "a2u11_stuck",
                "a2u12_stuck", "a2u13_stuck", "a2u14_stuck", "a2u15_stuck", "a2u16_stuck", "a2u17_stuck", "a2u18_stuck", "a2u19_stuck", "a2u20_stuck", "a2u1_status", "a2u2_status", "a2u3_status", "a2u4_status", "a2u5_status", "a2u6_status", "a2u7_status", "a2u8_status", "a2u9_status", "a2u10_status", "a2u11_status", "a2u12_status", "a2u13_status",
                "a2u14_status", "a2u15_status", "a2u16_status", "a2u17_status", "a2u18_status", "a2u19_status", "a2u20_status", "a2u1_distance", "a2u2_distance", "a2u3_distance", "a2u4_distance", "a2u5_distance", "a2u6_distance", "a2u7_distance", "a2u8_distance", "a2u9_distance", "a2u10_distance", "a2u11_distance", "a2u12_distance", "a2u13_distance",
                "a2u14_distance", "a2u15_distance", "a2u16_distance", "a2u17_distance", "a2u18_distance", "a2u19_distance", "a2u20_distance" };
                var BAI = "\nlog always Germanicu5 ReallyBadAI v5.7 Running\nmonitor_event GameReloaded\nlog always Germanicu5 ReallyBadAI v5.7 Running.\nend_monitor\n\nmonitor_event PreFactionTurnStart FactionIsLocal\n\tand BattleDifficulty > medium\n\n\tset_counter g5_battle_difficulty_high 1\n\tterminate_monitor\n" +
                    "end_monitor\n\nmonitor_event PreFactionTurnStart FactionIsLocal\n\tand I_CompareCounter panel_check != 1\n\n\tset_counter panel_check 1\nend_monitor\n\nmonitor_event GeneralAssaultsGeneral TargetFactionIsLocal\n\tand I_CompareCounter panel_check != 1\n\n\tset_counter panel_check 1\nend_monitor" +
                    "\n\nmonitor_event GeneralAssaultsGeneral ! FactionIsLocal\n\tand ! TargetFactionIsLocal\n\tand I_CompareCounter panel_check != 2\n\n\tset_counter panel_check 2\nend_monitor\n\nmonitor_event GeneralAssaultsResidence TargetFactionIsLocal\n\tand I_CompareCounter panel_check != 1\n\n\tset_counter " +
                    "panel_check 1\nend_monitor\n\nmonitor_event GeneralAssaultsResidence ! FactionIsLocal\n\tand ! TargetFactionIsLocal\n\tand I_CompareCounter panel_check != 2\n\n\tset_counter panel_check 2\nend_monitor\n\nmonitor_event ButtonPressed ButtonPressed prebattle_fight_button\n\tand I_CompareCounter panel_check = 1\n\n" +
                    ";\tsuspend_unscripted_advice true\n\tset_counter fire_labels 10\n\t;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\tset_counter player_unit_count 0\n\tset_counter enemy_unit_count 0\n\tset_counter open_battle 0\n\tset_counter labels_only 0\n\tset_counter stakes_lock 0\n\t;;;;;;;\n\tset_counter pu1_missile 0\n" +
                    "\tset_counter pu2_missile 0\n\tset_counter pu3_missile 0\n\tset_counter pu4_missile 0\n\tset_counter pu5_missile 0\n\tset_counter pu6_missile 0\n\tset_counter pu7_missile 0\n\tset_counter pu8_missile 0\n\tset_counter pu9_missile 0\n\tset_counter pu10_missile 0\n\tset_counter pu11_missile 0\n" +
                    "\tset_counter pu12_missile 0\n\tset_counter pu13_missile 0\n\tset_counter pu14_missile 0\n\tset_counter pu15_missile 0\n\tset_counter pu16_missile 0\n\tset_counter pu17_missile 0\n\tset_counter pu18_missile 0\n\tset_counter pu19_missile 0\n\tset_counter pu20_missile 0\n\t;;;;;;;Checks\n" +
                    "\tset_counter check_timer 0\n\tset_counter elephant_fix_check 0\n\tset_counter elephant_fix_check_sally 0\n\tset_counter reinf_check 0\n\tset_counter script_delay 0\n\tset_counter sally_defense_check 0\n\tset_counter sally_check 0\n\t;;;;;;;Stakes\n\tset_counter label_ready 0\n\tset_counter stakes_on 0\n" +
                    "\t;;;;;;;Reinforcements\n\tset_counter army4_ready 0\n\tset_counter reinf_late 0\n\n\tset_counter distance_trigger1 0\n\tset_counter distance_trigger2 0\n\tset_counter distance_trigger3 0\n\tset_counter distance_trigger4 0\n\tset_counter distance_trigger5 0\n\n\tset_counter kill_labelling_reinf_allied 0\n" +
                    "\tset_counter army3_reinf_allied 0\n\tset_counter army4_reinf_allied 0\n\tset_counter army5_reinf_allied 0\n\tset_counter army6_reinf_allied 0\n\tset_counter army7_reinf_allied 0\n\tset_counter army8_reinf_allied 0\n\tset_counter army9_reinf_allied 0\n\tset_counter army10_reinf_allied 0\n" +
                    "\tset_counter army11_reinf_allied 0\n\tset_counter army12_reinf_allied 0\n\tset_counter army13_reinf_allied 0\n\tset_counter army14_reinf_allied 0\n\tset_counter army15_reinf_allied 0\n\tset_counter army16_reinf_allied 0\n\tset_counter launch_alliance_0 0\n\tset_counter launch_alliance_1 0\n\n" +
                    "\tset_counter apply_strategy 0\n\tset_counter relaunch_movement 0\n\n\tset_counter att_alliance_ready 0\n\tset_counter def_alliance_ready 0\n\tset_counter def_alliance_ready_siege 0\n\n\tset_counter army3_moving 0\n\tset_counter army3_run 0\n\tset_counter army3_reinf_late 0\n\tset_counter army4_moving 0\n" +
                    "\tset_counter army4_run 0\n\tset_counter army4_reinf_late 0\n\tset_counter army5_moving 0\n\tset_counter army5_run 0\n\tset_counter army5_reinf_late 0\n\tset_counter army6_moving 0\n\tset_counter army6_run 0\n\tset_counter army6_reinf_late 0\n\tset_counter army7_moving 0\n\tset_counter army7_run 0\n" +
                    "\tset_counter army7_reinf_late 0\n\tset_counter army8_moving 0\n\tset_counter army8_run 0\n\tset_counter army8_reinf_late 0\n\tset_counter army9_moving 0\n\tset_counter army9_run 0\n\tset_counter army9_reinf_late 0\n\tset_counter army10_moving 0\n\tset_counter army10_run 0\n\tset_counter army10_reinf_late 0\n" +
                    "\tset_counter army11_moving 0\n\tset_counter army11_run 0\n\tset_counter army11_reinf_late 0\n\tset_counter army12_moving 0\n\tset_counter army12_run 0\n\tset_counter army12_reinf_late 0\n\tset_counter army13_moving 0\n\tset_counter army13_run 0\n\tset_counter army13_reinf_late 0\n" +
                    "\tset_counter army14_moving 0\n\tset_counter army14_run 0\n\tset_counter army14_reinf_late 0\n\tset_counter army15_moving 0\n\tset_counter army15_run 0\n\tset_counter army15_reinf_late 0\n\tset_counter army16_moving 0\n\tset_counter army16_run 0\n\tset_counter army16_reinf_late 0\n\n" +
                    "\tset_counter army4_ready_siege 0 ; acts as launching counter\n\tset_counter army4_moving_siege 0\n\tset_counter army4_run_siege 0\n\tset_counter reinf_check_interval 0\n\n\t;;;;;;;HA Fix\n\tset_counter ha_fix 0\n\t;;;;;;;Elephant Fix\n\tset_counter elephant_fix 0\n\tset_counter elephant_gate 0\n" +
                    "\tset_counter elephant_gate_s 0\n\tset_counter elephant_gate_tier2 0\n\tset_counter elephant_gate_tier3 0\n\tset_counter elephant_gate_tier2s 0\n\tset_counter elephant_gate_tier3s 0\n\tset_counter rally_walls 0\n\tset_counter rally_walls_s 0\n\tset_counter second_ring 0\n\tset_counter third_ring 0\n" +
                    "\tset_counter second_ring_s 0\n\tset_counter third_ring_s 0\n\tset_counter del_objective 0\n\tset_counter del_objective_s 0\n\t;;;;;;;Sally-out\n\tset_counter sally-out_fix 0\n\tset_counter sally_defense 0\n\tset_counter reform_back 0\n\tset_counter reform_multi 0\n\tset_counter unit_under_fire 0\n" +
                    "\tset_counter kill_sally 0\n\tset_counter sally_reinf 0\n\tset_counter reset_position 0\n\tset_counter defend_location 0\n\tset_counter reset_army2 0\n\tset_counter assign_labels 0\n\t;;;;;;;Siege\n\tset_counter siege_fix 0\n\tset_counter army_sieging 0\n\tset_counter army_south 0\n" +
                    "\tset_counter army_north 0\n\tset_counter army_east 0\n\tset_counter army_west 0\n\tset_counter emergency_stop 0\n\tset_counter omfg_cannon_tower 0\n\tset_counter army2_sally 0\n\tset_counter wall_advance_s 0\n\t;;;;;;;Protect General\n\tset_counter protect_general 0\n\tset_counter general_wait 0\n" +
                    "\tset_counter protect_siege 0\n\tset_counter g_stop 0\n\t;;;;;;;Sally-out, AI defending\n\tset_counter army4_ready_sally 0\n\tset_counter army4_location 0\n\tset_counter path_n 0\n\tset_counter path_ne 0\n\tset_counter path_e 0\n\tset_counter path_se 0\n\tset_counter path_s 0\n\tset_counter path_sw 0\n" +
                    "\tset_counter path_w 0\n\tset_counter path_nw 0\n\tset_counter obstacle_check 0\n\tset_counter label_army4 0\n\tset_counter army4_moving_s 0\n\tset_counter army4_idle_s 0\n\tset_counter line_passed 0\n\tset_counter army2_idle_s 0\n\tset_counter army4_idle_r 0\n\tset_counter wall_line_passed 0\n" +
                    "\tset_counter reset_position_s 0\n\tset_counter repeat_test1 0\n\tset_counter repeat_test2 0\n\tset_counter repeat_test3 0\n\tset_counter repeat_test4 0\n\tset_counter repeat_test5 0\n\tset_counter repeat_test6 0\n\t;;;;;;;Open Battles\n\tset_counter ob_defense_launch 0\n\tset_counter ob_defend 0\n" +
                    "\tset_counter ob_siege_attack 0\n\tset_counter ob_under_fire 0\n\tset_counter ob_repeat_test 0\n\tset_counter ob_engaged 0\n\tset_counter player_units_closing 0\n\tset_counter player_enveloping 0\n\tset_counter player_engaged_reinf 0\n\t;;;;;;;AI Stuck Fix\n\tset_counter ai_stuck_launch 0\n" +
                    "\tset_counter a2u1_stuck 0\n\tset_counter a2u2_stuck 0\n\tset_counter a2u3_stuck 0\n\tset_counter a2u4_stuck 0\n\tset_counter a2u5_stuck 0\n\tset_counter a2u6_stuck 0\n\tset_counter a2u7_stuck 0\n\tset_counter a2u8_stuck 0\n\tset_counter a2u9_stuck 0\n\tset_counter a2u10_stuck 0\n" +
                    "\tset_counter a2u11_stuck 0\n\tset_counter a2u12_stuck 0\n\tset_counter a2u13_stuck 0\n\tset_counter a2u14_stuck 0\n\tset_counter a2u15_stuck 0\n\tset_counter a2u16_stuck 0\n\tset_counter a2u17_stuck 0\n\tset_counter a2u18_stuck 0\n\tset_counter a2u19_stuck 0\n\tset_counter a2u20_stuck 0\n" +
                    "\tset_counter a2u1_status 0\n\tset_counter a2u2_status 0\n\tset_counter a2u3_status 0\n\tset_counter a2u4_status 0\n\tset_counter a2u5_status 0\n\tset_counter a2u6_status 0\n\tset_counter a2u7_status 0\n\tset_counter a2u8_status 0\n\tset_counter a2u9_status 0\n\tset_counter a2u10_status 0\n" +
                    "\tset_counter a2u11_status 0\n\tset_counter a2u12_status 0\n\tset_counter a2u13_status 0\n\tset_counter a2u14_status 0\n\tset_counter a2u15_status 0\n\tset_counter a2u16_status 0\n\tset_counter a2u17_status 0\n\tset_counter a2u18_status 0\n\tset_counter a2u19_status 0\n\tset_counter a2u20_status 0\n" +
                    "\tset_counter a2u1_distance 0\n\tset_counter a2u2_distance 0\n\tset_counter a2u3_distance 0\n\tset_counter a2u4_distance 0\n\tset_counter a2u5_distance 0\n\tset_counter a2u6_distance 0\n\tset_counter a2u7_distance 0\n\tset_counter a2u8_distance 0\n\tset_counter a2u9_distance 0\n" +
                    "\tset_counter a2u10_distance 0\n\tset_counter a2u11_distance 0\n\tset_counter a2u12_distance 0\n\tset_counter a2u13_distance 0\n\tset_counter a2u14_distance 0\n\tset_counter a2u15_distance 0\n\tset_counter a2u16_distance 0\n\tset_counter a2u17_distance 0\n\tset_counter a2u18_distance 0\n" +
                    "\tset_counter a2u19_distance 0\n\tset_counter a2u20_distance 0\n\tprepare_for_battle\nend_monitor\n\nmonitor_conditions I_InBattle\n\tand I_CompareCounter fire_labels = 10\n\n\tset_counter fire_labels 0\n\tbattle_wait 0.1\n\n\tif ! I_BattleIsSiegeBattle\n\tset_counter fire_labels 1\n\tend_if\n\n" +
                    "\tif I_BattleIsSiegeBattle\n\tand I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tset_counter fire_labels 1\n\tend_if\n\nif I_BattlePlayerArmyIsAttacker\n\n\t;;;Army 1\n\tset_counter player_unit_count 0\n\tif I_BattlePlayerArmyNumberOfUnits > 0\n\tlabel_unit 0 0 0 a1u1\n" +
                    "\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 1\n\tlabel_unit 0 0 1 a1u2\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 2\n\tlabel_unit 0 0 2 a1u3\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 3\n\tlabel_unit 0 0 3 a1u4\n" +
                    "\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 4\n\tlabel_unit 0 0 4 a1u5\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 5\n\tlabel_unit 0 0 5 a1u6\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 6\n\tlabel_unit 0 0 6 a1u7\n" +
                    "\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 7\n\tlabel_unit 0 0 7 a1u8\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 8\n\tlabel_unit 0 0 8 a1u9\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 9\n\tlabel_unit 0 0 9 a1u10\n" +
                    "\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 10\n\tlabel_unit 0 0 10 a1u11\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 11\n\tlabel_unit 0 0 11 a1u12\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 12\n\tlabel_unit 0 0 12 a1u13\n" +
                    "\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 13\n\tlabel_unit 0 0 13 a1u14\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 14\n\tlabel_unit 0 0 14 a1u15\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 15\n\tlabel_unit 0 0 15 a1u16\n" +
                    "\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 16\n\tlabel_unit 0 0 16 a1u17\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 17\n\tlabel_unit 0 0 17 a1u18\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 18\n\tlabel_unit 0 0 18 a1u19\n" +
                    "\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits = 20\n\tlabel_unit 0 0 19 a1u20\n\tinc_counter player_unit_count 1\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n" +
                    "\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\nend_if\nif I_BattlePlayerArmyIsAttacker\n;\tand ! I_BattleIsSiegeBattle\n\t;;;Army 2\n\tset_counter enemy_unit_count 0\n\tif I_BattleEnemyArmyNumberOfUnits > 0\n\tlabel_unit 1 0 0 a2u1\n\tinc_counter enemy_unit_count 1\n" +
                    "\tif I_BattleEnemyArmyNumberOfUnits > 1\n\tlabel_unit 1 0 1 a2u2\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 2\n\tlabel_unit 1 0 2 a2u3\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 3\n\tlabel_unit 1 0 3 a2u4\n\tinc_counter enemy_unit_count 1\n" +
                    "\tif I_BattleEnemyArmyNumberOfUnits > 4\n\tlabel_unit 1 0 4 a2u5\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 5\n\tlabel_unit 1 0 5 a2u6\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 6\n\tlabel_unit 1 0 6 a2u7\n\tinc_counter enemy_unit_count 1\n" +
                    "\tif I_BattleEnemyArmyNumberOfUnits > 7\n\tlabel_unit 1 0 7 a2u8\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 8\n\tlabel_unit 1 0 8 a2u9\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 9\n\tlabel_unit 1 0 9 a2u10\n\tinc_counter enemy_unit_count 1\n" +
                    "\tif I_BattleEnemyArmyNumberOfUnits > 10\n\tlabel_unit 1 0 10 a2u11\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 11\n\tlabel_unit 1 0 11 a2u12\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 12\n\tlabel_unit 1 0 12 a2u13\n\tinc_counter enemy_unit_count 1\n" +
                    "\tif I_BattleEnemyArmyNumberOfUnits > 13\n\tlabel_unit 1 0 13 a2u14\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 14\n\tlabel_unit 1 0 14 a2u15\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 15\n\tlabel_unit 1 0 15 a2u16\n\tinc_counter enemy_unit_count 1\n" +
                    "\tif I_BattleEnemyArmyNumberOfUnits > 16\n\tlabel_unit 1 0 16 a2u17\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 17\n\tlabel_unit 1 0 17 a2u18\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 18\n\tlabel_unit 1 0 18 a2u19\n\tinc_counter enemy_unit_count 1\n" +
                    "\tif I_BattleEnemyArmyNumberOfUnits = 20\n\tlabel_unit 1 0 19 a2u20\n\tinc_counter enemy_unit_count 1\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n" +
                    "\tend_if\n\tend_if\nend_if\n\nif I_BattlePlayerArmyIsAttacker\n\n\tif I_BattlePlayerArmyNumberOfUnits = 1\n\tdefine_unit_group army1 a1u1\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 2\n\tdefine_unit_group army1 a1u1 a1u2\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 3\n" +
                    "\tdefine_unit_group army1 a1u1 a1u2 a1u3\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 4\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 5\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 6\n" +
                    "\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 7\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 8\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8\n\tend_if\n" +
                    "\tif I_BattlePlayerArmyNumberOfUnits = 9\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 10\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 11\n" +
                    "\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 12\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 13\n" +
                    "\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 14\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 15\n" +
                    "\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 16\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 17\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 18\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17 a1u18\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 19\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17 a1u18 a1u19\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 20\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17 a1u18 a1u19 a1u20\n\tend_if\nend_if\n\nif I_BattlePlayerArmyIsAttacker\n;\tand ! I_BattleIsSiegeBattle\n\tif I_BattleEnemyArmyNumberOfUnits = 1\n\tdefine_unit_group army2 a2u1\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 2\n\tdefine_unit_group army2 a2u1 a2u2\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 3\n\tdefine_unit_group army2 a2u1 a2u2 a2u3\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 4\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 5\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 6\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 7\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 8\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 9\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 10\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 11\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 12\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 13\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 14\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 15\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 16\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 17\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 18\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17 a2u18\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 19\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17 a2u18 a2u19\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 20\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17 a2u18 a2u19 a2u20\n\tend_if\nend_if\nif ! I_BattlePlayerArmyIsAttacker\n\t;;;Army 1\n\tset_counter enemy_unit_count 0\n\tif I_BattleEnemyArmyNumberOfUnits > 0\n\tlabel_unit 0 0 0 a1u1\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 1\n\tlabel_unit 0 0 1 a1u2\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 2\n\tlabel_unit 0 0 2 a1u3\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 3\n\tlabel_unit 0 0 3 a1u4\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 4\n\tlabel_unit 0 0 4 a1u5\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 5\n\tlabel_unit 0 0 5 a1u6\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 6\n\tlabel_unit 0 0 6 a1u7\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 7\n\tlabel_unit 0 0 7 a1u8\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 8\n\tlabel_unit 0 0 8 a1u9\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 9\n\tlabel_unit 0 0 9 a1u10\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 10\n\tlabel_unit 0 0 10 a1u11\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 11\n\tlabel_unit 0 0 11 a1u12\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 12\n\tlabel_unit 0 0 12 a1u13\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 13\n\tlabel_unit 0 0 13 a1u14\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 14\n\tlabel_unit 0 0 14 a1u15\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 15\n\tlabel_unit 0 0 15 a1u16\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 16\n\tlabel_unit 0 0 16 a1u17\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 17\n\tlabel_unit 0 0 17 a1u18\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 18\n\tlabel_unit 0 0 18 a1u19\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits = 20\n\tlabel_unit 0 0 19 a1u20\n\tinc_counter enemy_unit_count 1\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n\t;;;Army 2\n\tset_counter player_unit_count 0\n\tif I_BattlePlayerArmyNumberOfUnits > 0\n\tlabel_unit 1 0 0 a2u1\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 1\n\tlabel_unit 1 0 1 a2u2\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 2\n\tlabel_unit 1 0 2 a2u3\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 3\n\tlabel_unit 1 0 3 a2u4\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 4\n\tlabel_unit 1 0 4 a2u5\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 5\n\tlabel_unit 1 0 5 a2u6\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 6\n\tlabel_unit 1 0 6 a2u7\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 7\n\tlabel_unit 1 0 7 a2u8\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 8\n\tlabel_unit 1 0 8 a2u9\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 9\n\tlabel_unit 1 0 9 a2u10\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 10\n\tlabel_unit 1 0 10 a2u11\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 11\n\tlabel_unit 1 0 11 a2u12\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 12\n\tlabel_unit 1 0 12 a2u13\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 13\n\tlabel_unit 1 0 13 a2u14\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 14\n\tlabel_unit 1 0 14 a2u15\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 15\n\tlabel_unit 1 0 15 a2u16\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 16\n\tlabel_unit 1 0 16 a2u17\n\tinc_counter player_unit_count 1\n" +
                    "\tif I_BattlePlayerArmyNumberOfUnits > 17\n\tlabel_unit 1 0 17 a2u18\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits > 18\n\tlabel_unit 1 0 18 a2u19\n\tinc_counter player_unit_count 1\n\tif I_BattlePlayerArmyNumberOfUnits = 20\n\tlabel_unit 1 0 19 a2u20\n\tinc_counter player_unit_count 1\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n\tif I_BattleEnemyArmyNumberOfUnits = 1\n\tdefine_unit_group army1 a1u1\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 2\n\tdefine_unit_group army1 a1u1 a1u2\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 3\n\tdefine_unit_group army1 a1u1 a1u2 a1u3\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 4\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 5\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 6\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 7\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 8\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 9\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 10\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 11\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 12\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 13\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 14\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 15\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 16\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 17\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 18\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17 a1u18\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 19\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17 a1u18 a1u19\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits = 20\n\tdefine_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17 a1u18 a1u19 a1u20\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 1\n\tdefine_unit_group army2 a2u1\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 2\n\tdefine_unit_group army2 a2u1 a2u2\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 3\n\tdefine_unit_group army2 a2u1 a2u2 a2u3\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 4\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 5\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 6\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 7\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 8\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 9\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 10\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 11\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 12\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 13\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 14\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 15\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 16\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 17\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 18\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17 a2u18\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 19\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17 a2u18 a2u19\n\tend_if\n\tif I_BattlePlayerArmyNumberOfUnits = 20\n\tdefine_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17 a2u18 a2u19 a2u20\n\tend_if\nend_if\n\nif I_BattlePlayerArmyIsAttacker\n\tif I_CompareCounter player_unit_count >= 1\n\tif I_UnitPercentageAmmoLeft a1u1 > 0\n\tset_counter pu1_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a1u1 = horde\n\tset_counter pu1_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 2\n\tif I_UnitPercentageAmmoLeft a1u2 > 0\n\tset_counter pu2_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a1u2 = horde\n\tset_counter pu2_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 3\n\tif I_UnitPercentageAmmoLeft a1u3 > 0\n\tset_counter pu3_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a1u3 = horde\n" +
                    "\tset_counter pu3_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 4\n\tif I_UnitPercentageAmmoLeft a1u4 > 0\n\tset_counter pu4_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a1u4 = horde\n\tset_counter pu4_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 5\n\tif I_UnitPercentageAmmoLeft a1u5 > 0\n\tset_counter pu5_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a1u5 = horde\n\tset_counter pu5_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 6\n\tif I_UnitPercentageAmmoLeft a1u6 > 0\n\tset_counter pu6_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a1u6 = horde\n\tset_counter pu6_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 7\n\tif I_UnitPercentageAmmoLeft a1u7 > 0\n\tset_counter pu7_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a1u7 = horde\n\tset_counter pu7_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 8\n\tif I_UnitPercentageAmmoLeft a1u8 > 0\n\tset_counter pu8_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a1u8 = horde\n\tset_counter pu8_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 9\n\tif I_UnitPercentageAmmoLeft a1u9 > 0\n\tset_counter pu9_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a1u9 = horde\n\tset_counter pu9_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 10\n\tif I_UnitPercentageAmmoLeft a1u10 > 0\n\tset_counter pu10_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a1u10 = horde\n\tset_counter pu10_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 11\n\tif I_UnitPercentageAmmoLeft a1u11 > 0\n\tset_counter pu11_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a1u11 = horde\n\tset_counter pu11_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 12\n\tif I_UnitPercentageAmmoLeft a1u12 > 0\n\tset_counter pu12_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a1u12 = horde\n\tset_counter pu12_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 13\n\tif I_UnitPercentageAmmoLeft a1u13 > 0\n\tset_counter pu13_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a1u13 = horde\n\tset_counter pu13_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 14\n\tif I_UnitPercentageAmmoLeft a1u14 > 0\n\tset_counter pu14_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a1u14 = horde\n\tset_counter pu14_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 15\n\tif I_UnitPercentageAmmoLeft a1u15 > 0\n\tset_counter pu15_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a1u15 = horde\n\tset_counter pu15_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 16\n\tif I_UnitPercentageAmmoLeft a1u16 > 0\n\tset_counter pu16_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a1u16 = horde\n\tset_counter pu16_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 17\n\tif I_UnitPercentageAmmoLeft a1u17 > 0\n\tset_counter pu17_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a1u17 = horde\n\tset_counter pu17_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 18\n\tif I_UnitPercentageAmmoLeft a1u18 > 0\n\tset_counter pu18_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a1u18 = horde\n\tset_counter pu18_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 19\n\tif I_UnitPercentageAmmoLeft a1u19 > 0\n\tset_counter pu19_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a1u19 = horde\n\tset_counter pu19_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count = 20\n\tif I_UnitPercentageAmmoLeft a1u20 > 0\n\tset_counter pu20_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a1u20 = horde\n\tset_counter pu20_missile 2\n\tend_if\n\tend_if\n\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\nend_if\n\nif ! I_BattlePlayerArmyIsAttacker\n\tif I_CompareCounter player_unit_count >= 1\n\tif I_UnitPercentageAmmoLeft a2u1 > 0\n\tset_counter pu1_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a2u1 = horde\n\tset_counter pu1_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 2\n\tif I_UnitPercentageAmmoLeft a2u2 > 0\n\tset_counter pu2_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a2u2 = horde\n\tset_counter pu2_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 3\n\tif I_UnitPercentageAmmoLeft a2u3 > 0\n\tset_counter pu3_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a2u3 = horde\n\tset_counter pu3_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 4\n\tif I_UnitPercentageAmmoLeft a2u4 > 0\n\tset_counter pu4_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a2u4 = horde\n\tset_counter pu4_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 5\n\tif I_UnitPercentageAmmoLeft a2u5 > 0\n\tset_counter pu5_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a2u5 = horde\n\tset_counter pu5_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 6\n\tif I_UnitPercentageAmmoLeft a2u6 > 0\n\tset_counter pu6_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a2u6 = horde\n\tset_counter pu6_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 7\n\tif I_UnitPercentageAmmoLeft a2u7 > 0\n\tset_counter pu7_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a2u7 = horde\n\tset_counter pu7_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 8\n\tif I_UnitPercentageAmmoLeft a2u8 > 0\n\tset_counter pu8_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a2u8 = horde\n\tset_counter pu8_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 9\n\tif I_UnitPercentageAmmoLeft a2u9 > 0\n\tset_counter pu9_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a2u9 = horde\n\tset_counter pu9_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 10\n\tif I_UnitPercentageAmmoLeft a2u10 > 0\n\tset_counter pu10_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a2u10 = horde\n\tset_counter pu10_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 11\n\tif I_UnitPercentageAmmoLeft a2u11 > 0\n\tset_counter pu11_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a2u11 = horde\n\tset_counter pu11_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 12\n\tif I_UnitPercentageAmmoLeft a2u12 > 0\n\tset_counter pu12_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a2u12 = horde\n" +
                    "\tset_counter pu12_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 13\n\tif I_UnitPercentageAmmoLeft a2u13 > 0\n\tset_counter pu13_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a2u13 = horde\n\tset_counter pu13_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 14\n\tif I_UnitPercentageAmmoLeft a2u14 > 0\n\tset_counter pu14_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a2u14 = horde\n\tset_counter pu14_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 15\n\tif I_UnitPercentageAmmoLeft a2u15 > 0\n\tset_counter pu15_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a2u15 = horde\n\tset_counter pu15_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 16\n\tif I_UnitPercentageAmmoLeft a2u16 > 0\n\tset_counter pu16_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a2u16 = horde\n\tset_counter pu16_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 17\n\tif I_UnitPercentageAmmoLeft a2u17 > 0\n\tset_counter pu17_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a2u17 = horde\n\tset_counter pu17_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 18\n\tif I_UnitPercentageAmmoLeft a2u18 > 0\n\tset_counter pu18_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a2u18 = horde\n\tset_counter pu18_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count >= 19\n\tif I_UnitPercentageAmmoLeft a2u19 > 0\n\tset_counter pu19_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a2u19 = horde\n\tset_counter pu19_missile 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter player_unit_count = 20\n\tif I_UnitPercentageAmmoLeft a2u20 > 0\n\tset_counter pu20_missile 1\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_UnitFormation a2u20 = horde\n\tset_counter pu20_missile 2\n\tend_if\n\tend_if\n\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\nend_if\n;\tbattle_wait 0.1\n;\tai_active_set off\n\tbattle_wait 0.1\n\tai_active_set on\n\tset_counter labels_only 1\n\n\tif I_BattleIsSiegeBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tset_counter ai_stuck_launch 1\n\tend_if\n\n\tif I_BattleIsSiegeBattle\n\tand ! I_BattlePlayerArmyIsAttacker\n\tand I_BattlePlayerArmyNumberOfAttribute stakes > 0\n\tset_counter stakes_lock 1\n\tend_if\n\n\tif I_BattleIsSiegeBattle\n\tand ! I_BattlePlayerArmyIsAttacker\n;\tand I_BattleEnemyArmyNumberOfSpecialAbility rally > 0\n\tset_counter protect_siege 1\n\tend_if\n\n\tif ! I_BattleIsSiegeBattle\n\tand ! I_BattleIsSallyOutBattle\n\tand ! I_BattleIsRiverBattle\n\tand ! I_ConflictType SuccessfulAmbush\n\tset_counter open_battle 1\n\tend_if\n\nif I_CompareCounter fire_labels = 1\n\tif I_BattleIsSiegeBattle\n\tlabel_location 0, -850, south_side\n\tlabel_location 0, 850, north_side\n\tlabel_location -850, 0, west_side\n\tlabel_location 850, 0, east_side\n\tend_if\n\n\tif I_BattleIsSallyOutBattle\n\tlabel_location 0, -850, south_side\n\tlabel_location 0, 850, north_side\n\tlabel_location -850, 0, west_side\n\tlabel_location 850, 0, east_side\n\tend_if\n\n\tif I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tlabel_location -470, -470, sw\n\tlabel_location 470, -470, se\n\tlabel_location -470, 470, nw\n\tlabel_location 470, 470, ne\n\tlabel_location -400, -400, sw_wall\n\tlabel_location 400, -400, se_wall\n\tlabel_location -400, 400, nw_wall\n\tlabel_location 400, 400, ne_wall\n\tend_if\n\n\tif I_BattleIsSiegeBattle\n\tand ! I_BattlePlayerArmyIsAttacker\n\tand I_UnitDistanceFromLine a1u1 west_side east_side > 200\n\tset_counter army_south 1\n\tend_if\n\tif I_BattleIsSiegeBattle\n\tand ! I_BattlePlayerArmyIsAttacker\n\tand I_UnitDistanceFromLine a1u1 west_side east_side < -200\n\tset_counter army_north 1\n\tend_if\n\tif I_BattleIsSiegeBattle\n\tand ! I_BattlePlayerArmyIsAttacker\n\tand I_UnitDistanceFromLine a1u1 south_side north_side > 200\n\tset_counter army_east 1\n\tend_if\n\tif I_BattleIsSiegeBattle\n\tand ! I_BattlePlayerArmyIsAttacker\n\tand I_UnitDistanceFromLine a1u1 south_side north_side < -200\n\tset_counter army_west 1\n\tend_if\n\n\tif I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_UnitDistanceFromLine a2u1 west_side east_side > 200\n\tset_counter army_south 1\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_UnitDistanceFromLine a2u1 west_side east_side < -200\n\tset_counter army_north 1\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_UnitDistanceFromLine a2u1 south_side north_side > 200\n\tset_counter army_east 1\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_UnitDistanceFromLine a2u1 south_side north_side < -200\n\tset_counter army_west 1\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tset_counter sally-out_fix 1\n\tend_if\n\n\tif I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tset_counter siege_fix 1\n\tend_if\n\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tand I_BattleIsSiegeBattle\n" +
                    "\tset_counter elephant_fix 1\n\tend_if\n\nend_if\nend_monitor\n\nmonitor_event BattleConflictPhaseCommenced FactionIsLocal\n\tand I_CompareCounter panel_check = 1\n\n\tset_counter script_delay 1\n\tbattle_wait 15\n\tif I_CompareCounter script_delay = 1\n\n\tif I_CompareCounter fire_labels = 0\n\tand I_BattleEnemyArmyNumberOfAttribute stakes > 0\n\tand I_CompareCounter g5_battle_difficulty_high = 1\n\tand I_BattleIsSiegeBattle\n\tset_counter label_ready 1\n\tend_if\n\n\tif I_CompareCounter fire_labels = 1\n\tif I_BattleEnemyArmyNumberOfAttribute stakes > 0\n\tand I_CompareCounter g5_battle_difficulty_high = 1\n\tand ! I_BattleIsSiegeBattle\n\tset_counter label_ready 1\n\tend_if\n\n\tif I_BattlePlayerArmyIsAttacker\n\tand I_CompareCounter open_battle = 1\n\tai_gta_plan_set 1 DEFEND_FEATURE\n\tbattle_wait 1\n\tai_active_set on\n\tset_counter ob_defense_launch 1\n\tend_if\n\tend_if\n\n\tif ! I_BattleIsSiegeBattle\n\tand ! I_BattleIsSallyOutBattle\n\tand ! I_BattleIsRiverBattle\n\tand ! I_ConflictType SuccessfulAmbush\n\tand I_BattleEnemyArmyNumberOfUnits > 2\n\tset_counter g_stop 1\n\tend_if\n\n\tif I_BattleStarted\n\tand I_CompareCounter kill_sally = 0\n\tand I_CompareCounter fire_labels = 1\n\tand I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tset_counter sally_defense 1\n\tset_counter assign_labels 1\n\tend_if\n\n\tif I_BattleStarted\n\tand I_CompareCounter fire_labels = 1\n\tand I_CompareCounter open_battle = 1\n\tset_counter ha_fix 1\n\tend_if\n\n\tif I_BattleStarted\n\tand I_CompareCounter fire_labels = 1\n\tand I_BattleIsRiverBattle\n\tand ! I_BattlePlayerArmyIsAttacker\n\tset_counter ha_fix 1\n\tend_if\n\tset_counter script_delay 0\n\tend_if\nend_monitor\n\nmonitor_event BattleReinforcementsArrive ! ArmyIsLocal\n\tand I_CompareCounter panel_check = 1\n\tand I_CompareCounter fire_labels = 1\n\n\tset_counter reinf_check 1\n\tbattle_wait 15\nif I_CompareCounter reinf_check = 1\n\tset_counter reinf_check 2\n\tbattle_wait 15\nif I_CompareCounter reinf_check = 2\n\tset_counter reinf_check 3\n\tbattle_wait 15\nif I_CompareCounter reinf_check = 3\n if ! I_BattlePlayerArmyIsAttacker\n\t;;;Army 3\n\tlabel_unit 0 1 0 a3u1\n\tdefine_unit_group army3a a3u1\n\tif ! I_PercentageUnitGroupKilled army3a = 100\n\tundefine_unit_group army3a\n\t;;;Army 3\n\tlabel_unit 0 1 0 a3u1\n\tlabel_unit 0 1 1 a3u2\n\tlabel_unit 0 1 2 a3u3\n\tlabel_unit 0 1 3 a3u4\n\tlabel_unit 0 1 4 a3u5\n\tlabel_unit 0 1 5 a3u6\n\tlabel_unit 0 1 6 a3u7\n\tlabel_unit 0 1 7 a3u8\n\tlabel_unit 0 1 8 a3u9\n\tlabel_unit 0 1 9 a3u10\n\tlabel_unit 0 1 10 a3u11\n\tlabel_unit 0 1 11 a3u12\n\tlabel_unit 0 1 12 a3u13\n\tlabel_unit 0 1 13 a3u14\n\tlabel_unit 0 1 14 a3u15\n\tlabel_unit 0 1 15 a3u16\n\tlabel_unit 0 1 16 a3u17\n\tlabel_unit 0 1 17 a3u18\n\tlabel_unit 0 1 18 a3u19\n\tlabel_unit 0 1 19 a3u20\n\n\tdefine_unit_group army3 a3u1 a3u2 a3u3 a3u4 a3u5 a3u6 a3u7 a3u8 a3u9 a3u10 a3u11 a3u12 a3u13 a3u14 a3u15 a3u16 a3u17 a3u18 a3u19 a3u20\n\tend_if\nend_if\nif I_BattlePlayerArmyIsAttacker\n\n\t;;;Army 4\n\tlabel_unit 1 1 0 a4u1\n\tdefine_unit_group army4a a4u1\n\tif ! I_PercentageUnitGroupKilled army4a = 100\n\tundefine_unit_group army4a\n\t;;;Army 4\n\tlabel_unit 1 1 0 a4u1\n\tlabel_unit 1 1 1 a4u2\n\tlabel_unit 1 1 2 a4u3\n\tlabel_unit 1 1 3 a4u4\n\tlabel_unit 1 1 4 a4u5\n\tlabel_unit 1 1 5 a4u6\n\tlabel_unit 1 1 6 a4u7\n\tlabel_unit 1 1 7 a4u8\n\tlabel_unit 1 1 8 a4u9\n\tlabel_unit 1 1 9 a4u10\n\tlabel_unit 1 1 10 a4u11\n\tlabel_unit 1 1 11 a4u12\n\tlabel_unit 1 1 12 a4u13\n\tlabel_unit 1 1 13 a4u14\n\tlabel_unit 1 1 14 a4u15\n\tlabel_unit 1 1 15 a4u16\n\tlabel_unit 1 1 16 a4u17\n\tlabel_unit 1 1 17 a4u18\n\tlabel_unit 1 1 18 a4u19\n\tlabel_unit 1 1 19 a4u20\n\n\tdefine_unit_group army4 a4u1 a4u2 a4u3 a4u4 a4u5 a4u6 a4u7 a4u8 a4u9 a4u10 a4u11 a4u12 a4u13 a4u14 a4u15 a4u16 a4u17 a4u18 a4u19 a4u20\n\tend_if\nend_if\n\n\tif ! I_PercentageUnitGroupKilled army3 = 100\n\tset_counter army3_reinf_allied 1\n\tend_if\n\n\tif ! I_PercentageUnitGroupKilled army4 = 100\n\tset_counter army4_reinf_allied 1\n\tend_if\n\n\tif I_PercentageUnitGroupKilled army3 = 100\n\tand I_PercentageUnitGroupKilled army4 = 100\n\tset_counter kill_labelling_reinf_allied 1\n\tend_if\n\nif ! I_BattleIsSallyOutBattle\n\nif I_CompareCounter kill_labelling_reinf_allied = 0\n\nif ! I_BattlePlayerArmyIsAttacker\n\t;;;Army 5\n\tlabel_unit 0 2 0 a5u1\n\tdefine_unit_group army5a a5u1\n\tif ! I_PercentageUnitGroupKilled army5a = 100\n\tundefine_unit_group army5a\n\t;;;Army 5\n\tlabel_unit 0 2 0 a5u1\n\tlabel_unit 0 2 1 a5u2\n\tlabel_unit 0 2 2 a5u3\n\tlabel_unit 0 2 3 a5u4\n\tlabel_unit 0 2 4 a5u5\n\tlabel_unit 0 2 5 a5u6\n\tlabel_unit 0 2 6 a5u7\n\tlabel_unit 0 2 7 a5u8\n\tlabel_unit 0 2 8 a5u9\n\tlabel_unit 0 2 9 a5u10\n\tlabel_unit 0 2 10 a5u11\n\tlabel_unit 0 2 11 a5u12\n\tlabel_unit 0 2 12 a5u13\n\tlabel_unit 0 2 13 a5u14\n\tlabel_unit 0 2 14 a5u15\n\tlabel_unit 0 2 15 a5u16\n\tlabel_unit 0 2 16 a5u17\n\tlabel_unit 0 2 17 a5u18\n\tlabel_unit 0 2 18 a5u19\n\tlabel_unit 0 2 19 a5u20\n\n\tdefine_unit_group army5 a5u1 a5u2 a5u3 a5u4 a5u5 a5u6 a5u7 a5u8 a5u9 a5u10 a5u11 a5u12 a5u13 a5u14 a5u15 a5u16 a5u17 a5u18 a5u19 a5u20\n\tend_if\nend_if\nif I_BattlePlayerArmyIsAttacker\n\t;;;Army 6\n\tlabel_unit 1 2 0 a6u1\n\tdefine_unit_group army6a a6u1\n\tif ! I_PercentageUnitGroupKilled army6a = 100\n\tundefine_unit_group army6a\t\n\t;;;Army 6\n\tlabel_unit 1 2 0 a6u1\n\tlabel_unit 1 2 1 a6u2\n\tlabel_unit 1 2 2 a6u3\n\tlabel_unit 1 2 3 a6u4\n\tlabel_unit 1 2 4 a6u5\n\tlabel_unit 1 2 5 a6u6\n\tlabel_unit 1 2 6 a6u7\n\tlabel_unit 1 2 7 a6u8\n\tlabel_unit 1 2 8 a6u9\n\tlabel_unit 1 2 9 a6u10\n\tlabel_unit 1 2 10 a6u11\n\tlabel_unit 1 2 11 a6u12\n\tlabel_unit 1 2 12 a6u13\n\tlabel_unit 1 2 13 a6u14\n\tlabel_unit 1 2 14 a6u15\n\tlabel_unit 1 2 15 a6u16\n\tlabel_unit 1 2 16 a6u17\n\tlabel_unit 1 2 17 a6u18\n\tlabel_unit 1 2 18 a6u19\n\tlabel_unit 1 2 19 a6u20\n\n\tdefine_unit_group army6 a6u1 a6u2 a6u3 a6u4 a6u5 a6u6 a6u7 a6u8 a6u9 a6u10 a6u11 a6u12 a6u13 a6u14 a6u15 a6u16 a6u17 a6u18 a6u19 a6u20\n\tend_if\nend_if\n\n\tif ! I_PercentageUnitGroupKilled army5 = 100\n\tset_counter army5_reinf_allied 1\n\tend_if\n\n\tif ! I_PercentageUnitGroupKilled army6 = 100\n\tset_counter army6_reinf_allied 1\n\tend_if\n\tif I_PercentageUnitGroupKilled army5 = 100\n\tand I_PercentageUnitGroupKilled army6 = 100\n\tset_counter kill_labelling_reinf_allied 1\n\tend_if\n\nend_if\n\nif I_CompareCounter kill_labelling_reinf_allied = 0\n\nif ! I_BattlePlayerArmyIsAttacker\n\t;;;Army 7\n\tlabel_unit 0 3 0 a7u1\n\tdefine_unit_group army7a a7u1\n\tif ! I_PercentageUnitGroupKilled army7a = 100\n\tundefine_unit_group army7a\t\n\t;;;Army 7\n\tlabel_unit 0 3 0 a7u1\n\tlabel_unit 0 3 1 a7u2\n\tlabel_unit 0 3 2 a7u3\n\tlabel_unit 0 3 3 a7u4\n\tlabel_unit 0 3 4 a7u5\n\tlabel_unit 0 3 5 a7u6\n\tlabel_unit 0 3 6 a7u7\n\tlabel_unit 0 3 7 a7u8\n\tlabel_unit 0 3 8 a7u9\n\tlabel_unit 0 3 9 a7u10\n\tlabel_unit 0 3 10 a7u11\n\tlabel_unit 0 3 11 a7u12\n\tlabel_unit 0 3 12 a7u13\n\tlabel_unit 0 3 13 a7u14\n\tlabel_unit 0 3 14 a7u15\n\tlabel_unit 0 3 15 a7u16\n\tlabel_unit 0 3 16 a7u17\n\tlabel_unit 0 3 17 a7u18\n\tlabel_unit 0 3 18 a7u19\n\tlabel_unit 0 3 19 a7u20\n\n\tdefine_unit_group army7 a7u1 a7u2 a7u3 a7u4 a7u5 a7u6 a7u7 a7u8 a7u9 a7u10 a7u11 a7u12 a7u13 a7u14 a7u15 a7u16 a7u17 a7u18 a7u19 a7u20\n\tend_if\nend_if\nif I_BattlePlayerArmyIsAttacker\t\n\t;;;Army 8\n\tlabel_unit 1 3 0 a8u1\n\tdefine_unit_group army8a a8u1\n\tif ! I_PercentageUnitGroupKilled army8a = 100\n\tundefine_unit_group army8a\t\n\t;;;Army 8\n\tlabel_unit 1 3 0 a8u1\n\tlabel_unit 1 3 1 a8u2\n\tlabel_unit 1 3 2 a8u3\n\tlabel_unit 1 3 3 a8u4\n\tlabel_unit 1 3 4 a8u5\n\tlabel_unit 1 3 5 a8u6\n\tlabel_unit 1 3 6 a8u7\n\tlabel_unit 1 3 7 a8u8\n\tlabel_unit 1 3 8 a8u9\n\tlabel_unit 1 3 9 a8u10\n" +
                    "\tlabel_unit 1 3 10 a8u11\n\tlabel_unit 1 3 11 a8u12\n\tlabel_unit 1 3 12 a8u13\n\tlabel_unit 1 3 13 a8u14\n\tlabel_unit 1 3 14 a8u15\n\tlabel_unit 1 3 15 a8u16\n\tlabel_unit 1 3 16 a8u17\n\tlabel_unit 1 3 17 a8u18\n\tlabel_unit 1 3 18 a8u19\n\tlabel_unit 1 3 19 a8u20\n\n\tdefine_unit_group army8 a8u1 a8u2 a8u3 a8u4 a8u5 a8u6 a8u7 a8u8 a8u9 a8u10 a8u11 a8u12 a8u13 a8u14 a8u15 a8u16 a8u17 a8u18 a8u19 a8u20\n\tend_if\nend_if\n\n\tif ! I_PercentageUnitGroupKilled army7 = 100\n\tset_counter army7_reinf_allied 1\n\tend_if\n\n\tif ! I_PercentageUnitGroupKilled army8 = 100\n\tset_counter army8_reinf_allied 1\n\tend_if\n\tif I_PercentageUnitGroupKilled army7 = 100\n\tand I_PercentageUnitGroupKilled army8 = 100\n\tset_counter kill_labelling_reinf_allied 1\n\tend_if\n\nend_if\n\nif I_CompareCounter kill_labelling_reinf_allied = 0\n\nif ! I_BattlePlayerArmyIsAttacker\n\t;;;Army 9\n\tlabel_unit 0 4 0 a9u1\n\tdefine_unit_group army9a a9u1\n\tif ! I_PercentageUnitGroupKilled army9a = 100\n\tundefine_unit_group army9a\t\n\t;;;Army 9\n\tlabel_unit 0 4 0 a9u1\n\tlabel_unit 0 4 1 a9u2\n\tlabel_unit 0 4 2 a9u3\n\tlabel_unit 0 4 3 a9u4\n\tlabel_unit 0 4 4 a9u5\n\tlabel_unit 0 4 5 a9u6\n\tlabel_unit 0 4 6 a9u7\n\tlabel_unit 0 4 7 a9u8\n\tlabel_unit 0 4 8 a9u9\n\tlabel_unit 0 4 9 a9u10\n\tlabel_unit 0 4 10 a9u11\n\tlabel_unit 0 4 11 a9u12\n\tlabel_unit 0 4 12 a9u13\n\tlabel_unit 0 4 13 a9u14\n\tlabel_unit 0 4 14 a9u15\n\tlabel_unit 0 4 15 a9u16\n\tlabel_unit 0 4 16 a9u17\n\tlabel_unit 0 4 17 a9u18\n\tlabel_unit 0 4 18 a9u19\n\tlabel_unit 0 4 19 a9u20\n\n\tdefine_unit_group army9 a9u1 a9u2 a9u3 a9u4 a9u5 a9u6 a9u7 a9u8 a9u9 a9u10 a9u11 a9u12 a9u13 a9u14 a9u15 a9u16 a9u17 a9u18 a9u19 a9u20\n\tend_if\nend_if\nif I_BattlePlayerArmyIsAttacker\t\n\t;;;Army 10\n\tlabel_unit 1 4 0 a10u1\n\tdefine_unit_group army10a a10u1\n\tif ! I_PercentageUnitGroupKilled army10a = 100\n\tundefine_unit_group army10a\t\n\t;;;Army 10\n\tlabel_unit 1 4 0 a10u1\n\tlabel_unit 1 4 1 a10u2\n\tlabel_unit 1 4 2 a10u3\n\tlabel_unit 1 4 3 a10u4\n\tlabel_unit 1 4 4 a10u5\n\tlabel_unit 1 4 5 a10u6\n\tlabel_unit 1 4 6 a10u7\n\tlabel_unit 1 4 7 a10u8\n\tlabel_unit 1 4 8 a10u9\n\tlabel_unit 1 4 9 a10u10\n\tlabel_unit 1 4 10 a10u11\n\tlabel_unit 1 4 11 a10u12\n\tlabel_unit 1 4 12 a10u13\n\tlabel_unit 1 4 13 a10u14\n\tlabel_unit 1 4 14 a10u15\n\tlabel_unit 1 4 15 a10u16\n\tlabel_unit 1 4 16 a10u17\n\tlabel_unit 1 4 17 a10u18\n\tlabel_unit 1 4 18 a10u19\n\tlabel_unit 1 4 19 a10u20\n\n\tdefine_unit_group army10 a10u1 a10u2 a10u3 a10u4 a10u5 a10u6 a10u7 a10u8 a10u9 a10u10 a10u11 a10u12 a10u13 a10u14 a10u15 a10u16 a10u17 a10u18 a10u19 a10u20\n\tend_if\nend_if\n\n\tif ! I_PercentageUnitGroupKilled army9 = 100\n\tset_counter army9_reinf_allied 1\n\tend_if\n\n\tif ! I_PercentageUnitGroupKilled army10 = 100\n\tset_counter army10_reinf_allied 1\n\tend_if\n\tif I_PercentageUnitGroupKilled army9 = 100\n\tand I_PercentageUnitGroupKilled army10 = 100\n\tset_counter kill_labelling_reinf_allied 1\n\tend_if\n\nend_if\n\nif I_CompareCounter kill_labelling_reinf_allied = 0\n\nif ! I_BattlePlayerArmyIsAttacker\n\t;;;Army 11\n\tlabel_unit 0 5 0 a11u1\n\tdefine_unit_group army11a a11u1\n\tif ! I_PercentageUnitGroupKilled army11a = 100\n\tundefine_unit_group army11a\t\n\t;;;Army 11\n\tlabel_unit 0 5 0 a11u1\n\tlabel_unit 0 5 1 a11u2\n\tlabel_unit 0 5 2 a11u3\n\tlabel_unit 0 5 3 a11u4\n\tlabel_unit 0 5 4 a11u5\n\tlabel_unit 0 5 5 a11u6\n\tlabel_unit 0 5 6 a11u7\n\tlabel_unit 0 5 7 a11u8\n\tlabel_unit 0 5 8 a11u9\n\tlabel_unit 0 5 9 a11u10\n\tlabel_unit 0 5 10 a11u11\n\tlabel_unit 0 5 11 a11u12\n\tlabel_unit 0 5 12 a11u13\n\tlabel_unit 0 5 13 a11u14\n\tlabel_unit 0 5 14 a11u15\n\tlabel_unit 0 5 15 a11u16\n\tlabel_unit 0 5 16 a11u17\n\tlabel_unit 0 5 17 a11u18\n\tlabel_unit 0 5 18 a11u19\n\tlabel_unit 0 5 19 a11u20\n\n\tdefine_unit_group army11 a11u1 a11u2 a11u3 a11u4 a11u5 a11u6 a11u7 a11u8 a11u9 a11u10 a11u11 a11u12 a11u13 a11u14 a11u15 a11u16 a11u17 a11u18 a11u19 a11u20\n\tend_if\nend_if\nif I_BattlePlayerArmyIsAttacker\t\n\t;;;Army 12\n\tlabel_unit 1 5 0 a12u1\n\tdefine_unit_group army12a a12u1\n\tif ! I_PercentageUnitGroupKilled army12a = 100\n\tundefine_unit_group army12a\t\n\t;;;Army 12\n\tlabel_unit 1 5 0 a12u1\n\tlabel_unit 1 5 1 a12u2\n\tlabel_unit 1 5 2 a12u3\n\tlabel_unit 1 5 3 a12u4\n\tlabel_unit 1 5 4 a12u5\n\tlabel_unit 1 5 5 a12u6\n\tlabel_unit 1 5 6 a12u7\n\tlabel_unit 1 5 7 a12u8\n\tlabel_unit 1 5 8 a12u9\n\tlabel_unit 1 5 9 a12u10\n\tlabel_unit 1 5 10 a12u11\n\tlabel_unit 1 5 11 a12u12\n\tlabel_unit 1 5 12 a12u13\n\tlabel_unit 1 5 13 a12u14\n\tlabel_unit 1 5 14 a12u15\n\tlabel_unit 1 5 15 a12u16\n\tlabel_unit 1 5 16 a12u17\n\tlabel_unit 1 5 17 a12u18\n\tlabel_unit 1 5 18 a12u19\n\tlabel_unit 1 5 19 a12u20\n\n\tdefine_unit_group army12 a12u1 a12u2 a12u3 a12u4 a12u5 a12u6 a12u7 a12u8 a12u9 a12u10 a12u11 a12u12 a12u13 a12u14 a12u15 a12u16 a12u17 a12u18 a12u19 a12u20\n\tend_if\nend_if\n\n\tif ! I_PercentageUnitGroupKilled army11 = 100\n\tset_counter army11_reinf_allied 1\n\tend_if\n\n\tif ! I_PercentageUnitGroupKilled army12 = 100\n\tset_counter army12_reinf_allied 1\n\tend_if\n\tif I_PercentageUnitGroupKilled army11 = 100\n\tand I_PercentageUnitGroupKilled army12 = 100\n\tset_counter kill_labelling_reinf_allied 1\n\tend_if\n\nend_if\n\nif I_CompareCounter kill_labelling_reinf_allied = 0\n\nif ! I_BattlePlayerArmyIsAttacker\n\t;;;Army 13\n\tlabel_unit 0 6 0 a13u1\n\tdefine_unit_group army13a a13u1\n\tif ! I_PercentageUnitGroupKilled army13a = 100\n\tundefine_unit_group army13a\t\n\t;;;Army 13\n\tlabel_unit 0 6 0 a13u1\n\tlabel_unit 0 6 1 a13u2\n\tlabel_unit 0 6 2 a13u3\n\tlabel_unit 0 6 3 a13u4\n\tlabel_unit 0 6 4 a13u5\n\tlabel_unit 0 6 5 a13u6\n\tlabel_unit 0 6 6 a13u7\n\tlabel_unit 0 6 7 a13u8\n\tlabel_unit 0 6 8 a13u9\n\tlabel_unit 0 6 9 a13u10\n\tlabel_unit 0 6 10 a13u11\n\tlabel_unit 0 6 11 a13u12\n\tlabel_unit 0 6 12 a13u13\n\tlabel_unit 0 6 13 a13u14\n\tlabel_unit 0 6 14 a13u15\n\tlabel_unit 0 6 15 a13u16\n\tlabel_unit 0 6 16 a13u17\n\tlabel_unit 0 6 17 a13u18\n\tlabel_unit 0 6 18 a13u19\n\tlabel_unit 0 6 19 a13u20\n\n\tdefine_unit_group army13 a13u1 a13u2 a13u3 a13u4 a13u5 a13u6 a13u7 a13u8 a13u9 a13u10 a13u11 a13u12 a13u13 a13u14 a13u15 a13u16 a13u17 a13u18 a13u19 a13u20\n\tend_if\nend_if\n\nif I_BattlePlayerArmyIsAttacker\t\n\t;;;Army 14\n\tlabel_unit 1 6 0 a14u1\n\tdefine_unit_group army14a a14u1\n\tif ! I_PercentageUnitGroupKilled army14a = 100\n\tundefine_unit_group army14a\t\n\t;;;Army 14\n\tlabel_unit 1 6 0 a14u1\n\tlabel_unit 1 6 1 a14u2\n\tlabel_unit 1 6 2 a14u3\n\tlabel_unit 1 6 3 a14u4\n" +
                    "\tlabel_unit 1 6 4 a14u5\n\tlabel_unit 1 6 5 a14u6\n\tlabel_unit 1 6 6 a14u7\n\tlabel_unit 1 6 7 a14u8\n\tlabel_unit 1 6 8 a14u9\n\tlabel_unit 1 6 9 a14u10\n\tlabel_unit 1 6 10 a14u11\n\tlabel_unit 1 6 11 a14u12\n\tlabel_unit 1 6 12 a14u13\n\tlabel_unit 1 6 13 a14u14\n\tlabel_unit 1 6 14 a14u15\n\tlabel_unit 1 6 15 a14u16\n\tlabel_unit 1 6 16 a14u17\n\tlabel_unit 1 6 17 a14u18\n\tlabel_unit 1 6 18 a14u19\n\tlabel_unit 1 6 19 a14u20\n\n\tdefine_unit_group army14 a14u1 a14u2 a14u3 a14u4 a14u5 a14u6 a14u7 a14u8 a14u9 a14u10 a14u11 a14u12 a14u13 a14u14 a14u15 a14u16 a14u17 a14u18 a14u19 a14u20\n\tend_if\nend_if\n\n\tif ! I_PercentageUnitGroupKilled army13 = 100\n\tset_counter army13_reinf_allied 1\n\tend_if\n\n\tif ! I_PercentageUnitGroupKilled army14 = 100\n\tset_counter army14_reinf_allied 1\n\tend_if\n\tif I_PercentageUnitGroupKilled army13 = 100\n\tand I_PercentageUnitGroupKilled army14 = 100\n\tset_counter kill_labelling_reinf_allied 1\n\tend_if\n\nend_if\n\nif I_CompareCounter kill_labelling_reinf_allied = 0\n\nif ! I_BattlePlayerArmyIsAttacker\n\t;;;Army 15\n\tlabel_unit 0 7 0 a15u1\n\tdefine_unit_group army15a a15u1\n\tif ! I_PercentageUnitGroupKilled army15a = 100\n\tundefine_unit_group army15a\t\n\t;;;Army 15\n\tlabel_unit 0 7 0 a15u1\n\tlabel_unit 0 7 1 a15u2\n\tlabel_unit 0 7 2 a15u3\n\tlabel_unit 0 7 3 a15u4\n\tlabel_unit 0 7 4 a15u5\n\tlabel_unit 0 7 5 a15u6\n\tlabel_unit 0 7 6 a15u7\n\tlabel_unit 0 7 7 a15u8\n\tlabel_unit 0 7 8 a15u9\n\tlabel_unit 0 7 9 a15u10\n\tlabel_unit 0 7 10 a15u11\n\tlabel_unit 0 7 11 a15u12\n\tlabel_unit 0 7 12 a15u13\n\tlabel_unit 0 7 13 a15u14\n\tlabel_unit 0 7 14 a15u15\n\tlabel_unit 0 7 15 a15u16\n\tlabel_unit 0 7 16 a15u17\n\tlabel_unit 0 7 17 a15u18\n\tlabel_unit 0 7 18 a15u19\n\tlabel_unit 0 7 19 a15u20\n\n\tdefine_unit_group army15 a15u1 a15u2 a15u3 a15u4 a15u5 a15u6 a15u7 a15u8 a15u9 a15u10 a15u11 a15u12 a15u13 a15u14 a15u15 a15u16 a15u17 a15u18 a15u19 a15u20\n\tend_if\nend_if\n\nif I_BattlePlayerArmyIsAttacker\t\n\t;;;Army 16\n\tlabel_unit 1 7 0 a16u1\n\tdefine_unit_group army16a a16u1\n\tif ! I_PercentageUnitGroupKilled army16a = 100\n\tundefine_unit_group army16a\t\n\t;;;Army 16\n\tlabel_unit 1 7 0 a16u1\n\tlabel_unit 1 7 1 a16u2\n\tlabel_unit 1 7 2 a16u3\n\tlabel_unit 1 7 3 a16u4\n\tlabel_unit 1 7 4 a16u5\n\tlabel_unit 1 7 5 a16u6\n\tlabel_unit 1 7 6 a16u7\n\tlabel_unit 1 7 7 a16u8\n\tlabel_unit 1 7 8 a16u9\n\tlabel_unit 1 7 9 a16u10\n\tlabel_unit 1 7 10 a16u11\n\tlabel_unit 1 7 11 a16u12\n\tlabel_unit 1 7 12 a16u13\n\tlabel_unit 1 7 13 a16u14\n\tlabel_unit 1 7 14 a16u15\n\tlabel_unit 1 7 15 a16u16\n\tlabel_unit 1 7 16 a16u17\n\tlabel_unit 1 7 17 a16u18\n\tlabel_unit 1 7 18 a16u19\n\tlabel_unit 1 7 19 a16u20\n\n\tdefine_unit_group army16 a16u1 a16u2 a16u3 a16u4 a16u5 a16u6 a16u7 a16u8 a16u9 a16u10 a16u11 a16u12 a16u13 a16u14 a16u15 a16u16 a16u17 a16u18 a16u19 a16u20\n\tend_if\nend_if\n\n\tif ! I_PercentageUnitGroupKilled army15 = 100\n\tset_counter army15_reinf_allied 1\n\tend_if\n\n\tif ! I_PercentageUnitGroupKilled army16 = 100\n\tset_counter army16_reinf_allied 1\n\tend_if\nend_if\n\nend_if\nbattle_wait 0.5\nai_active_set on\n\n;;;;;;;Reinforcements\n\n\t;;;;;;; Attacking\n\tif ! I_BattlePlayerArmyIsAttacker\n\tand ! I_ConflictType SuccessfulAmbush\n;\tand ! I_ConflictType FailedAmbush\n\tand ! I_BattleIsSiegeBattle\n\tand I_CompareCounter army3_reinf_allied = 1\n\n\tset_counter apply_strategy 1\n;\tbattle_wait 1\n;\tset_counter att_alliance_ready 1\n\tend_if\n\n\t;;;;;;; Defending\n\tif I_BattlePlayerArmyIsAttacker\n\tand ! I_ConflictType SuccessfulAmbush\n;\tand ! I_ConflictType FailedAmbush\n\tand I_CompareCounter army4_reinf_allied = 1\n\n\tif ! I_BattleIsSiegeBattle\n\tand ! I_BattleIsSallyOutBattle\n\tset_counter army4_ready 1\n\tset_counter def_alliance_ready 1\n\tend_if\n\tif ! I_BattleIsSiegeBattle\n\tand I_BattleIsSallyOutBattle\n\tset_counter army4_ready_sally 1\n\tset_counter sally_reinf 1\n\tend_if\n\n\t;;;;;;; Siege\n\tif I_BattleIsSiegeBattle\n\tset_counter def_alliance_ready_siege 1\n\tend_if\n\tend_if\nend_if\nend_if\nend_if\nend_monitor\n\n;Apply Strategy\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter apply_strategy = 1\n\nif ! I_BattlePlayerArmyIsAttacker\n\tand I_CompareCounter open_battle = 1\n\n;\tai_gta_plan_set 0 ATTACK_ALL\n\tai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999\n\tset_counter launch_alliance_0 1\nend_if\n\nif I_BattlePlayerArmyIsAttacker\n\tand I_CompareCounter open_battle = 1\n\n;\tai_gta_plan_set 1 ATTACK_ALL\n\tai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999\n\tset_counter launch_alliance_1 1\nend_if\n\nif I_CompareCounter launch_alliance_0 = 1\n\tand I_CompareCounter army3_reinf_allied = 1\n\n\t;;;Army 1\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a1u1\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a1u2\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a1u3\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a1u4\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a1u5\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a1u6\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a1u7\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a1u8\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a1u9\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a1u10\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a1u11\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a1u12\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a1u13\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a1u14\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a1u15\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a1u16\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a1u17\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a1u18\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a1u19\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a1u20\n\t;;;Army 3\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a3u1\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a3u2\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a3u3\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a3u4\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a3u5\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a3u6\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a3u7\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a3u8\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a3u9\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a3u10\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a3u11\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a3u12\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a3u13\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a3u14\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a3u15\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a3u16\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a3u17\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a3u18\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a3u19\n" +
                    "\tai_gta_add_unit_label 0 G5_OBJECTIVE a3u20\nif I_CompareCounter army5_reinf_allied = 1\n\t;;;Army 5\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a5u1\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a5u2\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a5u3\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a5u4\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a5u5\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a5u6\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a5u7\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a5u8\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a5u9\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a5u10\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a5u11\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a5u12\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a5u13\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a5u14\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a5u15\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a5u16\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a5u17\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a5u18\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a5u19\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a5u20\nif I_CompareCounter army7_reinf_allied = 1\n\t;;;Army 7\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a7u1\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a7u2\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a7u3\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a7u4\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a7u5\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a7u6\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a7u7\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a7u8\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a7u9\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a7u10\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a7u11\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a7u12\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a7u13\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a7u14\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a7u15\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a7u16\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a7u17\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a7u18\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a7u19\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a7u20\nif I_CompareCounter army9_reinf_allied = 1\n\t ;;;Army 9\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a9u1\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a9u2\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a9u3\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a9u4\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a9u5\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a9u6\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a9u7\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a9u8\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a9u9\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a9u10\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a9u11\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a9u12\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a9u13\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a9u14\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a9u15\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a9u16\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a9u17\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a9u18\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a9u19\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a9u20\nif I_CompareCounter army11_reinf_allied = 1\n\t;;;Army 11\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a11u1\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a11u2\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a11u3\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a11u4\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a11u5\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a11u6\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a11u7\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a11u8\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a11u9\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a11u10\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a11u11\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a11u12\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a11u13\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a11u14\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a11u15\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a11u16\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a11u17\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a11u18\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a11u19\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a11u20\nif I_CompareCounter army13_reinf_allied = 1\n\t;;;Army 13\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a13u1\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a13u2\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a13u3\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a13u4\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a13u5\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a13u6\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a13u7\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a13u8\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a13u9\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a13u10\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a13u11\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a13u12\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a13u13\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a13u14\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a13u15\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a13u16\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a13u17\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a13u18\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a13u19\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a13u20\nif I_CompareCounter army15_reinf_allied = 1\n\t;;;Army 15\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a15u1\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a15u2\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a15u3\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a15u4\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a15u5\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a15u6\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a15u7\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a15u8\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a15u9\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a15u10\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a15u11\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a15u12\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a15u13\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a15u14\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a15u15\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a15u16\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a15u17\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a15u18\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a15u19\n\tai_gta_add_unit_label 0 G5_OBJECTIVE a15u20\nend_if\nend_if\nend_if\nend_if\nend_if\nend_if\nend_if\n\nif I_CompareCounter launch_alliance_1 = 1\n\tand I_CompareCounter army4_reinf_allied = 1\n\n\t;;;Army 2\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a2u1\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a2u2\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a2u3\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a2u4\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a2u5\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a2u6\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a2u7\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a2u8\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a2u9\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a2u10\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a2u11\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a2u12\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a2u13\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a2u14\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a2u15\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a2u16\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a2u17\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a2u18\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a2u19\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a2u20\n\t;;;Army 4\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u1\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u2\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u3\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u4\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u5\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u6\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u7\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u8\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u9\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u10\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u11\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u12\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u13\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u14\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u15\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u16\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u17\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u18\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u19\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u20\nif I_CompareCounter army6_reinf_allied = 1\n\t;;;Army 6\n" +
                    "\tai_gta_add_unit_label 1 G5_OBJECTIVE a6u1\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a6u2\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a6u3\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a6u4\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a6u5\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a6u6\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a6u7\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a6u8\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a6u9\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a6u10\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a6u11\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a6u12\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a6u13\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a6u14\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a6u15\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a6u16\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a6u17\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a6u18\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a6u19\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a6u20\nif I_CompareCounter army8_reinf_allied = 1\n\t;;;Army 8\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a8u1\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a8u2\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a8u3\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a8u4\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a8u5\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a8u6\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a8u7\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a8u8\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a8u9\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a8u10\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a8u11\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a8u12\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a8u13\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a8u14\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a8u15\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a8u16\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a8u17\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a8u18\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a8u19\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a8u20\nif I_CompareCounter army10_reinf_allied = 1\n\t ;;;Army 10\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a10u1\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a10u2\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a10u3\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a10u4\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a10u5\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a10u6\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a10u7\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a10u8\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a10u9\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a10u10\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a10u11\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a10u12\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a10u13\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a10u14\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a10u15\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a10u16\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a10u17\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a10u18\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a10u19\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a10u20\nif I_CompareCounter army12_reinf_allied = 1\n\t;;;Army 12\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a12u1\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a12u2\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a12u3\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a12u4\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a12u5\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a12u6\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a12u7\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a12u8\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a12u9\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a12u10\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a12u11\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a12u12\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a12u13\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a12u14\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a12u15\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a12u16\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a12u17\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a12u18\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a12u19\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a12u20\nif I_CompareCounter army14_reinf_allied = 1\n\t;;;Army 14\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a14u1\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a14u2\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a14u3\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a14u4\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a14u5\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a14u6\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a14u7\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a14u8\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a14u9\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a14u10\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a14u11\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a14u12\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a14u13\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a14u14\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a14u15\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a14u16\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a14u17\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a14u18\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a14u19\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a14u20\nif I_CompareCounter army16_reinf_allied = 1\n\t;;;Army 16\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a16u1\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a16u2\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a16u3\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a16u4\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a16u5\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a16u6\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a16u7\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a16u8\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a16u9\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a16u10\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a16u11\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a16u12\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a16u13\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a16u14\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a16u15\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a16u16\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a16u17\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a16u18\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a16u19\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a16u20\nend_if\nend_if\nend_if\nend_if\nend_if\nend_if\nend_if\nbattle_wait 0.5\nai_active_set on\nset_counter apply_strategy 0\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter relaunch_movement = 1\n\n\tai_active_set on\n\tbattle_wait 0.5\n\tset_counter army3_moving 0\n\tset_counter army4_moving 0\n\tset_counter army5_moving 0\n\tset_counter army6_moving 0\n\tset_counter army7_moving 0\n\tset_counter army8_moving 0\n\tset_counter army9_moving 0\n\tset_counter army10_moving 0\n\tset_counter army11_moving 0\n\tset_counter army12_moving 0\n\tset_counter army13_moving 0\n\tset_counter army14_moving 0\n\tset_counter army15_moving 0\n\tset_counter army16_moving 0\n\n\tbattle_wait 5\n\tset_counter relaunch_movement 0\nend_monitor\n\n;;;;;;; Attacking\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter att_alliance_ready = 1\n" +
                    "\tand ! I_BattlePlayerArmyIsAttacker\n ;\tinc_counter reinf_check_interval 1\n if I_CompareCounter army3_reinf_allied = 1\n\n\tif I_CompareCounter army3_reinf_allied = 1\n\tand I_CompareCounter army3_moving = 1\n\tand I_UnitEnemyUnitInRadius a3u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army1 army3\n\n\tunit_group_order_halt army3\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tset_counter army3_moving 0\n\tend_if\n\n\tif I_CompareCounter army3_reinf_allied = 1\n\tand I_CompareCounter army3_moving = 1\n\tand ! I_UnitEnemyUnitInRadius a3u1 160\n\tand I_UnitDistanceFromUnit a1u1 a3u1 > 150\n\tand I_IsUnitIdle a3u1\n\n\tset_counter army3_reinf_late 1\n\tbattle_wait 1\n\tset_counter army3_moving 1\n\tend_if\n\n\tif I_CompareCounter army3_reinf_allied = 1\n\tand I_CompareCounter army3_moving = 0\n\tand ! I_UnitEnemyUnitInRadius a3u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army1 army3\n\n\tset_counter army3_run 1\n\tset_counter army3_moving 1\n\tend_if\n\n\tif I_CompareCounter army3_reinf_allied = 1\n\tand I_CompareCounter distance_trigger1 = 0\n\tand I_UnitDistanceFromUnit a3u1 a1u1 < 1000\n\n\tset_counter army3_reinf_late 1\n\tset_counter distance_trigger1 1\n\tend_if\n\n\tif I_CompareCounter army3_reinf_allied = 1\n\tand I_CompareCounter distance_trigger2 = 0\n\tand I_UnitDistanceFromUnit a3u1 a1u1 < 750\n\n\tset_counter army3_reinf_late 1\n\tset_counter distance_trigger2 1\n\tend_if\n\n\tif I_CompareCounter army3_reinf_allied = 1\n\tand I_CompareCounter distance_trigger3 = 0\n\tand I_UnitDistanceFromUnit a3u1 a1u1 < 500\n\n\tset_counter army3_reinf_late 1\n\tset_counter distance_trigger3 1\n\tend_if\n\n\tif I_CompareCounter army3_reinf_allied = 1\n\tand I_CompareCounter distance_trigger4 = 0\n\tand I_UnitDistanceFromUnit a3u1 a1u1 < 300\n\n\tset_counter army3_reinf_late 1\n\tset_counter distance_trigger4 1\n\tend_if\n\n\tif I_CompareCounter army3_reinf_allied = 1\n\tand I_CompareCounter distance_trigger5 = 0\n\tand I_UnitDistanceFromUnit a3u1 a1u1 < 200\n\n\tset_counter army3_reinf_late 1\n\tset_counter distance_trigger5 1\n\tend_if\n\n\tif I_CompareCounter army3_reinf_allied = 1\n\tand I_CompareCounter army3_reinf_late = 1\n\tand ! I_UnitEnemyUnitInRadius a3u1 160\n;\tand ! I_UnitGroupInRangeOfUnitGroup army1 army3\n\n\tset_counter army3_run 1\n\tbattle_wait 0.5\n\tset_counter army3_moving 1\n\tset_counter army3_reinf_late 0\n\tend_if\n\n\tif I_CompareCounter army3_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a3u1 a1u1 < 150\n\tand I_UnitEnemyUnitInRadius a1u1 100\n\n\tset_counter army3_reinf_allied 0\n\tunit_group_order_halt army3\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army3_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a3u1 a1u1 < 100\n\n\tset_counter army3_reinf_allied 0\n\tunit_group_order_halt army3\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army3_reinf_allied = 1\n\tand I_PercentageUnitKilled a3u1 > 60\n\n\tset_counter army3_reinf_allied 0\n\tunit_group_order_halt army3\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army3_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a3u1 a2u1 < 200\n\tand I_UnitDistanceFromUnit a1u1 a2u1 < 200\n\n\tset_counter army3_reinf_allied 0\n\tunit_group_order_halt army3\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army3_reinf_allied = 1\n\tand I_PercentageUnitGroupKilled army3 > 50\n\n\tset_counter army3_reinf_allied 0\n\tunit_group_order_halt army3\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army3_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a3u1 a1u1 < 250\n\tand I_UnitGroupInRangeOfUnit army3 a1u1\n\n\tset_counter army3_reinf_allied 0\n\tunit_group_order_halt army3\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army3_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a1u1 a3u1 < 250\n\tand I_IsUnitIdle a3u1\n\n\tset_counter army3_reinf_allied 0\n\tunit_group_order_halt army3\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army3_reinf_allied = 1\n\tand I_IsUnitRouting a1u1\n\n\tset_counter army3_reinf_allied 0\n\tunit_group_order_halt army3\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army3_reinf_allied = 1\n\tand I_PercentageUnitKilled a1u1 > 80\n\n\tset_counter army3_reinf_allied 0\n\tunit_group_order_halt army3\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army3_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a1u1 a3u1 < 250\n\tand I_IsUnitUnderFire a3u1\n\n\tset_counter army3_reinf_allied 0\n\tunit_group_order_halt army3\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army3_reinf_allied = 1\n\tand I_CompareCounter army3_run = 1\n\n;\tunit_group_order_halt army3\n\tbattle_wait 0.5\n\tunit_group_move_to_missile_range_of_unit army3 a1u1 run\n\tbattle_wait 0.5\n\tset_counter army3_run 0\n\tend_if\n\nend_if\n\nif I_CompareCounter army5_reinf_allied = 1\n\n\tif I_CompareCounter army5_reinf_allied = 1\n\tand I_CompareCounter army5_moving = 1\n\tand I_UnitEnemyUnitInRadius a5u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army1 army5\n\n\tunit_group_order_halt army5\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tset_counter army5_moving 0\n\tend_if\n\n\tif I_CompareCounter army5_reinf_allied = 1\n\tand I_CompareCounter army5_moving = 1\n\tand ! I_UnitEnemyUnitInRadius a5u1 160\n\tand I_UnitDistanceFromUnit a1u1 a5u1 > 150\n\tand I_IsUnitIdle a5u1\n\n\tset_counter army5_reinf_late 1\n\tbattle_wait 1\n\tset_counter army5_moving 1\n\tend_if\n\n\tif I_CompareCounter army5_reinf_allied = 1\n\tand I_CompareCounter army5_moving = 0\n\tand ! I_UnitEnemyUnitInRadius a5u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army1 army5\n\n\tset_counter army5_run 1\n\tset_counter army5_moving 1\n\tend_if\n\n\tif I_CompareCounter army5_reinf_allied = 1\n\tand I_CompareCounter distance_trigger1 = 0\n\tand I_UnitDistanceFromUnit a5u1 a1u1 < 1000\n\n\tset_counter army5_reinf_late 1\n\tset_counter distance_trigger1 1\n\tend_if\n\n\tif I_CompareCounter army5_reinf_allied = 1\n\tand I_CompareCounter distance_trigger2 = 0\n\tand I_UnitDistanceFromUnit a5u1 a1u1 < 750\n\n\tset_counter army5_reinf_late 1\n\tset_counter distance_trigger2 1\n\tend_if\n\n\tif I_CompareCounter army5_reinf_allied = 1\n\tand I_CompareCounter distance_trigger3 = 0\n\tand I_UnitDistanceFromUnit a5u1 a1u1 < 500\n\n\tset_counter army5_reinf_late 1\n\tset_counter distance_trigger3 1\n\tend_if\n\n\tif I_CompareCounter army5_reinf_allied = 1\n\tand I_CompareCounter distance_trigger4 = 0\n\tand I_UnitDistanceFromUnit a5u1 a1u1 < 300\n\n\tset_counter army5_reinf_late 1\n\tset_counter distance_trigger4 1\n\tend_if\n\n\tif I_CompareCounter army5_reinf_allied = 1\n\tand I_CompareCounter distance_trigger5 = 0\n\tand I_UnitDistanceFromUnit a5u1 a1u1 < 200\n\n\tset_counter army5_reinf_late 1\n\tset_counter distance_trigger5 1\n\tend_if\n\n\tif I_CompareCounter army5_reinf_allied = 1\n\tand I_CompareCounter army5_reinf_late = 1\n\tand ! I_UnitEnemyUnitInRadius a5u1 160\n;\tand ! I_UnitGroupInRangeOfUnitGroup army1 army5\n\n\tset_counter army5_run 1\n\tbattle_wait 0.5\n\tset_counter army5_moving 1\n\tset_counter army5_reinf_late 0\n\tend_if\n\n\tif I_CompareCounter army5_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a5u1 a1u1 < 150\n\tand I_UnitEnemyUnitInRadius a1u1 100\n\n\tset_counter army5_reinf_allied 0\n\tunit_group_order_halt army5\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army5_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a5u1 a1u1 < 100\n\n\tset_counter army5_reinf_allied 0\n" +
                    "\tunit_group_order_halt army5\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army5_reinf_allied = 1\n\tand I_PercentageUnitKilled a5u1 > 60\n\n\tset_counter army5_reinf_allied 0\n\tunit_group_order_halt army5\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army5_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a5u1 a2u1 < 200\n\tand I_UnitDistanceFromUnit a1u1 a2u1 < 200\n\n\tset_counter army5_reinf_allied 0\n\tunit_group_order_halt army5\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army5_reinf_allied = 1\n\tand I_PercentageUnitGroupKilled army5 > 50\n\n\tset_counter army5_reinf_allied 0\n\tunit_group_order_halt army5\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army5_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a5u1 a1u1 < 250\n\tand I_UnitGroupInRangeOfUnit army5 a1u1\n\n\tset_counter army5_reinf_allied 0\n\tunit_group_order_halt army5\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army5_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a1u1 a5u1 < 250\n\tand I_IsUnitIdle a5u1\n\n\tset_counter army5_reinf_allied 0\n\tunit_group_order_halt army5\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army5_reinf_allied = 1\n\tand I_IsUnitRouting a1u1\n\n\tset_counter army5_reinf_allied 0\n\tunit_group_order_halt army5\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army5_reinf_allied = 1\n\tand I_PercentageUnitKilled a1u1 > 80\n\n\tset_counter army5_reinf_allied 0\n\tunit_group_order_halt army5\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army5_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a1u1 a5u1 < 250\n\tand I_IsUnitUnderFire a5u1\n\n\tset_counter army5_reinf_allied 0\n\tunit_group_order_halt army5\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army5_reinf_allied = 1\n\tand I_CompareCounter army5_run = 1\n\n;\tunit_group_order_halt army5\n\tbattle_wait 0.5\n\tunit_group_move_to_missile_range_of_unit army5 a1u1 run\n\tbattle_wait 0.5\n\tset_counter army5_run 0\n\tend_if\n\nend_if\n\nif I_CompareCounter army7_reinf_allied = 1\n\n\tif I_CompareCounter army7_reinf_allied = 1\n\tand I_CompareCounter army7_moving = 1\n\tand I_UnitEnemyUnitInRadius a7u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army1 army7\n\n\tunit_group_order_halt army7\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tset_counter army7_moving 0\n\tend_if\n\n\tif I_CompareCounter army7_reinf_allied = 1\n\tand I_CompareCounter army7_moving = 1\n\tand ! I_UnitEnemyUnitInRadius a7u1 160\n\tand I_UnitDistanceFromUnit a1u1 a7u1 > 150\n\tand I_IsUnitIdle a7u1\n\n\tset_counter army7_reinf_late 1\n\tbattle_wait 1\n\tset_counter army7_moving 1\n\tend_if\n\n\tif I_CompareCounter army7_reinf_allied = 1\n\tand I_CompareCounter army7_moving = 0\n\tand ! I_UnitEnemyUnitInRadius a7u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army1 army7\n\n\tset_counter army7_run 1\n\tset_counter army7_moving 1\n\tend_if\n\n\tif I_CompareCounter army7_reinf_allied = 1\n\tand I_CompareCounter distance_trigger1 = 0\n\tand I_UnitDistanceFromUnit a7u1 a1u1 < 1000\n\n\tset_counter army7_reinf_late 1\n\tset_counter distance_trigger1 1\n\tend_if\n\n\tif I_CompareCounter army7_reinf_allied = 1\n\tand I_CompareCounter distance_trigger2 = 0\n\tand I_UnitDistanceFromUnit a7u1 a1u1 < 750\n\n\tset_counter army7_reinf_late 1\n\tset_counter distance_trigger2 1\n\tend_if\n\n\tif I_CompareCounter army7_reinf_allied = 1\n\tand I_CompareCounter distance_trigger3 = 0\n\tand I_UnitDistanceFromUnit a7u1 a1u1 < 500\n\n\tset_counter army7_reinf_late 1\n\tset_counter distance_trigger3 1\n\tend_if\n\n\tif I_CompareCounter army7_reinf_allied = 1\n\tand I_CompareCounter distance_trigger4 = 0\n\tand I_UnitDistanceFromUnit a7u1 a1u1 < 300\n\n\tset_counter army7_reinf_late 1\n\tset_counter distance_trigger4 1\n\tend_if\n\n\tif I_CompareCounter army7_reinf_allied = 1\n\tand I_CompareCounter distance_trigger5 = 0\n\tand I_UnitDistanceFromUnit a7u1 a1u1 < 200\n\n\tset_counter army7_reinf_late 1\n\tset_counter distance_trigger5 1\n\tend_if\n\n\tif I_CompareCounter army7_reinf_allied = 1\n\tand I_CompareCounter army7_reinf_late = 1\n\tand ! I_UnitEnemyUnitInRadius a7u1 160\n;\tand ! I_UnitGroupInRangeOfUnitGroup army1 army7\n\n\tset_counter army7_run 1\n\tbattle_wait 0.5\n\tset_counter army7_moving 1\n\tset_counter army7_reinf_late 0\n\tend_if\n\n\tif I_CompareCounter army7_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a7u1 a1u1 < 150\n\tand I_UnitEnemyUnitInRadius a1u1 100\n\n\tset_counter army7_reinf_allied 0\n\tunit_group_order_halt army7\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army7_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a7u1 a1u1 < 100\n\n\tset_counter army7_reinf_allied 0\n\tunit_group_order_halt army7\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army7_reinf_allied = 1\n\tand I_PercentageUnitKilled a7u1 > 60\n\n\tset_counter army7_reinf_allied 0\n\tunit_group_order_halt army7\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army7_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a7u1 a2u1 < 200\n" +
                    "\tand I_UnitDistanceFromUnit a1u1 a2u1 < 200\n\n\tset_counter army7_reinf_allied 0\n\tunit_group_order_halt army7\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army7_reinf_allied = 1\n\tand I_PercentageUnitGroupKilled army7 > 50\n\n\tset_counter army7_reinf_allied 0\n\tunit_group_order_halt army7\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army7_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a7u1 a1u1 < 250\n\tand I_UnitGroupInRangeOfUnit army7 a1u1\n\n\tset_counter army7_reinf_allied 0\n\tunit_group_order_halt army7\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army7_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a1u1 a7u1 < 250\n\tand I_IsUnitIdle a7u1\n\n\tset_counter army7_reinf_allied 0\n\tunit_group_order_halt army7\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army7_reinf_allied = 1\n\tand I_IsUnitRouting a1u1\n\n\tset_counter army7_reinf_allied 0\n\tunit_group_order_halt army7\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army7_reinf_allied = 1\n\tand I_PercentageUnitKilled a1u1 > 80\n\n\tset_counter army7_reinf_allied 0\n\tunit_group_order_halt army7\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army7_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a1u1 a7u1 < 250\n\tand I_IsUnitUnderFire a7u1\n\n\tset_counter army7_reinf_allied 0\n\tunit_group_order_halt army7\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army7_reinf_allied = 1\n\tand I_CompareCounter army7_run = 1\n\n;\tunit_group_order_halt army7\n\tbattle_wait 0.5\n\tunit_group_move_to_missile_range_of_unit army7 a1u1 run\n\tbattle_wait 0.5\n\tset_counter army7_run 0\n\tend_if\n\nend_if\n\nif I_CompareCounter army9_reinf_allied = 1\n\n\tif I_CompareCounter army9_reinf_allied = 1\n\tand I_CompareCounter army9_moving = 1\n\tand I_UnitEnemyUnitInRadius a9u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army1 army9\n\n\tunit_group_order_halt army9\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tset_counter army9_moving 0\n\tend_if\n\n\tif I_CompareCounter army9_reinf_allied = 1\n\tand I_CompareCounter army9_moving = 1\n\tand ! I_UnitEnemyUnitInRadius a9u1 160\n\tand I_UnitDistanceFromUnit a1u1 a9u1 > 150\n\tand I_IsUnitIdle a9u1\n\n\tset_counter army9_reinf_late 1\n\tbattle_wait 1\n\tset_counter army9_moving 1\n\tend_if\n\n\tif I_CompareCounter army9_reinf_allied = 1\n\tand I_CompareCounter army9_moving = 0\n\tand ! I_UnitEnemyUnitInRadius a9u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army1 army9\n\n\tset_counter army9_run 1\n\tset_counter army9_moving 1\n\tend_if\n\n\tif I_CompareCounter army9_reinf_allied = 1\n\tand I_CompareCounter distance_trigger1 = 0\n\tand I_UnitDistanceFromUnit a9u1 a1u1 < 1000\n\n\tset_counter army9_reinf_late 1\n\tset_counter distance_trigger1 1\n\tend_if\n\n\tif I_CompareCounter army9_reinf_allied = 1\n\tand I_CompareCounter distance_trigger2 = 0\n\tand I_UnitDistanceFromUnit a9u1 a1u1 < 750\n\n\tset_counter army9_reinf_late 1\n\tset_counter distance_trigger2 1\n\tend_if\n\n\tif I_CompareCounter army9_reinf_allied = 1\n\tand I_CompareCounter distance_trigger3 = 0\n\tand I_UnitDistanceFromUnit a9u1 a1u1 < 500\n\n\tset_counter army9_reinf_late 1\n\tset_counter distance_trigger3 1\n\tend_if\n\n\tif I_CompareCounter army9_reinf_allied = 1\n\tand I_CompareCounter distance_trigger4 = 0\n\tand I_UnitDistanceFromUnit a9u1 a1u1 < 300\n\n\tset_counter army9_reinf_late 1\n\tset_counter distance_trigger4 1\n\tend_if\n\n\tif I_CompareCounter army9_reinf_allied = 1\n\tand I_CompareCounter distance_trigger5 = 0\n\tand I_UnitDistanceFromUnit a9u1 a1u1 < 200\n\n\tset_counter army9_reinf_late 1\n\tset_counter distance_trigger5 1\n\tend_if\n\n\tif I_CompareCounter army9_reinf_allied = 1\n\tand I_CompareCounter army9_reinf_late = 1\n\tand ! I_UnitEnemyUnitInRadius a9u1 160\n;\tand ! I_UnitGroupInRangeOfUnitGroup army1 army9\n\n\tset_counter army9_run 1\n\tbattle_wait 0.5\n\tset_counter army9_moving 1\n\tset_counter army9_reinf_late 0\n\tend_if\n\n\tif I_CompareCounter army9_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a9u1 a1u1 < 150\n\tand I_UnitEnemyUnitInRadius a1u1 100\n\n\tset_counter army9_reinf_allied 0\n\tunit_group_order_halt army9\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army9_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a9u1 a1u1 < 100\n\n\tset_counter army9_reinf_allied 0\n\tunit_group_order_halt army9\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army9_reinf_allied = 1\n\tand I_PercentageUnitKilled a9u1 > 60\n\n\tset_counter army9_reinf_allied 0\n\tunit_group_order_halt army9\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army9_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a9u1 a2u1 < 200\n\tand I_UnitDistanceFromUnit a1u1 a2u1 < 200\n\n\tset_counter army9_reinf_allied 0\n\tunit_group_order_halt army9\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army9_reinf_allied = 1\n\tand I_PercentageUnitGroupKilled army9 > 50\n\n\tset_counter army9_reinf_allied 0\n\tunit_group_order_halt army9\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army9_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a9u1 a1u1 < 250\n\tand I_UnitGroupInRangeOfUnit army9 a1u1\n\n\tset_counter army9_reinf_allied 0\n\tunit_group_order_halt army9\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army9_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a1u1 a9u1 < 250\n\tand I_IsUnitIdle a9u1\n\n\tset_counter army9_reinf_allied 0\n\tunit_group_order_halt army9\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army9_reinf_allied = 1\n\tand I_IsUnitRouting a1u1\n\n\tset_counter army9_reinf_allied 0\n\tunit_group_order_halt army9\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army9_reinf_allied = 1\n\tand I_PercentageUnitKilled a1u1 > 80\n\n\tset_counter army9_reinf_allied 0\n\tunit_group_order_halt army9\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army9_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a1u1 a9u1 < 250\n\tand I_IsUnitUnderFire a9u1\n\n\tset_counter army9_reinf_allied 0\n\tunit_group_order_halt army9\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army9_reinf_allied = 1\n\tand I_CompareCounter army9_run = 1\n\n;\tunit_group_order_halt army9\n\tbattle_wait 0.5\n\tunit_group_move_to_missile_range_of_unit army9 a1u1 run\n\tbattle_wait 0.5\n\tset_counter army9_run 0\n\tend_if\n\nend_if\n\nif I_CompareCounter army11_reinf_allied = 1\n\n\tif I_CompareCounter army11_reinf_allied = 1\n\tand I_CompareCounter army11_moving = 1\n\tand I_UnitEnemyUnitInRadius a11u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army1 army11\n\n\tunit_group_order_halt army11\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tset_counter army11_moving 0\n\tend_if\n\n\tif I_CompareCounter army11_reinf_allied = 1\n\tand I_CompareCounter army11_moving = 1\n\tand ! I_UnitEnemyUnitInRadius a11u1 160\n\tand I_UnitDistanceFromUnit a1u1 a11u1 > 150\n\tand I_IsUnitIdle a11u1\n\n\tset_counter army11_reinf_late 1\n\tbattle_wait 1\n\tset_counter army11_moving 1\n\tend_if\n\n\tif I_CompareCounter army11_reinf_allied = 1\n\tand I_CompareCounter army11_moving = 0\n\tand ! I_UnitEnemyUnitInRadius a11u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army1 army11\n\n" +
                    "\tset_counter army11_run 1\n\tset_counter army11_moving 1\n\tend_if\n\n\tif I_CompareCounter army11_reinf_allied = 1\n\tand I_CompareCounter distance_trigger1 = 0\n\tand I_UnitDistanceFromUnit a11u1 a1u1 < 1000\n\n\tset_counter army11_reinf_late 1\n\tset_counter distance_trigger1 1\n\tend_if\n\n\tif I_CompareCounter army11_reinf_allied = 1\n\tand I_CompareCounter distance_trigger2 = 0\n\tand I_UnitDistanceFromUnit a11u1 a1u1 < 750\n\n\tset_counter army11_reinf_late 1\n\tset_counter distance_trigger2 1\n\tend_if\n\n\tif I_CompareCounter army11_reinf_allied = 1\n\tand I_CompareCounter distance_trigger3 = 0\n\tand I_UnitDistanceFromUnit a11u1 a1u1 < 500\n\n\tset_counter army11_reinf_late 1\n\tset_counter distance_trigger3 1\n\tend_if\n\n\tif I_CompareCounter army11_reinf_allied = 1\n\tand I_CompareCounter distance_trigger4 = 0\n\tand I_UnitDistanceFromUnit a11u1 a1u1 < 300\n\n\tset_counter army11_reinf_late 1\n\tset_counter distance_trigger4 1\n\tend_if\n\n\tif I_CompareCounter army11_reinf_allied = 1\n\tand I_CompareCounter distance_trigger5 = 0\n\tand I_UnitDistanceFromUnit a11u1 a1u1 < 200\n\n\tset_counter army11_reinf_late 1\n\tset_counter distance_trigger5 1\n\tend_if\n\n\tif I_CompareCounter army11_reinf_allied = 1\n\tand I_CompareCounter army11_reinf_late = 1\n\tand ! I_UnitEnemyUnitInRadius a11u1 160\n;\tand ! I_UnitGroupInRangeOfUnitGroup army1 army11\n\n\tset_counter army11_run 1\n\tbattle_wait 0.5\n\tset_counter army11_moving 1\n\tset_counter army11_reinf_late 0\n\tend_if\n\n\tif I_CompareCounter army11_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a11u1 a1u1 < 150\n\tand I_UnitEnemyUnitInRadius a1u1 100\n\n\tset_counter army11_reinf_allied 0\n\tunit_group_order_halt army11\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army11_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a11u1 a1u1 < 100\n\n\tset_counter army11_reinf_allied 0\n\tunit_group_order_halt army11\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army11_reinf_allied = 1\n\tand I_PercentageUnitKilled a11u1 > 60\n\n\tset_counter army11_reinf_allied 0\n\tunit_group_order_halt army11\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army11_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a11u1 a2u1 < 200\n\tand I_UnitDistanceFromUnit a1u1 a2u1 < 200\n\n\tset_counter army11_reinf_allied 0\n\tunit_group_order_halt army11\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army11_reinf_allied = 1\n\tand I_PercentageUnitGroupKilled army11 > 50\n\n\tset_counter army11_reinf_allied 0\n\tunit_group_order_halt army11\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army11_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a11u1 a1u1 < 250\n\tand I_UnitGroupInRangeOfUnit army11 a1u1\n\n\tset_counter army11_reinf_allied 0\n\tunit_group_order_halt army11\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army11_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a1u1 a11u1 < 250\n\tand I_IsUnitIdle a11u1\n\n\tset_counter army11_reinf_allied 0\n\tunit_group_order_halt army11\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army11_reinf_allied = 1\n\tand I_IsUnitRouting a1u1\n\n\tset_counter army11_reinf_allied 0\n\tunit_group_order_halt army11\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army11_reinf_allied = 1\n\tand I_PercentageUnitKilled a1u1 > 80\n\n\tset_counter army11_reinf_allied 0\n\tunit_group_order_halt army11\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army11_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a1u1 a11u1 < 250\n\tand I_IsUnitUnderFire a11u1\n\n\tset_counter army11_reinf_allied 0\n\tunit_group_order_halt army11\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army11_reinf_allied = 1\n\tand I_CompareCounter army11_run = 1\n\n;\tunit_group_order_halt army11\n\tbattle_wait 0.5\n\tunit_group_move_to_missile_range_of_unit army11 a1u1 run\n\tbattle_wait 0.5\n\tset_counter army11_run 0\n\tend_if\n\nend_if\n\nif I_CompareCounter army13_reinf_allied = 1\n\n\tif I_CompareCounter army13_reinf_allied = 1\n\tand I_CompareCounter army13_moving = 1\n\tand I_UnitEnemyUnitInRadius a13u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army1 army13\n\n\tunit_group_order_halt army13\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tset_counter army13_moving 0\n\tend_if\n\n\tif I_CompareCounter army13_reinf_allied = 1\n\tand I_CompareCounter army13_moving = 1\n\tand ! I_UnitEnemyUnitInRadius a13u1 160\n\tand I_UnitDistanceFromUnit a1u1 a13u1 > 150\n\tand I_IsUnitIdle a13u1\n\n\tset_counter army13_reinf_late 1\n\tbattle_wait 1\n\tset_counter army13_moving 1\n\tend_if\n\n\tif I_CompareCounter army13_reinf_allied = 1\n\tand I_CompareCounter army13_moving = 0\n\tand ! I_UnitEnemyUnitInRadius a13u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army1 army13\n\n\tset_counter army13_run 1\n\tset_counter army13_moving 1\n\tend_if\n\n\tif I_CompareCounter army13_reinf_allied = 1\n\tand I_CompareCounter distance_trigger1 = 0\n\tand I_UnitDistanceFromUnit a13u1 a1u1 < 1000\n\n\tset_counter army13_reinf_late 1\n\tset_counter distance_trigger1 1\n\tend_if\n\n\tif I_CompareCounter army13_reinf_allied = 1\n\tand I_CompareCounter distance_trigger2 = 0\n\tand I_UnitDistanceFromUnit a13u1 a1u1 < 750\n\n\tset_counter army13_reinf_late 1\n\tset_counter distance_trigger2 1\n\tend_if\n\n\tif I_CompareCounter army13_reinf_allied = 1\n\tand I_CompareCounter distance_trigger3 = 0\n\tand I_UnitDistanceFromUnit a13u1 a1u1 < 500\n\n\tset_counter army13_reinf_late 1\n\tset_counter distance_trigger3 1\n\tend_if\n\n\tif I_CompareCounter army13_reinf_allied = 1\n\tand I_CompareCounter distance_trigger4 = 0\n\tand I_UnitDistanceFromUnit a13u1 a1u1 < 300\n\n\tset_counter army13_reinf_late 1\n\tset_counter distance_trigger4 1\n\tend_if\n\n\tif I_CompareCounter army13_reinf_allied = 1\n\tand I_CompareCounter distance_trigger5 = 0\n\tand I_UnitDistanceFromUnit a13u1 a1u1 < 200\n\n\tset_counter army13_reinf_late 1\n\tset_counter distance_trigger5 1\n\tend_if\n\n\tif I_CompareCounter army13_reinf_allied = 1\n\tand I_CompareCounter army13_reinf_late = 1\n\tand ! I_UnitEnemyUnitInRadius a13u1 160\n;\tand ! I_UnitGroupInRangeOfUnitGroup army1 army13\n\n\tset_counter army13_run 1\n\tbattle_wait 0.5\n\tset_counter army13_moving 1\n\tset_counter army13_reinf_late 0\n" +
                    "\tend_if\n\n\tif I_CompareCounter army13_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a13u1 a1u1 < 150\n\tand I_UnitEnemyUnitInRadius a1u1 100\n\n\tset_counter army13_reinf_allied 0\n\tunit_group_order_halt army13\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army13_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a13u1 a1u1 < 100\n\n\tset_counter army13_reinf_allied 0\n\tunit_group_order_halt army13\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army13_reinf_allied = 1\n\tand I_PercentageUnitKilled a13u1 > 60\n\n\tset_counter army13_reinf_allied 0\n\tunit_group_order_halt army13\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army13_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a13u1 a2u1 < 200\n\tand I_UnitDistanceFromUnit a1u1 a2u1 < 200\n\n\tset_counter army13_reinf_allied 0\n\tunit_group_order_halt army13\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army13_reinf_allied = 1\n\tand I_PercentageUnitGroupKilled army13 > 50\n\n\tset_counter army13_reinf_allied 0\n\tunit_group_order_halt army13\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army13_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a13u1 a1u1 < 250\n\tand I_UnitGroupInRangeOfUnit army13 a1u1\n\n\tset_counter army13_reinf_allied 0\n\tunit_group_order_halt army13\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army13_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a1u1 a13u1 < 250\n\tand I_IsUnitIdle a13u1\n\n\tset_counter army13_reinf_allied 0\n\tunit_group_order_halt army13\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army13_reinf_allied = 1\n\tand I_IsUnitRouting a1u1\n\n\tset_counter army13_reinf_allied 0\n\tunit_group_order_halt army13\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army13_reinf_allied = 1\n\tand I_PercentageUnitKilled a1u1 > 80\n\n\tset_counter army13_reinf_allied 0\n\tunit_group_order_halt army13\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army13_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a1u1 a13u1 < 250\n\tand I_IsUnitUnderFire a13u1\n\n\tset_counter army13_reinf_allied 0\n\tunit_group_order_halt army13\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army13_reinf_allied = 1\n\tand I_CompareCounter army13_run = 1\n\n;\tunit_group_order_halt army13\n\tbattle_wait 0.5\n\tunit_group_move_to_missile_range_of_unit army13 a1u1 run\n\tbattle_wait 0.5\n\tset_counter army13_run 0\n\tend_if\n\nend_if\n\nif I_CompareCounter army15_reinf_allied = 1\n\n\tif I_CompareCounter army15_reinf_allied = 1\n\tand I_CompareCounter army15_moving = 1\n\tand I_UnitEnemyUnitInRadius a15u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army1 army15\n\n\tunit_group_order_halt army15\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tset_counter army15_moving 0\n\tend_if\n\n\tif I_CompareCounter army15_reinf_allied = 1\n\tand I_CompareCounter army15_moving = 1\n\tand ! I_UnitEnemyUnitInRadius a15u1 160\n\tand I_UnitDistanceFromUnit a1u1 a15u1 > 150\n\tand I_IsUnitIdle a15u1\n\n\tset_counter army15_reinf_late 1\n\tbattle_wait 1\n\tset_counter army15_moving 1\n\tend_if\n\n\tif I_CompareCounter army15_reinf_allied = 1\n\tand I_CompareCounter army15_moving = 0\n\tand ! I_UnitEnemyUnitInRadius a15u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army1 army15\n\n\tset_counter army15_run 1\n\tset_counter army15_moving 1\n\tend_if\n\n" +
                    "\tif I_CompareCounter army15_reinf_allied = 1\n\tand I_CompareCounter distance_trigger1 = 0\n\tand I_UnitDistanceFromUnit a15u1 a1u1 < 1000\n\n\tset_counter army15_reinf_late 1\n\tset_counter distance_trigger1 1\n\tend_if\n\n\tif I_CompareCounter army15_reinf_allied = 1\n\tand I_CompareCounter distance_trigger2 = 0\n\tand I_UnitDistanceFromUnit a15u1 a1u1 < 750\n\n\tset_counter army15_reinf_late 1\n\tset_counter distance_trigger2 1\n\tend_if\n\n\tif I_CompareCounter army15_reinf_allied = 1\n\tand I_CompareCounter distance_trigger3 = 0\n\tand I_UnitDistanceFromUnit a15u1 a1u1 < 500\n\n\tset_counter army15_reinf_late 1\n\tset_counter distance_trigger3 1\n\tend_if\n\n\tif I_CompareCounter army15_reinf_allied = 1\n\tand I_CompareCounter distance_trigger4 = 0\n\tand I_UnitDistanceFromUnit a15u1 a1u1 < 300\n\n\tset_counter army15_reinf_late 1\n\tset_counter distance_trigger4 1\n\tend_if\n\n\tif I_CompareCounter army15_reinf_allied = 1\n\tand I_CompareCounter distance_trigger5 = 0\n\tand I_UnitDistanceFromUnit a15u1 a1u1 < 200\n\n\tset_counter army15_reinf_late 1\n\tset_counter distance_trigger5 1\n\tend_if\n\n\tif I_CompareCounter army15_reinf_allied = 1\n\tand I_CompareCounter army15_reinf_late = 1\n\tand ! I_UnitEnemyUnitInRadius a15u1 160\n;\tand ! I_UnitGroupInRangeOfUnitGroup army1 army15\n\n\tset_counter army15_run 1\n\tbattle_wait 0.5\n\tset_counter army15_moving 1\n\tset_counter army15_reinf_late 0\n\tend_if\n\n\tif I_CompareCounter army15_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a15u1 a1u1 < 150\n\tand I_UnitEnemyUnitInRadius a1u1 100\n\n\tset_counter army15_reinf_allied 0\n\tunit_group_order_halt army15\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army15_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a15u1 a1u1 < 100\n\n\tset_counter army15_reinf_allied 0\n\tunit_group_order_halt army15\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army15_reinf_allied = 1\n\tand I_PercentageUnitKilled a15u1 > 60\n\n\tset_counter army15_reinf_allied 0\n\tunit_group_order_halt army15\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army15_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a15u1 a2u1 < 200\n\tand I_UnitDistanceFromUnit a1u1 a2u1 < 200\n\n\tset_counter army15_reinf_allied 0\n\tunit_group_order_halt army15\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army15_reinf_allied = 1\n\tand I_PercentageUnitGroupKilled army15 > 50\n\n\tset_counter army15_reinf_allied 0\n\tunit_group_order_halt army15\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army15_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a15u1 a1u1 < 250\n\tand I_UnitGroupInRangeOfUnit army15 a1u1\n\n\tset_counter army15_reinf_allied 0\n\tunit_group_order_halt army15\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army15_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a1u1 a15u1 < 250\n\tand I_IsUnitIdle a15u1\n\n\tset_counter army15_reinf_allied 0\n\tunit_group_order_halt army15\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army15_reinf_allied = 1\n\tand I_IsUnitRouting a1u1\n\n\tset_counter army15_reinf_allied 0\n\tunit_group_order_halt army15\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army15_reinf_allied = 1\n\tand I_PercentageUnitKilled a1u1 > 80\n\n\tset_counter army15_reinf_allied 0\n\tunit_group_order_halt army15\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army15_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a1u1 a15u1 < 250\n\tand I_IsUnitUnderFire a15u1\n\n\tset_counter army15_reinf_allied 0\n\tunit_group_order_halt army15\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army15_reinf_allied = 1\n\tand I_CompareCounter army15_run = 1\n\n;\tunit_group_order_halt army15\n\tbattle_wait 0.5\n\tunit_group_move_to_missile_range_of_unit army15 a1u1 run\n\tbattle_wait 0.5\n\tset_counter army15_run 0\n\tend_if\n\nend_if\n\n;\tif I_CompareCounter reinf_check_interval = 2\n;\tset_counter reinf_check_interval 0\n;\tend_if\n\tbattle_wait 5\nend_monitor\n\n;;;;;;; Defending\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter def_alliance_ready = 1\n\tand I_BattlePlayerArmyIsAttacker\n\n;\tinc_counter reinf_check_interval 1\n\nif I_CompareCounter army4_reinf_allied = 1\n\n\tif I_CompareCounter army4_reinf_allied = 1\n\tand I_CompareCounter army4_moving = 1\n\tand I_UnitEnemyUnitInRadius a4u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army2 army4\n\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tset_counter army4_moving 0\n\tend_if\n\n\tif I_CompareCounter army4_reinf_allied = 1\n\tand I_CompareCounter army4_moving = 1\n\tand ! I_UnitEnemyUnitInRadius a4u1 160\n\tand I_UnitDistanceFromUnit a2u1 a4u1 > 150\n\tand I_IsUnitIdle a4u1\n\n\tset_counter army4_reinf_late 1\n\tbattle_wait 1\n\tset_counter army4_moving 1\n\tend_if\n\n\tif I_CompareCounter army4_reinf_allied = 1\n\tand I_CompareCounter army4_moving = 0\n\tand ! I_UnitEnemyUnitInRadius a4u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army2 army4\n\n\tset_counter army4_run 1\n\tset_counter army4_moving 1\n\tend_if\n\n\tif I_CompareCounter army4_reinf_allied = 1\n\tand I_CompareCounter distance_trigger1 = 0\n\tand I_UnitDistanceFromUnit a4u1 a2u1 < 1000\n\n\tset_counter army4_reinf_late 1\n\tset_counter distance_trigger1 1\n\tend_if\n\n\tif I_CompareCounter army4_reinf_allied = 1\n\tand I_CompareCounter distance_trigger2 = 0\n\tand I_UnitDistanceFromUnit a4u1 a2u1 < 750\n\n\tset_counter army4_reinf_late 1\n\tset_counter distance_trigger2 1\n\tend_if\n\n\tif I_CompareCounter army4_reinf_allied = 1\n\tand I_CompareCounter distance_trigger3 = 0\n\tand I_UnitDistanceFromUnit a4u1 a2u1 < 500\n\n\tset_counter army4_reinf_late 1\n\tset_counter distance_trigger3 1\n\tend_if\n\n\tif I_CompareCounter army4_reinf_allied = 1\n\tand I_CompareCounter distance_trigger4 = 0\n\tand I_UnitDistanceFromUnit a4u1 a2u1 < 300\n\n\tset_counter army4_reinf_late 1\n\tset_counter distance_trigger4 1\n\tend_if\n\n\tif I_CompareCounter army4_reinf_allied = 1\n\tand I_CompareCounter distance_trigger5 = 0\n\tand I_UnitDistanceFromUnit a4u1 a2u1 < 200\n\n\tset_counter army4_reinf_late 1\n\tset_counter distance_trigger5 1\n\tend_if\n\n\tif I_CompareCounter army4_reinf_allied = 1\n\tand I_CompareCounter army4_reinf_late = 1\n\tand ! I_UnitEnemyUnitInRadius a4u1 160\n;\tand ! I_UnitGroupInRangeOfUnitGroup army2 army4\n\n\tset_counter army4_run 1\n\tbattle_wait 0.5\n\tset_counter army4_moving 1\n\tset_counter army4_reinf_late 0\n\tend_if\n\n\tif I_CompareCounter army4_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a4u1 a2u1 < 150\n\tand I_UnitEnemyUnitInRadius a2u1 100\n\n\tset_counter army4_reinf_allied 0\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army4_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a4u1 a2u1 < 100\n\n\tset_counter army4_reinf_allied 0\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army4_reinf_allied = 1\n\tand I_PercentageUnitKilled a4u1 > 60\n\n\tset_counter army4_reinf_allied 0\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army4_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a4u1 a2u1 < 200\n\tand I_UnitDistanceFromUnit a2u1 a2u1 < 200\n\n\tset_counter army4_reinf_allied 0\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n" +
                    "\tend_if\n\n\tif I_CompareCounter army4_reinf_allied = 1\n\tand I_PercentageUnitGroupKilled army4 > 50\n\n\tset_counter army4_reinf_allied 0\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army4_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a4u1 a2u1 < 250\n\tand I_UnitGroupInRangeOfUnit army4 a2u1\n\n\tset_counter army4_reinf_allied 0\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army4_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a2u1 a4u1 < 250\n\tand I_IsUnitIdle a4u1\n\n\tset_counter army4_reinf_allied 0\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army4_reinf_allied = 1\n\tand I_IsUnitRouting a2u1\n\n\tset_counter army4_reinf_allied 0\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army4_reinf_allied = 1\n\tand I_PercentageUnitKilled a2u1 > 80\n\n\tset_counter army4_reinf_allied 0\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army4_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a2u1 a4u1 < 250\n\tand I_IsUnitUnderFire a4u1\n\n\tset_counter army4_reinf_allied 0\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army4_reinf_allied = 1\n\tand I_CompareCounter army4_run = 1\n\n;\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tunit_group_move_to_missile_range_of_unit army4 a2u1 run\n\tbattle_wait 0.5\n\tset_counter army4_run 0\n\tend_if\n\nend_if\n\nif I_CompareCounter army6_reinf_allied = 1\n\n\tif I_CompareCounter army6_reinf_allied = 1\n\tand I_CompareCounter army6_moving = 1\n\tand I_UnitEnemyUnitInRadius a6u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army2 army6\n\n\tunit_group_order_halt army6\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tset_counter army6_moving 0\n\tend_if\n\n\tif I_CompareCounter army6_reinf_allied = 1\n\tand I_CompareCounter army6_moving = 1\n\tand ! I_UnitEnemyUnitInRadius a6u1 160\n\tand I_UnitDistanceFromUnit a2u1 a6u1 > 150\n\tand I_IsUnitIdle a6u1\n\n\tset_counter army6_reinf_late 1\n\tbattle_wait 1\n\tset_counter army6_moving 1\n\tend_if\n\n\tif I_CompareCounter army6_reinf_allied = 1\n\tand I_CompareCounter army6_moving = 0\n\tand ! I_UnitEnemyUnitInRadius a6u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army2 army6\n\n\tset_counter army6_run 1\n\tset_counter army6_moving 1\n\tend_if\n\n\tif I_CompareCounter army6_reinf_allied = 1\n\tand I_CompareCounter distance_trigger1 = 0\n\tand I_UnitDistanceFromUnit a6u1 a2u1 < 1000\n\n\tset_counter army6_reinf_late 1\n\tset_counter distance_trigger1 1\n\tend_if\n\n\tif I_CompareCounter army6_reinf_allied = 1\n\tand I_CompareCounter distance_trigger2 = 0\n\tand I_UnitDistanceFromUnit a6u1 a2u1 < 750\n\n\tset_counter army6_reinf_late 1\n\tset_counter distance_trigger2 1\n\tend_if\n\n\tif I_CompareCounter army6_reinf_allied = 1\n\tand I_CompareCounter distance_trigger3 = 0\n\tand I_UnitDistanceFromUnit a6u1 a2u1 < 500\n\n\tset_counter army6_reinf_late 1\n\tset_counter distance_trigger3 1\n\tend_if\n\n\tif I_CompareCounter army6_reinf_allied = 1\n\tand I_CompareCounter distance_trigger4 = 0\n\tand I_UnitDistanceFromUnit a6u1 a2u1 < 300\n\n\tset_counter army6_reinf_late 1\n\tset_counter distance_trigger4 1\n\tend_if\n\n\tif I_CompareCounter army6_reinf_allied = 1\n\tand I_CompareCounter distance_trigger5 = 0\n\tand I_UnitDistanceFromUnit a6u1 a2u1 < 200\n\n\tset_counter army6_reinf_late 1\n\tset_counter distance_trigger5 1\n\tend_if\n\n\tif I_CompareCounter army6_reinf_allied = 1\n\tand I_CompareCounter army6_reinf_late = 1\n\tand ! I_UnitEnemyUnitInRadius a6u1 160\n;\tand ! I_UnitGroupInRangeOfUnitGroup army2 army6\n\n\tset_counter army6_run 1\n\tbattle_wait 0.5\n\tset_counter army6_moving 1\n\tset_counter army6_reinf_late 0\n\tend_if\n\n\tif I_CompareCounter army6_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a6u1 a2u1 < 150\n\tand I_UnitEnemyUnitInRadius a2u1 100\n\n\tset_counter army6_reinf_allied 0\n\tunit_group_order_halt army6\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army6_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a6u1 a2u1 < 100\n\n\tset_counter army6_reinf_allied 0\n\tunit_group_order_halt army6\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army6_reinf_allied = 1\n\tand I_PercentageUnitKilled a6u1 > 60\n\n\tset_counter army6_reinf_allied 0\n\tunit_group_order_halt army6\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army6_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a6u1 a2u1 < 200\n\tand I_UnitDistanceFromUnit a2u1 a2u1 < 200\n\n\tset_counter army6_reinf_allied 0\n\tunit_group_order_halt army6\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army6_reinf_allied = 1\n\tand I_PercentageUnitGroupKilled army6 > 50\n\n\tset_counter army6_reinf_allied 0\n\tunit_group_order_halt army6\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army6_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a6u1 a2u1 < 250\n\tand I_UnitGroupInRangeOfUnit army6 a2u1\n\n\tset_counter army6_reinf_allied 0\n\tunit_group_order_halt army6\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army6_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a2u1 a6u1 < 250\n\tand I_IsUnitIdle a6u1\n\n\tset_counter army6_reinf_allied 0\n\tunit_group_order_halt army6\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army6_reinf_allied = 1\n\tand I_IsUnitRouting a2u1\n\n\tset_counter army6_reinf_allied 0\n\tunit_group_order_halt army6\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army6_reinf_allied = 1\n\tand I_PercentageUnitKilled a2u1 > 80\n\n\tset_counter army6_reinf_allied 0\n\tunit_group_order_halt army6\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army6_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a2u1 a6u1 < 250\n\tand I_IsUnitUnderFire a6u1\n\n\tset_counter army6_reinf_allied 0\n\tunit_group_order_halt army6\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army6_reinf_allied = 1\n\tand I_CompareCounter army6_run = 1\n\n" +
                    ";\tunit_group_order_halt army6\n\tbattle_wait 0.5\n\tunit_group_move_to_missile_range_of_unit army6 a2u1 run\n\tbattle_wait 0.5\n\tset_counter army6_run 0\n\tend_if\n\nend_if\n\nif I_CompareCounter army8_reinf_allied = 1\n\n\tif I_CompareCounter army8_reinf_allied = 1\n\tand I_CompareCounter army8_moving = 1\n\tand I_UnitEnemyUnitInRadius a8u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army2 army8\n\n\tunit_group_order_halt army8\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tset_counter army8_moving 0\n\tend_if\n\n\tif I_CompareCounter army8_reinf_allied = 1\n\tand I_CompareCounter army8_moving = 1\n\tand ! I_UnitEnemyUnitInRadius a8u1 160\n\tand I_UnitDistanceFromUnit a2u1 a8u1 > 150\n\tand I_IsUnitIdle a8u1\n\n\tset_counter army8_reinf_late 1\n\tbattle_wait 1\n\tset_counter army8_moving 1\n\tend_if\n\n\tif I_CompareCounter army8_reinf_allied = 1\n\tand I_CompareCounter army8_moving = 0\n\tand ! I_UnitEnemyUnitInRadius a8u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army2 army8\n\n\tset_counter army8_run 1\n\tset_counter army8_moving 1\n\tend_if\n\n\tif I_CompareCounter army8_reinf_allied = 1\n\tand I_CompareCounter distance_trigger1 = 0\n\tand I_UnitDistanceFromUnit a8u1 a2u1 < 1000\n\n\tset_counter army8_reinf_late 1\n\tset_counter distance_trigger1 1\n\tend_if\n\n\tif I_CompareCounter army8_reinf_allied = 1\n\tand I_CompareCounter distance_trigger2 = 0\n\tand I_UnitDistanceFromUnit a8u1 a2u1 < 750\n\n\tset_counter army8_reinf_late 1\n\tset_counter distance_trigger2 1\n\tend_if\n\n\tif I_CompareCounter army8_reinf_allied = 1\n\tand I_CompareCounter distance_trigger3 = 0\n\tand I_UnitDistanceFromUnit a8u1 a2u1 < 500\n\n\tset_counter army8_reinf_late 1\n\tset_counter distance_trigger3 1\n\tend_if\n\n\tif I_CompareCounter army8_reinf_allied = 1\n\tand I_CompareCounter distance_trigger4 = 0\n\tand I_UnitDistanceFromUnit a8u1 a2u1 < 300\n\n\tset_counter army8_reinf_late 1\n\tset_counter distance_trigger4 1\n\tend_if\n\n\tif I_CompareCounter army8_reinf_allied = 1\n\tand I_CompareCounter distance_trigger5 = 0\n\tand I_UnitDistanceFromUnit a8u1 a2u1 < 200\n\n\tset_counter army8_reinf_late 1\n\tset_counter distance_trigger5 1\n\tend_if\n\n\tif I_CompareCounter army8_reinf_allied = 1\n\tand I_CompareCounter army8_reinf_late = 1\n\tand ! I_UnitEnemyUnitInRadius a8u1 160\n;\tand ! I_UnitGroupInRangeOfUnitGroup army2 army8\n\n\tset_counter army8_run 1\n\tbattle_wait 0.5\n\tset_counter army8_moving 1\n\tset_counter army8_reinf_late 0\n\tend_if\n\n\tif I_CompareCounter army8_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a8u1 a2u1 < 150\n\tand I_UnitEnemyUnitInRadius a2u1 100\n\n\tset_counter army8_reinf_allied 0\n\tunit_group_order_halt army8\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army8_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a8u1 a2u1 < 100\n\n\tset_counter army8_reinf_allied 0\n\tunit_group_order_halt army8\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army8_reinf_allied = 1\n\tand I_PercentageUnitKilled a8u1 > 60\n\n\tset_counter army8_reinf_allied 0\n\tunit_group_order_halt army8\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army8_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a8u1 a2u1 < 200\n\tand I_UnitDistanceFromUnit a2u1 a2u1 < 200\n\n\tset_counter army8_reinf_allied 0\n\tunit_group_order_halt army8\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army8_reinf_allied = 1\n\tand I_PercentageUnitGroupKilled army8 > 50\n\n\tset_counter army8_reinf_allied 0\n\tunit_group_order_halt army8\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army8_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a8u1 a2u1 < 250\n\tand I_UnitGroupInRangeOfUnit army8 a2u1\n\n\tset_counter army8_reinf_allied 0\n\tunit_group_order_halt army8\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army8_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a2u1 a8u1 < 250\n\tand I_IsUnitIdle a8u1\n\n\tset_counter army8_reinf_allied 0\n\tunit_group_order_halt army8\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army8_reinf_allied = 1\n\tand I_IsUnitRouting a2u1\n\n\tset_counter army8_reinf_allied 0\n\tunit_group_order_halt army8\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army8_reinf_allied = 1\n\tand I_PercentageUnitKilled a2u1 > 80\n\n\tset_counter army8_reinf_allied 0\n\tunit_group_order_halt army8\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army8_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a2u1 a8u1 < 250\n\tand I_IsUnitUnderFire a8u1\n\n\tset_counter army8_reinf_allied 0\n\tunit_group_order_halt army8\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army8_reinf_allied = 1\n\tand I_CompareCounter army8_run = 1\n\n;\tunit_group_order_halt army8\n\tbattle_wait 0.5\n\tunit_group_move_to_missile_range_of_unit army8 a2u1 run\n\tbattle_wait 0.5\n\tset_counter army8_run 0\n\tend_if\n\nend_if\n\nif I_CompareCounter army10_reinf_allied = 1\n\n\tif I_CompareCounter army10_reinf_allied = 1\n\tand I_CompareCounter army10_moving = 1\n\tand I_UnitEnemyUnitInRadius a10u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army2 army10\n\n\tunit_group_order_halt army10\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tset_counter army10_moving 0\n\tend_if\n\n\tif I_CompareCounter army10_reinf_allied = 1\n\tand I_CompareCounter army10_moving = 1\n\tand ! I_UnitEnemyUnitInRadius a10u1 160\n\tand I_UnitDistanceFromUnit a2u1 a10u1 > 150\n\tand I_IsUnitIdle a10u1\n\n\tset_counter army10_reinf_late 1\n\tbattle_wait 1\n\tset_counter army10_moving 1\n\tend_if\n\n\tif I_CompareCounter army10_reinf_allied = 1\n\tand I_CompareCounter army10_moving = 0\n\tand ! I_UnitEnemyUnitInRadius a10u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army2 army10\n\n\tset_counter army10_run 1\n\tset_counter army10_moving 1\n\tend_if\n\n\tif I_CompareCounter army10_reinf_allied = 1\n\tand I_CompareCounter distance_trigger1 = 0\n\tand I_UnitDistanceFromUnit a10u1 a2u1 < 1000\n\n\tset_counter army10_reinf_late 1\n\tset_counter distance_trigger1 1\n\tend_if\n\n\tif I_CompareCounter army10_reinf_allied = 1\n\tand I_CompareCounter distance_trigger2 = 0\n\tand I_UnitDistanceFromUnit a10u1 a2u1 < 750\n\n\tset_counter army10_reinf_late 1\n\tset_counter distance_trigger2 1\n\tend_if\n\n\tif I_CompareCounter army10_reinf_allied = 1\n\tand I_CompareCounter distance_trigger3 = 0\n\tand I_UnitDistanceFromUnit a10u1 a2u1 < 500\n\n\tset_counter army10_reinf_late 1\n\tset_counter distance_trigger3 1\n\tend_if\n\n\tif I_CompareCounter army10_reinf_allied = 1\n\tand I_CompareCounter distance_trigger4 = 0\n\tand I_UnitDistanceFromUnit a10u1 a2u1 < 300\n\n\tset_counter army10_reinf_late 1\n\tset_counter distance_trigger4 1\n\tend_if\n\n\tif I_CompareCounter army10_reinf_allied = 1\n\tand I_CompareCounter distance_trigger5 = 0\n\tand I_UnitDistanceFromUnit a10u1 a2u1 < 200\n\n\tset_counter army10_reinf_late 1\n\tset_counter distance_trigger5 1\n\tend_if\n\n\tif I_CompareCounter army10_reinf_allied = 1\n\tand I_CompareCounter army10_reinf_late = 1\n\tand ! I_UnitEnemyUnitInRadius a10u1 160\n;\tand ! I_UnitGroupInRangeOfUnitGroup army2 army10\n\n\tset_counter army10_run 1\n\tbattle_wait 0.5\n\tset_counter army10_moving 1\n\tset_counter army10_reinf_late 0\n\tend_if\n\n\tif I_CompareCounter army10_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a10u1 a2u1 < 150\n\tand I_UnitEnemyUnitInRadius a2u1 100\n\n\tset_counter army10_reinf_allied 0\n\tunit_group_order_halt army10\n\tbattle_wait 0.5\n" +
                    "\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army10_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a10u1 a2u1 < 100\n\n\tset_counter army10_reinf_allied 0\n\tunit_group_order_halt army10\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army10_reinf_allied = 1\n\tand I_PercentageUnitKilled a10u1 > 60\n\n\tset_counter army10_reinf_allied 0\n\tunit_group_order_halt army10\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army10_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a10u1 a2u1 < 200\n\tand I_UnitDistanceFromUnit a2u1 a2u1 < 200\n\n\tset_counter army10_reinf_allied 0\n\tunit_group_order_halt army10\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army10_reinf_allied = 1\n\tand I_PercentageUnitGroupKilled army10 > 50\n\n\tset_counter army10_reinf_allied 0\n\tunit_group_order_halt army10\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army10_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a10u1 a2u1 < 250\n\tand I_UnitGroupInRangeOfUnit army10 a2u1\n\n\tset_counter army10_reinf_allied 0\n\tunit_group_order_halt army10\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army10_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a2u1 a10u1 < 250\n\tand I_IsUnitIdle a10u1\n\n\tset_counter army10_reinf_allied 0\n\tunit_group_order_halt army10\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army10_reinf_allied = 1\n\tand I_IsUnitRouting a2u1\n\n\tset_counter army10_reinf_allied 0\n\tunit_group_order_halt army10\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army10_reinf_allied = 1\n\tand I_PercentageUnitKilled a2u1 > 80\n\n\tset_counter army10_reinf_allied 0\n\tunit_group_order_halt army10\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army10_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a2u1 a10u1 < 250\n\tand I_IsUnitUnderFire a10u1\n\n\tset_counter army10_reinf_allied 0\n\tunit_group_order_halt army10\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army10_reinf_allied = 1\n\tand I_CompareCounter army10_run = 1\n\n;\tunit_group_order_halt army10\n\tbattle_wait 0.5\n\tunit_group_move_to_missile_range_of_unit army10 a2u1 run\n\tbattle_wait 0.5\n\tset_counter army10_run 0\n\tend_if\n\nend_if\n\nif I_CompareCounter army12_reinf_allied = 1\n\n\tif I_CompareCounter army12_reinf_allied = 1\n\tand I_CompareCounter army12_moving = 1\n\tand I_UnitEnemyUnitInRadius a12u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army2 army12\n\n\tunit_group_order_halt army12\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tset_counter army12_moving 0\n\tend_if\n\n\tif I_CompareCounter army12_reinf_allied = 1\n\tand I_CompareCounter army12_moving = 1\n\tand ! I_UnitEnemyUnitInRadius a12u1 160\n\tand I_UnitDistanceFromUnit a2u1 a12u1 > 150\n\tand I_IsUnitIdle a12u1\n\n\tset_counter army12_reinf_late 1\n\tbattle_wait 1\n\tset_counter army12_moving 1\n\tend_if\n\n\tif I_CompareCounter army12_reinf_allied = 1\n\tand I_CompareCounter army12_moving = 0\n\tand ! I_UnitEnemyUnitInRadius a12u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army2 army12\n\n\tset_counter army12_run 1\n\tset_counter army12_moving 1\n\tend_if\n\n\tif I_CompareCounter army12_reinf_allied = 1\n\tand I_CompareCounter distance_trigger1 = 0\n\tand I_UnitDistanceFromUnit a12u1 a2u1 < 1000\n\n\tset_counter army12_reinf_late 1\n\tset_counter distance_trigger1 1\n\tend_if\n\n\tif I_CompareCounter army12_reinf_allied = 1\n\tand I_CompareCounter distance_trigger2 = 0\n\tand I_UnitDistanceFromUnit a12u1 a2u1 < 750\n\n\tset_counter army12_reinf_late 1\n\tset_counter distance_trigger2 1\n\tend_if\n\n\tif I_CompareCounter army12_reinf_allied = 1\n\tand I_CompareCounter distance_trigger3 = 0\n\tand I_UnitDistanceFromUnit a12u1 a2u1 < 500\n\n\tset_counter army12_reinf_late 1\n\tset_counter distance_trigger3 1\n\tend_if\n\n\tif I_CompareCounter army12_reinf_allied = 1\n\tand I_CompareCounter distance_trigger4 = 0\n\tand I_UnitDistanceFromUnit a12u1 a2u1 < 300\n\n\tset_counter army12_reinf_late 1\n\tset_counter distance_trigger4 1\n\tend_if\n\n\tif I_CompareCounter army12_reinf_allied = 1\n\tand I_CompareCounter distance_trigger5 = 0\n\tand I_UnitDistanceFromUnit a12u1 a2u1 < 200\n\n\tset_counter army12_reinf_late 1\n\tset_counter distance_trigger5 1\n\tend_if\n\n\tif I_CompareCounter army12_reinf_allied = 1\n\tand I_CompareCounter army12_reinf_late = 1\n\tand ! I_UnitEnemyUnitInRadius a12u1 160\n;\tand ! I_UnitGroupInRangeOfUnitGroup army2 army12\n\n\tset_counter army12_run 1\n\tbattle_wait 0.5\n\tset_counter army12_moving 1\n\tset_counter army12_reinf_late 0\n\tend_if\n\n\tif I_CompareCounter army12_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a12u1 a2u1 < 150\n\tand I_UnitEnemyUnitInRadius a2u1 100\n\n\tset_counter army12_reinf_allied 0\n\tunit_group_order_halt army12\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army12_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a12u1 a2u1 < 100\n\n\tset_counter army12_reinf_allied 0\n\tunit_group_order_halt army12\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army12_reinf_allied = 1\n\tand I_PercentageUnitKilled a12u1 > 60\n\n" +
                    "\tset_counter army12_reinf_allied 0\n\tunit_group_order_halt army12\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army12_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a12u1 a2u1 < 200\n\tand I_UnitDistanceFromUnit a2u1 a2u1 < 200\n\n\tset_counter army12_reinf_allied 0\n\tunit_group_order_halt army12\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army12_reinf_allied = 1\n\tand I_PercentageUnitGroupKilled army12 > 50\n\n\tset_counter army12_reinf_allied 0\n\tunit_group_order_halt army12\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army12_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a12u1 a2u1 < 250\n\tand I_UnitGroupInRangeOfUnit army12 a2u1\n\n\tset_counter army12_reinf_allied 0\n\tunit_group_order_halt army12\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army12_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a2u1 a12u1 < 250\n\tand I_IsUnitIdle a12u1\n\n\tset_counter army12_reinf_allied 0\n\tunit_group_order_halt army12\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army12_reinf_allied = 1\n\tand I_IsUnitRouting a2u1\n\n\tset_counter army12_reinf_allied 0\n\tunit_group_order_halt army12\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army12_reinf_allied = 1\n\tand I_PercentageUnitKilled a2u1 > 80\n\n\tset_counter army12_reinf_allied 0\n\tunit_group_order_halt army12\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army12_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a2u1 a12u1 < 250\n\tand I_IsUnitUnderFire a12u1\n\n\tset_counter army12_reinf_allied 0\n\tunit_group_order_halt army12\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army12_reinf_allied = 1\n\tand I_CompareCounter army12_run = 1\n\n;\tunit_group_order_halt army12\n\tbattle_wait 0.5\n\tunit_group_move_to_missile_range_of_unit army12 a2u1 run\n\tbattle_wait 0.5\n\tset_counter army12_run 0\n\tend_if\n\nend_if\n\nif I_CompareCounter army14_reinf_allied = 1\n\n\tif I_CompareCounter army14_reinf_allied = 1\n\tand I_CompareCounter army14_moving = 1\n\tand I_UnitEnemyUnitInRadius a14u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army2 army14\n\n\tunit_group_order_halt army14\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tset_counter army14_moving 0\n\tend_if\n\n\tif I_CompareCounter army14_reinf_allied = 1\n\tand I_CompareCounter army14_moving = 1\n\tand ! I_UnitEnemyUnitInRadius a14u1 160\n\tand I_UnitDistanceFromUnit a2u1 a14u1 > 150\n\tand I_IsUnitIdle a14u1\n\n\tset_counter army14_reinf_late 1\n\tbattle_wait 1\n\tset_counter army14_moving 1\n\tend_if\n\n\tif I_CompareCounter army14_reinf_allied = 1\n\tand I_CompareCounter army14_moving = 0\n\tand ! I_UnitEnemyUnitInRadius a14u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army2 army14\n\n\tset_counter army14_run 1\n\tset_counter army14_moving 1\n\tend_if\n\n\tif I_CompareCounter army14_reinf_allied = 1\n\tand I_CompareCounter distance_trigger1 = 0\n\tand I_UnitDistanceFromUnit a14u1 a2u1 < 1000\n\n\tset_counter army14_reinf_late 1\n\tset_counter distance_trigger1 1\n\tend_if\n\n\tif I_CompareCounter army14_reinf_allied = 1\n\tand I_CompareCounter distance_trigger2 = 0\n\tand I_UnitDistanceFromUnit a14u1 a2u1 < 750\n\n\tset_counter army14_reinf_late 1\n\tset_counter distance_trigger2 1\n\tend_if\n\n\tif I_CompareCounter army14_reinf_allied = 1\n\tand I_CompareCounter distance_trigger3 = 0\n\tand I_UnitDistanceFromUnit a14u1 a2u1 < 500\n\n\tset_counter army14_reinf_late 1\n\tset_counter distance_trigger3 1\n\tend_if\n\n\tif I_CompareCounter army14_reinf_allied = 1\n\tand I_CompareCounter distance_trigger4 = 0\n\tand I_UnitDistanceFromUnit a14u1 a2u1 < 300\n\n\tset_counter army14_reinf_late 1\n\tset_counter distance_trigger4 1\n\tend_if\n\n\tif I_CompareCounter army14_reinf_allied = 1\n\tand I_CompareCounter distance_trigger5 = 0\n\tand I_UnitDistanceFromUnit a14u1 a2u1 < 200\n\n\tset_counter army14_reinf_late 1\n\tset_counter distance_trigger5 1\n\tend_if\n\n\tif I_CompareCounter army14_reinf_allied = 1\n\tand I_CompareCounter army14_reinf_late = 1\n\tand ! I_UnitEnemyUnitInRadius a14u1 160\n;\tand ! I_UnitGroupInRangeOfUnitGroup army2 army14\n\n\tset_counter army14_run 1\n\tbattle_wait 0.5\n\tset_counter army14_moving 1\n\tset_counter army14_reinf_late 0\n\tend_if\n\n\tif I_CompareCounter army14_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a14u1 a2u1 < 150\n\tand I_UnitEnemyUnitInRadius a2u1 100\n\n\tset_counter army14_reinf_allied 0\n\tunit_group_order_halt army14\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army14_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a14u1 a2u1 < 100\n\n\tset_counter army14_reinf_allied 0\n\tunit_group_order_halt army14\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army14_reinf_allied = 1\n\tand I_PercentageUnitKilled a14u1 > 60\n\n\tset_counter army14_reinf_allied 0\n\tunit_group_order_halt army14\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army14_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a14u1 a2u1 < 200\n\tand I_UnitDistanceFromUnit a2u1 a2u1 < 200\n\n\tset_counter army14_reinf_allied 0\n\tunit_group_order_halt army14\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army14_reinf_allied = 1\n\tand I_PercentageUnitGroupKilled army14 > 50\n\n\tset_counter army14_reinf_allied 0\n\tunit_group_order_halt army14\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army14_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a14u1 a2u1 < 250\n\tand I_UnitGroupInRangeOfUnit army14 a2u1\n\n\tset_counter army14_reinf_allied 0\n\tunit_group_order_halt army14\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army14_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a2u1 a14u1 < 250\n\tand I_IsUnitIdle a14u1\n\n\tset_counter army14_reinf_allied 0\n\tunit_group_order_halt army14\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army14_reinf_allied = 1\n\tand I_IsUnitRouting a2u1\n\n\tset_counter army14_reinf_allied 0\n\tunit_group_order_halt army14\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army14_reinf_allied = 1\n\tand I_PercentageUnitKilled a2u1 > 80\n\n\tset_counter army14_reinf_allied 0\n\tunit_group_order_halt army14\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army14_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a2u1 a14u1 < 250\n\tand I_IsUnitUnderFire a14u1\n\n\tset_counter army14_reinf_allied 0\n\tunit_group_order_halt army14\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army14_reinf_allied = 1\n\tand I_CompareCounter army14_run = 1\n\n;\tunit_group_order_halt army14\n\tbattle_wait 0.5\n\tunit_group_move_to_missile_range_of_unit army14 a2u1 run\n\tbattle_wait 0.5\n\tset_counter army14_run 0\n\tend_if\n\nend_if\n\nif I_CompareCounter army16_reinf_allied = 1\n\n\tif I_CompareCounter army16_reinf_allied = 1\n\tand I_CompareCounter army16_moving = 1\n\tand I_UnitEnemyUnitInRadius a16u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army2 army16\n\n\tunit_group_order_halt army16\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tset_counter army16_moving 0\n\tend_if\n\n\tif I_CompareCounter army16_reinf_allied = 1\n\tand I_CompareCounter army16_moving = 1\n\tand ! I_UnitEnemyUnitInRadius a16u1 160\n\tand I_UnitDistanceFromUnit a2u1 a16u1 > 150\n" +
                    "\tand I_IsUnitIdle a16u1\n\n\tset_counter army16_reinf_late 1\n\tbattle_wait 1\n\tset_counter army16_moving 1\n\tend_if\n\n\tif I_CompareCounter army16_reinf_allied = 1\n\tand I_CompareCounter army16_moving = 0\n\tand ! I_UnitEnemyUnitInRadius a16u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army2 army16\n\n\tset_counter army16_run 1\n\tset_counter army16_moving 1\n\tend_if\n\n\tif I_CompareCounter army16_reinf_allied = 1\n\tand I_CompareCounter distance_trigger1 = 0\n\tand I_UnitDistanceFromUnit a16u1 a2u1 < 1000\n\n\tset_counter army16_reinf_late 1\n\tset_counter distance_trigger1 1\n\tend_if\n\n\tif I_CompareCounter army16_reinf_allied = 1\n\tand I_CompareCounter distance_trigger2 = 0\n\tand I_UnitDistanceFromUnit a16u1 a2u1 < 750\n\n\tset_counter army16_reinf_late 1\n\tset_counter distance_trigger2 1\n\tend_if\n\n\tif I_CompareCounter army16_reinf_allied = 1\n\tand I_CompareCounter distance_trigger3 = 0\n\tand I_UnitDistanceFromUnit a16u1 a2u1 < 500\n\n\tset_counter army16_reinf_late 1\n\tset_counter distance_trigger3 1\n\tend_if\n\n\tif I_CompareCounter army16_reinf_allied = 1\n\tand I_CompareCounter distance_trigger4 = 0\n\tand I_UnitDistanceFromUnit a16u1 a2u1 < 300\n\n\tset_counter army16_reinf_late 1\n\tset_counter distance_trigger4 1\n\tend_if\n\n\tif I_CompareCounter army16_reinf_allied = 1\n\tand I_CompareCounter distance_trigger5 = 0\n\tand I_UnitDistanceFromUnit a16u1 a2u1 < 200\n\n\tset_counter army16_reinf_late 1\n\tset_counter distance_trigger5 1\n\tend_if\n\n\tif I_CompareCounter army16_reinf_allied = 1\n\tand I_CompareCounter army16_reinf_late = 1\n\tand ! I_UnitEnemyUnitInRadius a16u1 160\n;\tand ! I_UnitGroupInRangeOfUnitGroup army2 army16\n\n\tset_counter army16_run 1\n\tbattle_wait 0.5\n\tset_counter army16_moving 1\n\tset_counter army16_reinf_late 0\n\tend_if\n\n\tif I_CompareCounter army16_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a16u1 a2u1 < 150\n\tand I_UnitEnemyUnitInRadius a2u1 100\n\n\tset_counter army16_reinf_allied 0\n\tunit_group_order_halt army16\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army16_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a16u1 a2u1 < 100\n\n\tset_counter army16_reinf_allied 0\n\tunit_group_order_halt army16\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army16_reinf_allied = 1\n\tand I_PercentageUnitKilled a16u1 > 60\n\n\tset_counter army16_reinf_allied 0\n\tunit_group_order_halt army16\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army16_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a16u1 a2u1 < 200\n\tand I_UnitDistanceFromUnit a2u1 a2u1 < 200\n\n\tset_counter army16_reinf_allied 0\n\tunit_group_order_halt army16\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army16_reinf_allied = 1\n\tand I_PercentageUnitGroupKilled army16 > 50\n\n\tset_counter army16_reinf_allied 0\n\tunit_group_order_halt army16\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army16_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a16u1 a2u1 < 250\n\tand I_UnitGroupInRangeOfUnit army16 a2u1\n\n\tset_counter army16_reinf_allied 0\n\tunit_group_order_halt army16\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army16_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a2u1 a16u1 < 250\n\tand I_IsUnitIdle a16u1\n\n\tset_counter army16_reinf_allied 0\n\tunit_group_order_halt army16\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army16_reinf_allied = 1\n\tand I_IsUnitRouting a2u1\n\n\tset_counter army16_reinf_allied 0\n\tunit_group_order_halt army16\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army16_reinf_allied = 1\n\tand I_PercentageUnitKilled a2u1 > 80\n\n\tset_counter army16_reinf_allied 0\n\tunit_group_order_halt army16\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army16_reinf_allied = 1\n\tand I_UnitDistanceFromUnit a2u1 a16u1 < 250\n\tand I_IsUnitUnderFire a16u1\n\n\tset_counter army16_reinf_allied 0\n\tunit_group_order_halt army16\n\tbattle_wait 0.5\n\tset_counter relaunch_movement 1\n\tend_if\n\n\tif I_CompareCounter army16_reinf_allied = 1\n\tand I_CompareCounter army16_run = 1\n\n;\tunit_group_order_halt army16\n\tbattle_wait 0.5\n\tunit_group_move_to_missile_range_of_unit army16 a2u1 run\n\tbattle_wait 0.5\n\tset_counter army16_run 0\n\tend_if\n\nend_if\n\n;\tif I_CompareCounter reinf_check_interval = 2\n;\tset_counter reinf_check_interval 0\n;\tend_if\n\tbattle_wait 5\nend_monitor\n\n;;;;;;; Defending Siege\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter def_alliance_ready_siege = 1\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_CompareCounter army4_ready_siege = 1\n\n;\tinc_counter reinf_check_interval 1\n\n\tif I_CompareCounter army4_ready_siege = 1\n\tand I_CompareCounter army4_moving_siege = 1\n\tand I_UnitEnemyUnitInRadius a4u1 160\n\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tai_active_set on\n\tset_counter army4_moving_siege 0\n\tend_if\n\n\tif I_CompareCounter army4_ready_siege = 1\n\tand I_CompareCounter army4_moving_siege = 1\n\tand ! I_UnitEnemyUnitInRadius a4u1 160\n\tand I_UnitDistanceFromUnit a2u1 a4u1 > 150\n\tand I_IsUnitIdle a4u1\n\n\tset_counter army4_run_siege 1\n\tbattle_wait 2\n\tset_counter army4_moving_siege 1\n\tend_if\n\n\tif I_CompareCounter army4_ready_siege = 1\n\tand I_CompareCounter army4_moving_siege = 0\n\tand ! I_UnitEnemyUnitInRadius a4u1 160\n\tand ! I_UnitGroupInRangeOfUnitGroup army2 army4\n\n\tset_counter army4_run_siege 1\n\tset_counter army4_moving_siege 1\n\tend_if\n\n\tif I_CompareCounter army4_ready_siege = 1\n\tand I_UnitDistanceFromUnit a4u1 a2u1 < 200\n\n\tset_counter army4_ready_siege 0\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\n\tif I_CompareCounter army4_ready_siege = 1\n\tand I_UnitDistanceFromPosition a4u1 1 1 < 150\n\n\tset_counter army4_ready_siege 0\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\n\tif I_CompareCounter army4_ready_siege = 1\n\tand I_UnitDistanceFromUnit a2u1 a4u1 < 250\n\tand I_IsUnitIdle a4u1\n\n\tset_counter army4_ready_siege 0\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\n\tif I_CompareCounter army4_ready_siege = 1\n\tand I_UnitDistanceFromUnit a2u1 a4u1 < 250\n\tand I_IsUnitUnderFire a4u1\n\n" +
                    "\tset_counter army4_ready_siege 0\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\n\tif I_CompareCounter army4_ready_siege = 1\n\tand I_PercentageUnitGroupKilled army4 > 50\n\n\tset_counter army4_ready_siege 0\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\n\tif I_CompareCounter army4_ready_siege = 1\n\tand I_CompareCounter army4_run_siege = 1\n\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tunit_group_order_move_formed army4 1 1 run\n\tset_counter army4_run_siege 0\n\tend_if\n\n;\tif I_CompareCounter reinf_check_interval = 2\n;\tset_counter reinf_check_interval 0\n;\tend_if\n\tbattle_wait 5\nend_monitor\n\n;;;;;;;;;;;Sally-out, AI defending\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter army4_ready_sally = 1\n\n\tif I_UnitDistanceFromPosition a4u1 0 850 < 200\n\tset_counter army4_location 1 ;north\n\tend_if\n\tif I_UnitDistanceFromPosition a4u1 0 -850 < 200\n\tset_counter army4_location 2 ;south\n\tend_if\n\tif I_UnitDistanceFromPosition a4u1 -850 0 < 200\n\tset_counter army4_location 3 ;west\n\tend_if\n\tif I_UnitDistanceFromPosition a4u1 850 0 < 200\n\tset_counter army4_location 4 ;east\n\tend_if\n\tif I_UnitDistanceFromPosition a4u1 -850 850 < 200\n\tset_counter army4_location 5 ;nw\n\tend_if\n\tif I_UnitDistanceFromPosition a4u1 850 850 < 200\n\tset_counter army4_location 6 ;ne\n\tend_if\n\tif I_UnitDistanceFromPosition a4u1 -850 850 < 200\n\tset_counter army4_location 7 ;sw\n\tend_if\n\tif I_UnitDistanceFromPosition a4u1 850 -850 < 200\n\tset_counter army4_location 8 ;se\n\tend_if\n\n\tif I_CompareCounter army4_location = 1\n\tand I_CompareCounter army_west = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_n 1\n\tset_counter path_w 2\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_n 1\n\tset_counter path_nw 2\n\tset_counter path_w 3\n\tend_if\n\tend_if\n\tif I_CompareCounter army4_location = 1\n\tand I_CompareCounter army_south = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_n 1\n\tset_counter path_w 2\n\tset_counter path_s 3\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_n 1\n\tset_counter path_nw 2\n\tset_counter path_w 3\n\tset_counter path_sw 4\n\tset_counter path_s 5\n\tend_if\n\tend_if\n\tif I_CompareCounter army4_location = 1\n\tand I_CompareCounter army_east = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_n 1\n\tset_counter path_e 2\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_n 1\n\tset_counter path_ne 2\n\tset_counter path_e 3\n\tend_if\n\tend_if\n\tif I_CompareCounter army4_location = 2\n\tand I_CompareCounter army_west = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_s 1\n\tset_counter path_w 2\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_s 1\n\tset_counter path_sw 2\n\tset_counter path_w 3\n\tend_if\n\tend_if\n\tif I_CompareCounter army4_location = 2\n\tand I_CompareCounter army_north = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_s 1\n\tset_counter path_w 2\n\tset_counter path_n 3\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_s 1\n\tset_counter path_sw 2\n\tset_counter path_w 3\n\tset_counter path_nw 4\n\tset_counter path_n 5\n\tend_if\n\tend_if\n\n\tif I_CompareCounter army4_location = 2\n\tand I_CompareCounter army_east = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_s 1\n\tset_counter path_e 2\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_s 1\n\tset_counter path_se 2\n\tset_counter path_e 3\n\tend_if\n\tend_if\n\tif I_CompareCounter army4_location = 3\n\tand I_CompareCounter army_north = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_w 1\n\tset_counter path_n 2\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_w 1\n\tset_counter path_nw 2\n\tset_counter path_n 3\n\tend_if\n\tend_if\n\tif I_CompareCounter army4_location = 3\n\tand I_CompareCounter army_east = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_w 1\n\tset_counter path_n 2\n\tset_counter path_e 3\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_w 1\n\tset_counter path_nw 2\n\tset_counter path_n 3\n\tset_counter path_ne 4\n\tset_counter path_e 5\n\tend_if\n\tend_if\n\tif I_CompareCounter army4_location = 3\n\tand I_CompareCounter army_south = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_w 1\n\tset_counter path_s 2\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_w 1\n\tset_counter path_sw 2\n\tset_counter path_s 3\n\tend_if\n\tend_if\n\n\tif I_CompareCounter army4_location = 4\n\tand I_CompareCounter army_south = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_e 1\n\tset_counter path_s 2\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_e 1\n\tset_counter path_se 2\n\tset_counter path_s 3\n\tend_if\n\tend_if\n\tif I_CompareCounter army4_location = 4\n\tand I_CompareCounter army_west = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_e 1\n\tset_counter path_s 2\n\tset_counter path_w 3\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_e 1\n\tset_counter path_se 2\n\tset_counter path_s 3\n\tset_counter path_sw 4\n\tset_counter path_w 5\n\tend_if\n\tend_if\n\tif I_CompareCounter army4_location = 4\n\tand I_CompareCounter army_north = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_e 1\n\tset_counter path_n 2\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_e 1\n\tset_counter path_ne 2\n\tset_counter path_n 3\n\tend_if\n\tend_if\n\n\tif I_CompareCounter army4_location = 5 ;nw\n\tand I_CompareCounter army_north = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_n 1\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_n 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter army4_location = 5\n\tand I_CompareCounter army_west = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_w 1\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_w 1\n\tend_if\n\tend_if\n" +
                    "\tif I_CompareCounter army4_location = 5\n\tand I_CompareCounter army_south = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_w 1\n\tset_counter path_s 2\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_w 1\n\tset_counter path_sw 2\n\tset_counter path_s 3\n\tend_if\n\tend_if\n\tif I_CompareCounter army4_location = 5\n\tand I_CompareCounter army_east = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_n 1\n\tset_counter path_e 2\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_n 1\n\tset_counter path_ne 2\n\tset_counter path_e 3\n\tend_if\n\tend_if\n\n\tif I_CompareCounter army4_location = 6 ;ne\n\tand I_CompareCounter army_west = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_n 1\n\tset_counter path_w 2\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_n 1\n\tset_counter path_nw 2\n\tset_counter path_w 3\n\tend_if\n\tend_if\n\tif I_CompareCounter army4_location = 6\n\tand I_CompareCounter army_north = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_n 1\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_n 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter army4_location = 6\n\tand I_CompareCounter army_east = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_e 1\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_e 1\n\tend_if\n\tend_if\n\tif I_CompareCounter army4_location = 6\n\tand I_CompareCounter army_south = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_e 1\n\tset_counter path_s 2\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_e 1\n\tset_counter path_se 2\n\tset_counter path_s 3\n\tend_if\n\tend_if\n\tif I_CompareCounter army4_location = 7 ;sw\n\tand I_CompareCounter army_north = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_w 1\n\tset_counter path_n 2\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_w 1\n\tset_counter path_nw 2\n\tset_counter path_n 3\n\tend_if\n\tend_if\n\tif I_CompareCounter army4_location = 7\n\tand I_CompareCounter army_east = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_s 1\n\tset_counter path_e 2\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_s 1\n\tset_counter path_se 2\n\tset_counter path_e 3\n\tend_if\n\tend_if\n\tif I_CompareCounter army4_location = 7\n\tand I_CompareCounter army_south = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_s 1\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_s 1\n\tend_if\n\tend_if\n\tif I_CompareCounter army4_location = 7\n\tand I_CompareCounter army_west = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_w 1\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_w 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter army4_location = 8 ;se\n\tand I_CompareCounter army_south = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_s 1\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_s 1\n\tend_if\n\tend_if\n\tif I_CompareCounter army4_location = 8\n\tand I_CompareCounter army_west = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_s 1\n\tset_counter path_w 2\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_s 1\n\tset_counter path_sw 2\n\tset_counter path_w 3\n\tend_if\n\tend_if\n\tif I_CompareCounter army4_location = 8\n\tand I_CompareCounter army_north = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_e 1\n\tset_counter path_n 2\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_e 1\n\tset_counter path_ne 2\n\tset_counter path_n 3\n\tend_if\n\tend_if\n\tif I_CompareCounter army4_location = 8\n\tand I_CompareCounter army_east = 1\n\tif I_BattleSettlementFortificationLevel < 2\n\tset_counter path_e 1\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 1\n\tset_counter path_e 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter army4_location = 1\n\tand I_CompareCounter army_north = 1\n\tset_counter army4_ready_sally 3\n\tset_counter army4_ready 0\n\tend_if\n\tif I_CompareCounter army4_location = 2\n\tand I_CompareCounter army_south = 1\n\tset_counter army4_ready_sally 3\n\tset_counter army4_ready 0\n\tend_if\n\tif I_CompareCounter army4_location = 3\n\tand I_CompareCounter army_west = 1\n\tset_counter army4_ready_sally 3\n\tset_counter army4_ready 0\n\tend_if\n\n\tif I_CompareCounter army4_location = 4\n\tand I_CompareCounter army_east = 1\n\tset_counter army4_ready_sally 3\n\tset_counter army4_ready 0\n\tend_if\n\tif I_CompareCounter army4_ready_sally = 1\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tunit_group_order_change_group_formation army4 ai_infantry_protecting\n;\tbattle_wait 45\n\tbattle_wait 20\n\tif I_CompareCounter army4_ready_sally = 1\n\tand I_BattleIsSallyOutBattle\n\tbattle_wait 25\n\tend_if\n\tif I_CompareCounter army4_ready_sally = 1\n\tand I_BattleIsSallyOutBattle\n\tset_counter army4_ready_sally 2\n\tend_if\n\tend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter label_army4 = 1\n\n\tlabel_unit 1 1 0 a4u1\n\tlabel_unit 1 1 1 a4u2\n\tlabel_unit 1 1 2 a4u3\n\tlabel_unit 1 1 3 a4u4\n\tlabel_unit 1 1 4 a4u5\n\tlabel_unit 1 1 5 a4u6\n\tlabel_unit 1 1 6 a4u7\n\tlabel_unit 1 1 7 a4u8\n\tlabel_unit 1 1 8 a4u9\n\tlabel_unit 1 1 9 a4u10\n\tlabel_unit 1 1 10 a4u11\n\tlabel_unit 1 1 11 a4u12\n\tlabel_unit 1 1 12 a4u13\n\tlabel_unit 1 1 13 a4u14\n\tlabel_unit 1 1 14 a4u15\n\tlabel_unit 1 1 15 a4u16\n\tlabel_unit 1 1 16 a4u17\n\tlabel_unit 1 1 17 a4u18\n\tlabel_unit 1 1 18 a4u19\n\tlabel_unit 1 1 19 a4u20\n\n;\tunit_group_order_halt army4\n\tset_counter label_army4 0\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter army4_moving_s = 1\n\tand I_UnitEnemyUnitInRadius a4u1 130\n\tand ! I_UnitGroupInRangeOfUnitGroup army2 army4\n\n\tunit_group_order_halt army4\n;\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\n\tset_counter army4_moving_s 0\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter path_n = 1\n\tand ! I_UnitEnemyUnitInRadius a4u1 130\n\n\tif I_UnitGroupDistanceFromPosition army4 0 700 > 100\n\tand I_BattleSettlementFortificationLevel > 2\n\tset_counter label_army4 1\n\tbattle_wait 0.5\n\tunit_group_order_move_formed army4 0 700 run\n\tset_counter army4_moving_s 1\n\tend_if\n\n\tif I_UnitGroupDistanceFromPosition army4 0 500 > 100\n\tand I_BattleSettlementFortificationLevel < 3\n\tset_counter label_army4 1\n\tbattle_wait 0.5\n\tunit_group_order_move_formed army4 0 500 run\n\tset_counter army4_moving_s 1\n\tend_if\n\n\tif I_UnitGroupDistanceFromPosition army4 0 700 < 100\n\tand I_BattleSettlementFortificationLevel > 2\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tif I_UnitGroupDistanceFromPosition army4 0 700 < 100\n\tset_counter path_n 0\n\tif I_CompareCounter path_nw > 1\n\tset_counter path_nw 1\n\tend_if\n\tif I_CompareCounter path_ne > 1\n\tset_counter path_ne 1\n\tend_if\n\tif I_CompareCounter path_nw = 0\n\tand I_CompareCounter path_ne = 0\n\tset_counter army4_ready_sally 3\n\tset_counter army4_ready 0\n\tend_if\n\tend_if\n\tend_if\n\n\tif I_UnitGroupDistanceFromPosition army4 0 500 < 100\n\tand I_BattleSettlementFortificationLevel < 3\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tif I_UnitGroupDistanceFromPosition army4 0 500 < 100\n" +
                    "\tset_counter path_n 0\n\tif I_CompareCounter path_w > 1\n\tset_counter path_w 1\n\tend_if\n\tif I_CompareCounter path_e > 1\n\tset_counter path_e 1\n\tend_if\n\tif I_CompareCounter path_w = 0\n\tand I_CompareCounter path_e = 0\n\tset_counter army4_ready_sally 3\n\tset_counter army4_ready 0\n\tend_if\n\tend_if\n\tend_if\n\n\tbattle_wait 30\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter path_s = 1\n\tand ! I_UnitEnemyUnitInRadius a4u1 130\n\n\tif I_UnitGroupDistanceFromPosition army4 0 -700 > 100\n\tand I_BattleSettlementFortificationLevel > 2\n\tset_counter label_army4 1\n\tbattle_wait 0.5\n\tunit_group_order_move_formed army4 0 -700 run\n\tset_counter army4_moving_s 1\n\tend_if\n\n\tif I_UnitGroupDistanceFromPosition army4 0 -500 > 100\n\tand I_BattleSettlementFortificationLevel < 3\n\tset_counter label_army4 1\n\tbattle_wait 0.5\n\tunit_group_order_move_formed army4 0 -500 run\n\tset_counter army4_moving_s 1\n\tend_if\n\n\tif I_UnitGroupDistanceFromPosition army4 0 -700 < 100\n\tand I_BattleSettlementFortificationLevel > 2\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tif I_UnitGroupDistanceFromPosition army4 0 -700 < 100\n\tset_counter path_s 0\n\tif I_CompareCounter path_sw > 1\n\tset_counter path_sw 1\n\tend_if\n\tif I_CompareCounter path_se > 1\n" +
                    "\tset_counter path_se 1\n\tend_if\n\tif I_CompareCounter path_sw = 0\n\tand I_CompareCounter path_se = 0\n\tset_counter army4_ready_sally 3\n\tset_counter army4_ready 0\n\tend_if\n\tend_if\n\tend_if\n\n\tif I_UnitGroupDistanceFromPosition army4 0 -500 < 100\n\tand I_BattleSettlementFortificationLevel < 3\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tif I_UnitGroupDistanceFromPosition army4 0 -500 < 100\n\tset_counter path_s 0\n\tif I_CompareCounter path_w > 1\n\tset_counter path_w 1\n\tend_if\n\tif I_CompareCounter path_e > 1\n\tset_counter path_e 1\n\tend_if\n\tif I_CompareCounter path_w = 0\n\tand I_CompareCounter path_e = 0\n\tset_counter army4_ready_sally 3\n\tset_counter army4_ready 0\n\tend_if\n\tend_if\n\tend_if\n\n\tbattle_wait 20\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter path_w = 1\n\tand ! I_UnitEnemyUnitInRadius a4u1 130\n\n\tif I_UnitGroupDistanceFromPosition army4 -700 0 > 100\n\tand I_BattleSettlementFortificationLevel > 2\n\tset_counter label_army4 1\n\tbattle_wait 0.5\n\tunit_group_order_move_formed army4 -700 0 run\n\tset_counter army4_moving_s 1\n\tend_if\n\n\tif I_UnitGroupDistanceFromPosition army4 -500 0 > 100\n\tand I_BattleSettlementFortificationLevel < 3\n\tset_counter label_army4 1\n\tbattle_wait 0.5\n\tunit_group_order_move_formed army4 -500 0 run\n\tset_counter army4_moving_s 1\n\tend_if\n\n\tif I_UnitGroupDistanceFromPosition army4 -700 0 < 100\n\tand I_BattleSettlementFortificationLevel > 2\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tif I_UnitGroupDistanceFromPosition army4 -700 0 < 100\n\tset_counter path_w 0\n\tif I_CompareCounter path_nw > 1\n\tset_counter path_nw 1\n\tend_if\n\tif I_CompareCounter path_sw > 1\n\tset_counter path_sw 1\n\tend_if\n\tif I_CompareCounter path_nw = 0\n\tand I_CompareCounter path_sw = 0\n\tset_counter army4_ready_sally 3\n\tset_counter army4_ready 0\n\tend_if\n\tend_if\n\tend_if\n\n\tif I_UnitGroupDistanceFromPosition army4 -500 0 < 100\n\tand I_BattleSettlementFortificationLevel < 3\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tif I_UnitGroupDistanceFromPosition army4 -500 0 < 100\n\tset_counter path_w 0\n\tif I_CompareCounter path_n > 1\n\tset_counter path_n 1\n\tend_if\n\tif I_CompareCounter path_s > 1\n\tset_counter path_s 1\n\tend_if\n\tif I_CompareCounter path_n = 0\n\tand I_CompareCounter path_s = 0\n\tset_counter army4_ready_sally 3\n\tset_counter army4_ready 0\n\tend_if\n\tend_if\n\tend_if\n\n\tbattle_wait 20\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter path_e = 1\n\tand ! I_UnitEnemyUnitInRadius a4u1 130\n\n\tif I_UnitGroupDistanceFromPosition army4 700 0 > 100\n\tand I_BattleSettlementFortificationLevel > 2\n\tset_counter label_army4 1\n\tbattle_wait 0.5\n\tunit_group_order_move_formed army4 700 0 run\n\tset_counter army4_moving_s 1\n\tend_if\n\n\tif I_UnitGroupDistanceFromPosition army4 500 0 > 100\n\tand I_BattleSettlementFortificationLevel < 3\n\tset_counter label_army4 1\n\tbattle_wait 0.5\n\tunit_group_order_move_formed army4 500 0 run\n\tset_counter army4_moving_s 1\n\tend_if\n\n\tif I_UnitGroupDistanceFromPosition army4 700 0 < 100\n\tand I_BattleSettlementFortificationLevel > 2\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tif I_UnitGroupDistanceFromPosition army4 700 0 < 100\n\tset_counter path_e 0\n\tif I_CompareCounter path_ne > 1\n\tset_counter path_ne 1\n\tend_if\n\tif I_CompareCounter path_se > 1\n\tset_counter path_se 1\n\tend_if\n\tif I_CompareCounter path_ne = 0\n\tand I_CompareCounter path_se = 0\n\tset_counter army4_ready_sally 3\n\tset_counter army4_ready 0\n\tend_if\n\tend_if\n\tend_if\n\n\tif I_UnitGroupDistanceFromPosition army4 500 0 < 100\n\tand I_BattleSettlementFortificationLevel < 3\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tif I_UnitGroupDistanceFromPosition army4 500 0 < 100\n\tset_counter path_e 0\n\tif I_CompareCounter path_n > 1\n\tset_counter path_n 1\n\tend_if\n\tif I_CompareCounter path_s > 1\n\tset_counter path_s 1\n\tend_if\n\tif I_CompareCounter path_n = 0\n\tand I_CompareCounter path_s = 0\n\tset_counter army4_ready_sally 3\n\tset_counter army4_ready 0\n\tend_if\n\tend_if\n\tend_if\n\n\tbattle_wait 20\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter path_nw = 1\n\tand I_BattleSettlementFortificationLevel > 2\n\tand ! I_UnitEnemyUnitInRadius a4u1 130\n\n\tif I_UnitGroupDistanceFromPosition army4 -700 700 > 100\n\tset_counter label_army4 1\n\tbattle_wait 0.5\n\tunit_group_order_move_formed army4 -700 700 run\n\tset_counter army4_moving_s 1\n\tend_if\n\n\tif I_UnitGroupDistanceFromPosition army4 -700 700 < 100\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tif I_UnitGroupDistanceFromPosition army4 -700 700 < 100\n\tset_counter path_nw 0\n\tif I_CompareCounter path_n > 1\n\tset_counter path_n 1\n\tend_if\n\tif I_CompareCounter path_w > 1\n\tset_counter path_w 1\n\tend_if\n\tif I_CompareCounter path_n = 0\n\tand I_CompareCounter path_w = 0\n\tset_counter army4_ready_sally 3\n\tset_counter army4_ready 0\n\tend_if\n\tend_if\n\tend_if\n\n\tbattle_wait 20\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter path_ne = 1\n\tand I_BattleSettlementFortificationLevel > 2\n\tand ! I_UnitEnemyUnitInRadius a4u1 130\n\n\tif I_UnitGroupDistanceFromPosition army4 700 700 > 100\n\tset_counter label_army4 1\n\tbattle_wait 0.5\n\tunit_group_order_move_formed army4 700 700 run\n\tset_counter army4_moving_s 1\n\tend_if\n\n\tif I_UnitGroupDistanceFromPosition army4 700 700 < 100\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tif I_UnitGroupDistanceFromPosition army4 700 700 < 100\n\tset_counter path_ne 0\n\tif I_CompareCounter path_e > 1\n\tset_counter path_e 1\n\tend_if\n\tif I_CompareCounter path_n > 1\n\tset_counter path_n 1\n\tend_if\n\tif I_CompareCounter path_e = 0\n\tand I_CompareCounter path_n = 0\n\tset_counter army4_ready_sally 3\n\tset_counter army4_ready 0\n\tend_if\n\tend_if\n\tend_if\n\n\tbattle_wait 20\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter path_sw = 1\n\tand I_BattleSettlementFortificationLevel > 2\n\tand ! I_UnitEnemyUnitInRadius a4u1 130\n\n\tif I_UnitGroupDistanceFromPosition army4 -700 -700 > 100\n\tset_counter label_army4 1\n\tbattle_wait 0.5\n\tunit_group_order_move_formed army4 -700 -700 run\n\tset_counter army4_moving_s 1\n\tend_if\n\n\tif I_UnitGroupDistanceFromPosition army4 -700 -700 < 100\n\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tif I_UnitGroupDistanceFromPosition army4 -700 -700 < 100\n\tset_counter path_sw 0\n\tif I_CompareCounter path_w > 1\n\tset_counter path_w 1\n\tend_if\n\tif I_CompareCounter path_s > 1\n\tset_counter path_s 1\n\tend_if\n\tif I_CompareCounter path_w = 0\n\tand I_CompareCounter path_s = 0\n\tset_counter army4_ready_sally 3\n\tset_counter army4_ready 0\n\tend_if\n\tend_if\n\tend_if\n\n\tbattle_wait 20\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter path_se = 1\n\tand I_BattleSettlementFortificationLevel > 2\n\tand ! I_UnitEnemyUnitInRadius a4u1 130\n\n\tif I_UnitGroupDistanceFromPosition army4 700 -700 > 100\n\tset_counter label_army4 1\n\tbattle_wait 0.5\n\tunit_group_order_move_formed army4 700 -700 run\n\tset_counter army4_moving_s 1\n\tend_if\n\n\tif I_UnitGroupDistanceFromPosition army4 700 -700 < 100\n" +
                    "\tunit_group_order_halt army4\n\tbattle_wait 0.5\n\tif I_UnitGroupDistanceFromPosition army4 700 -700 < 100\n\tset_counter path_se 0\n\tif I_CompareCounter path_s > 1\n\tset_counter path_s 1\n\tend_if\n\tif I_CompareCounter path_e > 1\n\tset_counter path_e 1\n\tend_if\n\tif I_CompareCounter path_s = 0\n\tand I_CompareCounter path_e = 0\n\tset_counter army4_ready_sally 3\n\tset_counter army4_ready 0\n\tend_if\n\tend_if\n\tend_if\n\n\tbattle_wait 20\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter army4_ready_sally = 3\n\n\tset_counter army4_ready_sally 0\n\tunit_group_order_halt army4\n ;   ai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_IsUnitRouting a4u1\n\n\tset_counter army4_ready_sally 3\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_PercentageUnitKilled a4u1 > 80\n\n\tset_counter army4_ready_sally 3\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter army4_ready_sally = 2\n\n\tif I_IsUnitGroupIdle army4\n\tinc_counter army4_idle_r 1\n\tend_if\n\n\tif ! I_IsUnitGroupIdle army4\n\tset_counter army4_idle_r 0\n\tend_if\n\n\tif I_CompareCounter army4_idle_r > 12\n\tset_counter army4_ready_sally 0\n\tend_if\n\tbattle_wait 10\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter army4_ready_sally = 2\n\tand ! I_UnitEnemyUnitInRadius a4u1 130\n\tand I_CompareCounter path_n = 1\n\n\tset_counter check_timer 1\n;\tbattle_wait 600\n\tbattle_wait 30\n\tif I_CompareCounter path_n = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 1\n\tset_counter check_timer 2\n\tbattle_wait 30\n\tif I_CompareCounter path_n = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 2\n\tset_counter check_timer 3\n\tbattle_wait 30\n\tif I_CompareCounter path_n = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 3\n\tset_counter check_timer 4\n\tbattle_wait 30\n\tif I_CompareCounter path_n = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 4\n\tset_counter check_timer 5\n\tbattle_wait 30\n\tif I_CompareCounter path_n = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 5\n\tset_counter check_timer 6\n\tbattle_wait 30\n\tif I_CompareCounter path_n = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 6\n\tset_counter check_timer 7\n\tbattle_wait 30\n\tif I_CompareCounter path_n = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 7\n\tset_counter check_timer 8\n\tbattle_wait 30\n\tif I_CompareCounter path_n = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 8\n\tset_counter check_timer 9\n\tbattle_wait 30\n\tif I_CompareCounter path_n = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 9\n\tset_counter check_timer 10\n\tbattle_wait 30\n\tif I_CompareCounter path_n = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 10\n\tset_counter check_timer 11\n\tbattle_wait 30\n\tif I_CompareCounter path_n = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 11\n\tset_counter check_timer 12\n\tbattle_wait 30\n\tif I_CompareCounter path_n = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 12\n\tset_counter check_timer 13\n\tbattle_wait 30\n\tif I_CompareCounter path_n = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 13\n\tset_counter check_timer 14\n\tbattle_wait 30\n\tif I_CompareCounter path_n = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 14\n\tset_counter check_timer 15\n\tbattle_wait 30\n\tif I_CompareCounter path_n = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 15\n\tset_counter check_timer 16\n\tbattle_wait 30\n\tif I_CompareCounter path_n = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 16\n\tset_counter check_timer 17\n\tbattle_wait 30\n\tif I_CompareCounter path_n = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 17\n\tset_counter check_timer 18\n\tbattle_wait 30\n\tif I_CompareCounter path_n = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 18\n\tset_counter check_timer 19\n\tbattle_wait 30\n\tif I_CompareCounter path_n = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 19\n\tset_counter check_timer 20\n\tbattle_wait 30\n\tif I_CompareCounter path_n = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 20\n\tset_counter path_n 0\n\tset_counter sally_reinf 0\n\tset_counter army4_ready_sally 0\n\tset_counter label_army4 1\n;\tbattle_wait 0.5\n;\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter army4_ready_sally = 2\n\tand ! I_UnitEnemyUnitInRadius a4u1 130\n\tand I_CompareCounter path_s = 1\n\n\tset_counter check_timer 1\n;\tbattle_wait 600\n\tbattle_wait 30\n\tif I_CompareCounter path_s = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 1\n\tset_counter check_timer 2\n\tbattle_wait 30\n\tif I_CompareCounter path_s = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 2\n\tset_counter check_timer 3\n\tbattle_wait 30\n\tif I_CompareCounter path_s = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 3\n\tset_counter check_timer 4\n\tbattle_wait 30\n\tif I_CompareCounter path_s = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 4\n\tset_counter check_timer 5\n\tbattle_wait 30\n\tif I_CompareCounter path_s = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 5\n\tset_counter check_timer 6\n" +
                    "\tbattle_wait 30\n\tif I_CompareCounter path_s = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 6\n\tset_counter check_timer 7\n\tbattle_wait 30\n\tif I_CompareCounter path_s = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 7\n\tset_counter check_timer 8\n\tbattle_wait 30\n\tif I_CompareCounter path_s = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 8\n\tset_counter check_timer 9\n\tbattle_wait 30\n\tif I_CompareCounter path_s = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 9\n\tset_counter check_timer 10\n\tbattle_wait 30\n\tif I_CompareCounter path_s = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 10\n\tset_counter check_timer 11\n\tbattle_wait 30\n\tif I_CompareCounter path_s = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 11\n\tset_counter check_timer 12\n\tbattle_wait 30\n\tif I_CompareCounter path_s = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 12\n\tset_counter check_timer 13\n\tbattle_wait 30\n\tif I_CompareCounter path_s = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 13\n\tset_counter check_timer 14\n\tbattle_wait 30\n\tif I_CompareCounter path_s = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 14\n\tset_counter check_timer 15\n\tbattle_wait 30\n\tif I_CompareCounter path_s = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 15\n\tset_counter check_timer 16\n\tbattle_wait 30\n\tif I_CompareCounter path_s = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 16\n\tset_counter check_timer 17\n\tbattle_wait 30\n\tif I_CompareCounter path_s = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 17\n\tset_counter check_timer 18\n\tbattle_wait 30\n\tif I_CompareCounter path_s = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 18\n\tset_counter check_timer 19\n\tbattle_wait 30\n\tif I_CompareCounter path_s = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 19\n\tset_counter check_timer 20\n\tbattle_wait 30\n\tif I_CompareCounter path_s = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 20\n\tset_counter path_s 0\n\tset_counter sally_reinf 0\n\tset_counter army4_ready_sally 0\n\tset_counter label_army4 1\n;\tbattle_wait 0.5\n;\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter army4_ready_sally = 2\n\tand ! I_UnitEnemyUnitInRadius a4u1 130\n\tand I_CompareCounter path_w = 1\n\n\tset_counter check_timer 1\n;\tbattle_wait 600\n\tbattle_wait 30\n\tif I_CompareCounter path_w = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 1\n\tset_counter check_timer 2\n\tbattle_wait 30\n\tif I_CompareCounter path_w = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 2\n\tset_counter check_timer 3\n\tbattle_wait 30\n\tif I_CompareCounter path_w = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 3\n\tset_counter check_timer 4\n\tbattle_wait 30\n\tif I_CompareCounter path_w = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 4\n\tset_counter check_timer 5\n\tbattle_wait 30\n\tif I_CompareCounter path_w = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 5\n\tset_counter check_timer 6\n\tbattle_wait 30\n\tif I_CompareCounter path_w = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 6\n\tset_counter check_timer 7\n\tbattle_wait 30\n\tif I_CompareCounter path_w = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 7\n\tset_counter check_timer 8\n\tbattle_wait 30\n\tif I_CompareCounter path_w = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 8\n\tset_counter check_timer 9\n\tbattle_wait 30\n\tif I_CompareCounter path_w = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 9\n\tset_counter check_timer 10\n\tbattle_wait 30\n\tif I_CompareCounter path_w = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 10\n\tset_counter check_timer 11\n\tbattle_wait 30\n\tif I_CompareCounter path_w = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 11\n\tset_counter check_timer 12\n\tbattle_wait 30\n\tif I_CompareCounter path_w = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 12\n\tset_counter check_timer 13\n\tbattle_wait 30\n\tif I_CompareCounter path_w = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 13\n\tset_counter check_timer 14\n\tbattle_wait 30\n\tif I_CompareCounter path_w = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 14\n\tset_counter check_timer 15\n\tbattle_wait 30\n\tif I_CompareCounter path_w = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 15\n\tset_counter check_timer 16\n\tbattle_wait 30\n\tif I_CompareCounter path_w = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 16\n\tset_counter check_timer 17\n\tbattle_wait 30\n\tif I_CompareCounter path_w = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 17\n\tset_counter check_timer 18\n\tbattle_wait 30\n\tif I_CompareCounter path_w = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 18\n\tset_counter check_timer 19\n\tbattle_wait 30\n\tif I_CompareCounter path_w = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 19\n\tset_counter check_timer 20\n\tbattle_wait 30\n\tif I_CompareCounter path_w = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 20\n\tset_counter path_w 0\n\tset_counter sally_reinf 0\n\tset_counter army4_ready_sally 0\n\tset_counter label_army4 1\n;\tbattle_wait 0.5\n;\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter army4_ready_sally = 2\n\tand ! I_UnitEnemyUnitInRadius a4u1 130\n\tand I_CompareCounter path_e = 1\n\n\tset_counter check_timer 1\n;\tbattle_wait 600\n\tbattle_wait 30\n\tif I_CompareCounter path_e = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 1\n\tset_counter check_timer 2\n\tbattle_wait 30\n\tif I_CompareCounter path_e = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 2\n\tset_counter check_timer 3\n\tbattle_wait 30\n\tif I_CompareCounter path_e = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 3\n\tset_counter check_timer 4\n\tbattle_wait 30\n\tif I_CompareCounter path_e = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 4\n\tset_counter check_timer 5\n" +
                    "\tbattle_wait 30\n\tif I_CompareCounter path_e = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 5\n\tset_counter check_timer 6\n\tbattle_wait 30\n\tif I_CompareCounter path_e = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 6\n\tset_counter check_timer 7\n\tbattle_wait 30\n\tif I_CompareCounter path_e = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 7\n\tset_counter check_timer 8\n\tbattle_wait 30\n\tif I_CompareCounter path_e = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 8\n\tset_counter check_timer 9\n\tbattle_wait 30\n\tif I_CompareCounter path_e = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 9\n\tset_counter check_timer 10\n\tbattle_wait 30\n\tif I_CompareCounter path_e = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 10\n\tset_counter check_timer 11\n\tbattle_wait 30\n\tif I_CompareCounter path_e = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 11\n\tset_counter check_timer 12\n\tbattle_wait 30\n\tif I_CompareCounter path_e = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 12\n\tset_counter check_timer 13\n\tbattle_wait 30\n\tif I_CompareCounter path_e = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 13\n\tset_counter check_timer 14\n\tbattle_wait 30\n\tif I_CompareCounter path_e = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 14\n\tset_counter check_timer 15\n\tbattle_wait 30\n\tif I_CompareCounter path_e = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 15\n\tset_counter check_timer 16\n\tbattle_wait 30\n\tif I_CompareCounter path_e = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 16\n\tset_counter check_timer 17\n\tbattle_wait 30\n\tif I_CompareCounter path_e = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 17\n\tset_counter check_timer 18\n\tbattle_wait 30\n\tif I_CompareCounter path_e = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 18\n\tset_counter check_timer 19\n\tbattle_wait 30\n\tif I_CompareCounter path_e = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 19\n\tset_counter check_timer 20\n\tbattle_wait 30\n\tif I_CompareCounter path_e = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 20\n\tset_counter path_e 0\n\tset_counter sally_reinf 0\n\tset_counter army4_ready_sally 0\n\tset_counter label_army4 1\n;\tbattle_wait 0.5\n ;   ai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter army4_ready_sally = 2\n\tand ! I_UnitEnemyUnitInRadius a4u1 130\n\tand I_CompareCounter path_nw = 1\n\n\tset_counter check_timer 1\n;\tbattle_wait 600\n\tbattle_wait 30\n\tif I_CompareCounter path_nw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 1\n\tset_counter check_timer 2\n\tbattle_wait 30\n\tif I_CompareCounter path_nw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 2\n\tset_counter check_timer 3\n\tbattle_wait 30\n\tif I_CompareCounter path_nw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 3\n\tset_counter check_timer 4\n\tbattle_wait 30\n\tif I_CompareCounter path_nw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 4\n\tset_counter check_timer 5\n\tbattle_wait 30\n\tif I_CompareCounter path_nw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 5\n\tset_counter check_timer 6\n\tbattle_wait 30\n\tif I_CompareCounter path_nw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 6\n\tset_counter check_timer 7\n\tbattle_wait 30\n\tif I_CompareCounter path_nw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 7\n\tset_counter check_timer 8\n\tbattle_wait 30\n\tif I_CompareCounter path_nw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 8\n\tset_counter check_timer 9\n\tbattle_wait 30\n\tif I_CompareCounter path_nw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 9\n\tset_counter check_timer 10\n\tbattle_wait 30\n\tif I_CompareCounter path_nw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 10\n\tset_counter check_timer 11\n\tbattle_wait 30\n\tif I_CompareCounter path_nw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 11\n\tset_counter check_timer 12\n\tbattle_wait 30\n\tif I_CompareCounter path_nw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 12\n\tset_counter check_timer 13\n\tbattle_wait 30\n\tif I_CompareCounter path_nw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n" +
                    "\tand I_CompareCounter check_timer = 13\n\tset_counter check_timer 14\n\tbattle_wait 30\n\tif I_CompareCounter path_nw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 14\n\tset_counter check_timer 15\n\tbattle_wait 30\n\tif I_CompareCounter path_nw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 15\n\tset_counter check_timer 16\n\tbattle_wait 30\n\tif I_CompareCounter path_nw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 16\n\tset_counter check_timer 17\n\tbattle_wait 30\n\tif I_CompareCounter path_nw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 17\n\tset_counter check_timer 18\n\tbattle_wait 30\n\tif I_CompareCounter path_nw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 18\n\tset_counter check_timer 19\n\tbattle_wait 30\n\tif I_CompareCounter path_nw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 19\n\tset_counter check_timer 20\n\tbattle_wait 30\n\tif I_CompareCounter path_nw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 20\n\tset_counter path_nw 0\n\tset_counter sally_reinf 0\n\tset_counter army4_ready_sally 0\n\tset_counter label_army4 1\n;\tbattle_wait 0.5\n;\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter army4_ready_sally = 2\n\tand ! I_UnitEnemyUnitInRadius a4u1 130\n\tand I_CompareCounter path_ne = 1\n\n\tset_counter check_timer 1\n;\tbattle_wait 600\n\tbattle_wait 30\n\tif I_CompareCounter path_ne = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 1\n\tset_counter check_timer 2\n\tbattle_wait 30\n\tif I_CompareCounter path_ne = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 2\n\tset_counter check_timer 3\n\tbattle_wait 30\n\tif I_CompareCounter path_ne = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 3\n\tset_counter check_timer 4\n\tbattle_wait 30\n\tif I_CompareCounter path_ne = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 4\n\tset_counter check_timer 5\n\tbattle_wait 30\n\tif I_CompareCounter path_ne = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 5\n\tset_counter check_timer 6\n\tbattle_wait 30\n\tif I_CompareCounter path_ne = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 6\n\tset_counter check_timer 7\n\tbattle_wait 30\n\tif I_CompareCounter path_ne = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 7\n\tset_counter check_timer 8\n\tbattle_wait 30\n\tif I_CompareCounter path_ne = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 8\n\tset_counter check_timer 9\n\tbattle_wait 30\n\tif I_CompareCounter path_ne = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 9\n\tset_counter check_timer 10\n\tbattle_wait 30\n\tif I_CompareCounter path_ne = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 10\n\tset_counter check_timer 11\n\tbattle_wait 30\n\tif I_CompareCounter path_ne = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 11\n\tset_counter check_timer 12\n\tbattle_wait 30\n\tif I_CompareCounter path_ne = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 12\n\tset_counter check_timer 13\n\tbattle_wait 30\n\tif I_CompareCounter path_ne = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 13\n\tset_counter check_timer 14\n\tbattle_wait 30\n\tif I_CompareCounter path_ne = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 14\n\tset_counter check_timer 15\n\tbattle_wait 30\n\tif I_CompareCounter path_ne = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 15\n\tset_counter check_timer 16\n\tbattle_wait 30\n\tif I_CompareCounter path_ne = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 16\n\tset_counter check_timer 17\n\tbattle_wait 30\n\tif I_CompareCounter path_ne = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 17\n\tset_counter check_timer 18\n\tbattle_wait 30\n\tif I_CompareCounter path_ne = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 18\n\tset_counter check_timer 19\n\tbattle_wait 30\n\tif I_CompareCounter path_ne = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 19\n\tset_counter check_timer 20\n\tbattle_wait 30\n\tif I_CompareCounter path_ne = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 20\n\tset_counter path_ne 0\n\tset_counter sally_reinf 0\n\tset_counter army4_ready_sally 0\n\tset_counter label_army4 1\n;\tbattle_wait 0.5\n;\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter army4_ready_sally = 2\n\tand ! I_UnitEnemyUnitInRadius a4u1 130\n\tand I_CompareCounter path_sw = 1\n\n\tset_counter check_timer 1\n;\tbattle_wait 600\n\tbattle_wait 30\n\tif I_CompareCounter path_sw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 1\n\tset_counter check_timer 2\n\tbattle_wait 30\n\tif I_CompareCounter path_sw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 2\n\tset_counter check_timer 3\n\tbattle_wait 30\n\tif I_CompareCounter path_sw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 3\n\tset_counter check_timer 4\n\tbattle_wait 30\n\tif I_CompareCounter path_sw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 4\n\tset_counter check_timer 5\n\tbattle_wait 30\n\tif I_CompareCounter path_sw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 5\n\tset_counter check_timer 6\n\tbattle_wait 30\n\tif I_CompareCounter path_sw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 6\n\tset_counter check_timer 7\n\tbattle_wait 30\n\tif I_CompareCounter path_sw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 7\n\tset_counter check_timer 8\n\tbattle_wait 30\n\tif I_CompareCounter path_sw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 8\n\tset_counter check_timer 9\n\tbattle_wait 30\n\tif I_CompareCounter path_sw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 9\n\tset_counter check_timer 10\n\tbattle_wait 30\n\tif I_CompareCounter path_sw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 10\n\tset_counter check_timer 11\n\tbattle_wait 30\n\tif I_CompareCounter path_sw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 11\n\tset_counter check_timer 12\n\tbattle_wait 30\n\tif I_CompareCounter path_sw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n" +
                    "\tand I_CompareCounter check_timer = 12\n\tset_counter check_timer 13\n\tbattle_wait 30\n\tif I_CompareCounter path_sw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 13\n\tset_counter check_timer 14\n\tbattle_wait 30\n\tif I_CompareCounter path_sw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 14\n\tset_counter check_timer 15\n\tbattle_wait 30\n\tif I_CompareCounter path_sw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 15\n\tset_counter check_timer 16\n\tbattle_wait 30\n\tif I_CompareCounter path_sw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 16\n\tset_counter check_timer 17\n\tbattle_wait 30\n\tif I_CompareCounter path_sw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 17\n\tset_counter check_timer 18\n\tbattle_wait 30\n\tif I_CompareCounter path_sw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 18\n\tset_counter check_timer 19\n\tbattle_wait 30\n\tif I_CompareCounter path_sw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 19\n\tset_counter check_timer 20\n\tbattle_wait 30\n\tif I_CompareCounter path_sw = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 20\n\tset_counter path_sw 0\n\tset_counter sally_reinf 0\n\tset_counter army4_ready_sally 0\n\tset_counter label_army4 1\n;\tbattle_wait 0.5\n;\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter army4_ready_sally = 2\n\tand ! I_UnitEnemyUnitInRadius a4u1 130\n\tand I_CompareCounter path_se = 1\n\n\tset_counter check_timer 1\n;\tbattle_wait 600\n\tbattle_wait 30\n\tif I_CompareCounter path_se = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 1\n\tset_counter check_timer 2\n\tbattle_wait 30\n\tif I_CompareCounter path_se = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 2\n\tset_counter check_timer 3\n\tbattle_wait 30\n\tif I_CompareCounter path_se = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 3\n\tset_counter check_timer 4\n\tbattle_wait 30\n\tif I_CompareCounter path_se = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 4\n\tset_counter check_timer 5\n\tbattle_wait 30\n\tif I_CompareCounter path_se = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 5\n\tset_counter check_timer 6\n\tbattle_wait 30\n\tif I_CompareCounter path_se = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 6\n\tset_counter check_timer 7\n\tbattle_wait 30\n\tif I_CompareCounter path_se = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 7\n\tset_counter check_timer 8\n\tbattle_wait 30\n\tif I_CompareCounter path_se = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 8\n\tset_counter check_timer 9\n\tbattle_wait 30\n\tif I_CompareCounter path_se = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 9\n\tset_counter check_timer 10\n\tbattle_wait 30\n\tif I_CompareCounter path_se = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 10\n\tset_counter check_timer 11\n\tbattle_wait 30\n\tif I_CompareCounter path_se = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 11\n\tset_counter check_timer 12\n\tbattle_wait 30\n\tif I_CompareCounter path_se = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 12\n\tset_counter check_timer 13\n\tbattle_wait 30\n\tif I_CompareCounter path_se = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 13\n\tset_counter check_timer 14\n\tbattle_wait 30\n\tif I_CompareCounter path_se = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 14\n\tset_counter check_timer 15\n\tbattle_wait 30\n\tif I_CompareCounter path_se = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 15\n\tset_counter check_timer 16\n\tbattle_wait 30\n\tif I_CompareCounter path_se = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 16\n\tset_counter check_timer 17\n\tbattle_wait 30\n\tif I_CompareCounter path_se = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 17\n\tset_counter check_timer 18\n\tbattle_wait 30\n\tif I_CompareCounter path_se = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 18\n\tset_counter check_timer 19\n\tbattle_wait 30\n\tif I_CompareCounter path_se = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 19\n\tset_counter check_timer 20\n\tbattle_wait 30\n\tif I_CompareCounter path_se = 1\n\tand I_CompareCounter army4_ready_sally = 2\n\tand I_CompareCounter check_timer = 20\n\tset_counter path_se 0\n\tset_counter sally_reinf 0\n\tset_counter army4_ready_sally 0\n\tset_counter label_army4 1\n;\tbattle_wait 0.5\n ;   ai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\nend_monitor\n\n;################## Germanicu5 Integrated Stakes script ###########################\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter label_ready = 1\n\tand I_BattlePlayerArmyIsAttacker\n\tand ! I_BattleAiAttacking\n\tand ! I_ConflictType SuccessfulAmbush\n\tand ! I_BattleIsSiegeBattle\n\tand ! I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyNumberOfUnitCategory cavalry > 0\n\tand I_BattleEnemyArmyNumberOfAttribute stakes > 0\n\tand I_UnitEnemyUnitInRadius a2u1 150\n\n\tset_counter stakes_on 1\n\tset_counter label_ready 0\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter label_ready = 1\n\tand I_BattlePlayerArmyIsAttacker\n;\tand ! I_BattleAiAttacking\n\tand I_BattleIsSallyOutBattle\n" +
                    "\tand I_BattleSettlementFortificationLevel < 3\n\tand I_IsBattleSettlementCastle\n\tand I_BattlePlayerAllianceOddsAgainst < 2.0\n\tand I_BattleEnemyArmyNumberOfSpecialAbility drop_engines < 3\n\tand I_BattlePlayerArmyNumberOfUnitCategory cavalry > 0\n\tand I_BattleEnemyArmyNumberOfAttribute stakes > 0\n\tand I_BattleEnemyArmyNumberOfUnitCategory cavalry = 0\n\tand I_UnitEnemyUnitInRadius a2u1 150\n\n\tset_counter stakes_on 1\n\tset_counter label_ready 0\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter label_ready = 1\n\tand I_BattlePlayerArmyIsAttacker\n;\tand ! I_BattleAiAttacking\n\tand I_BattleIsSallyOutBattle\n\tand I_BattleSettlementFortificationLevel > 2\n\tand I_IsBattleSettlementCastle\n\tand I_BattlePlayerAllianceOddsAgainst < 2.5\n\tand I_BattleEnemyArmyNumberOfSpecialAbility drop_engines < 4\n\tand I_BattlePlayerArmyNumberOfUnitCategory cavalry > 0\n\tand I_BattleEnemyArmyNumberOfAttribute stakes > 0\n\tand I_BattleEnemyArmyNumberOfUnitCategory cavalry = 0\n\tand I_UnitEnemyUnitInRadius a2u1 150\n\n\tset_counter stakes_on 1\n\tset_counter label_ready 0\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter label_ready = 1\n\tand I_BattlePlayerArmyIsAttacker\n;\tand ! I_BattleAiAttacking\n\tand I_BattleIsSallyOutBattle\n\tand I_BattleSettlementFortificationLevel < 3\n\tand ! I_IsBattleSettlementCastle\n\tand I_BattleEnemyArmyNumberOfSpecialAbility drop_engines < 3\n\tand I_BattlePlayerAllianceOddsAgainst < 1.7\n\tand I_BattlePlayerArmyNumberOfUnitCategory cavalry > 0\n\tand I_BattleEnemyArmyNumberOfAttribute stakes > 0\n\tand I_BattleEnemyArmyNumberOfUnitCategory cavalry = 0\n\tand I_UnitEnemyUnitInRadius a2u1 150\n\n\tset_counter stakes_on 1\n\tset_counter label_ready 0\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter label_ready = 1\n\tand I_BattlePlayerArmyIsAttacker\n;\tand ! I_BattleAiAttacking\n\tand I_BattleIsSallyOutBattle\n\tand I_BattleSettlementFortificationLevel > 2\n\tand ! I_IsBattleSettlementCastle\n\tand I_BattleEnemyArmyNumberOfSpecialAbility drop_engines < 3\n\tand I_BattlePlayerAllianceOddsAgainst < 2.2\n\tand I_BattlePlayerArmyNumberOfUnitCategory cavalry > 0\n\tand I_BattleEnemyArmyNumberOfAttribute stakes > 0\n\tand I_BattleEnemyArmyNumberOfUnitCategory cavalry = 0\n\tand I_UnitEnemyUnitInRadius a2u1 150\n\n\tset_counter stakes_on 1\n\tset_counter label_ready 0\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter stakes_on = 1\n\tand I_BattlePlayerArmyNumberOfUnitCategory cavalry > 0\n\tand I_BattleEnemyArmyNumberOfAttribute stakes > 0\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif ! I_UnitDestroyed a2u1\n\tand ! I_UnitStatus a2u1 left_battle\n\tand ! I_IsUnitRouting a2u1\n\tand I_UnitEnemyUnitInRadius a2u1 60\n\tand I_CompareCounter stakes_on != 2\n\tset_counter stakes_on 2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif ! I_UnitDestroyed a2u2\n\tand ! I_UnitStatus a2u2 left_battle\n\tand ! I_IsUnitRouting a2u2\n\tand I_UnitEnemyUnitInRadius a2u2 60\n\tand I_CompareCounter stakes_on != 2\n\tset_counter stakes_on 2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif ! I_UnitDestroyed a2u3\n\tand ! I_UnitStatus a2u3 left_battle\n\tand ! I_IsUnitRouting a2u3\n\tand I_UnitEnemyUnitInRadius a2u3 60\n\tand I_CompareCounter stakes_on != 2\n\tset_counter stakes_on 2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif ! I_UnitDestroyed a2u4\n\tand ! I_UnitStatus a2u4 left_battle\n\tand ! I_IsUnitRouting a2u4\n\tand I_UnitEnemyUnitInRadius a2u4 60\n\tand I_CompareCounter stakes_on != 2\n\tset_counter stakes_on 2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif ! I_UnitDestroyed a2u5\n\tand ! I_UnitStatus a2u5 left_battle\n\tand ! I_IsUnitRouting a2u5\n\tand I_UnitEnemyUnitInRadius a2u5 60\n\tand I_CompareCounter stakes_on != 2\n\tset_counter stakes_on 2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif ! I_UnitDestroyed a2u6\n\tand ! I_UnitStatus a2u6 left_battle\n\tand ! I_IsUnitRouting a2u6\n\tand I_UnitEnemyUnitInRadius a2u6 60\n\tand I_CompareCounter stakes_on != 2\n\tset_counter stakes_on 2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif ! I_UnitDestroyed a2u7\n\tand ! I_UnitStatus a2u7 left_battle\n\tand ! I_IsUnitRouting a2u7\n\tand I_UnitEnemyUnitInRadius a2u7 60\n\tand I_CompareCounter stakes_on != 2\n\tset_counter stakes_on 2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif ! I_UnitDestroyed a2u8\n\tand ! I_UnitStatus a2u8 left_battle\n\tand ! I_IsUnitRouting a2u8\n\tand I_UnitEnemyUnitInRadius a2u8 60\n\tand I_CompareCounter stakes_on != 2\n\tset_counter stakes_on 2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif ! I_UnitDestroyed a2u9\n\tand ! I_UnitStatus a2u9 left_battle\n\tand ! I_IsUnitRouting a2u9\n\tand I_UnitEnemyUnitInRadius a2u9 60\n\tand I_CompareCounter stakes_on != 2\n\tset_counter stakes_on 2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif ! I_UnitDestroyed a2u10\n\tand ! I_UnitStatus a2u10 left_battle\n\tand ! I_IsUnitRouting a2u10\n\tand I_UnitEnemyUnitInRadius a2u10 60\n\tand I_CompareCounter stakes_on != 2\n\tset_counter stakes_on 2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif ! I_UnitDestroyed a2u11\n\tand ! I_UnitStatus a2u11 left_battle\n\tand ! I_IsUnitRouting a2u11\n\tand I_UnitEnemyUnitInRadius a2u11 60\n\tand I_CompareCounter stakes_on != 2\n\tset_counter stakes_on 2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif ! I_UnitDestroyed a2u12\n\tand ! I_UnitStatus a2u12 left_battle\n\tand ! I_IsUnitRouting a2u12\n\tand I_UnitEnemyUnitInRadius a2u12 60\n\tand I_CompareCounter stakes_on != 2\n\tset_counter stakes_on 2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif ! I_UnitDestroyed a2u13\n\tand ! I_UnitStatus a2u13 left_battle\n\tand ! I_IsUnitRouting a2u13\n\tand I_UnitEnemyUnitInRadius a2u13 60\n\tand I_CompareCounter stakes_on != 2\n\tset_counter stakes_on 2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif ! I_UnitDestroyed a2u14\n\tand ! I_UnitStatus a2u14 left_battle\n\tand ! I_IsUnitRouting a2u14\n\tand I_UnitEnemyUnitInRadius a2u14 60\n\tand I_CompareCounter stakes_on != 2\n\tset_counter stakes_on 2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif ! I_UnitDestroyed a2u15\n\tand ! I_UnitStatus a2u15 left_battle\n\tand ! I_IsUnitRouting a2u15\n\tand I_UnitEnemyUnitInRadius a2u15 60\n\tand I_CompareCounter stakes_on != 2\n\tset_counter stakes_on 2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n" +
                    "\tif ! I_UnitDestroyed a2u16\n\tand ! I_UnitStatus a2u16 left_battle\n\tand ! I_IsUnitRouting a2u16\n\tand I_UnitEnemyUnitInRadius a2u16 60\n\tand I_CompareCounter stakes_on != 2\n\tset_counter stakes_on 2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif ! I_UnitDestroyed a2u17\n\tand ! I_UnitStatus a2u17 left_battle\n\tand ! I_IsUnitRouting a2u17\n\tand I_UnitEnemyUnitInRadius a2u17 60\n\tand I_CompareCounter stakes_on != 2\n\tset_counter stakes_on 2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif ! I_UnitDestroyed a2u18\n\tand ! I_UnitStatus a2u18 left_battle\n\tand ! I_IsUnitRouting a2u18\n\tand I_UnitEnemyUnitInRadius a2u18 60\n\tand I_CompareCounter stakes_on != 2\n\tset_counter stakes_on 2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif ! I_UnitDestroyed a2u19\n\tand ! I_UnitStatus a2u19 left_battle\n\tand ! I_IsUnitRouting a2u19\n\tand I_UnitEnemyUnitInRadius a2u19 60\n\tand I_CompareCounter stakes_on != 2\n\tset_counter stakes_on 2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif ! I_UnitDestroyed a2u20\n\tand ! I_UnitStatus a2u20 left_battle\n\tand ! I_IsUnitRouting a2u20\n\tand I_UnitEnemyUnitInRadius a2u20 60\n\tand I_CompareCounter stakes_on != 2\n\tset_counter stakes_on 2\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\nif I_CompareCounter stakes_on = 2\n;\tai_active_set off\n\tunit_group_order_halt army2\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif ! I_UnitDestroyed a2u1\n\tand ! I_UnitStatus a2u1 left_battle\n\tand ! I_IsUnitRouting a2u1\n\tunit_deploy_stakes a2u1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif ! I_UnitDestroyed a2u2\n\tand ! I_UnitStatus a2u2 left_battle\n\tand ! I_IsUnitRouting a2u2\n\tunit_deploy_stakes a2u2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif ! I_UnitDestroyed a2u3\n\tand ! I_UnitStatus a2u3 left_battle\n\tand ! I_IsUnitRouting a2u3\n\tunit_deploy_stakes a2u3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif ! I_UnitDestroyed a2u4\n\tand ! I_UnitStatus a2u4 left_battle\n\tand ! I_IsUnitRouting a2u4\n\tunit_deploy_stakes a2u4\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif ! I_UnitDestroyed a2u5\n\tand ! I_UnitStatus a2u5 left_battle\n\tand ! I_IsUnitRouting a2u5\n\tunit_deploy_stakes a2u5\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif ! I_UnitDestroyed a2u6\n\tand ! I_UnitStatus a2u6 left_battle\n\tand ! I_IsUnitRouting a2u6\n\tunit_deploy_stakes a2u6\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif ! I_UnitDestroyed a2u7\n\tand ! I_UnitStatus a2u7 left_battle\n\tand ! I_IsUnitRouting a2u7\n\tunit_deploy_stakes a2u7\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif ! I_UnitDestroyed a2u8\n\tand ! I_UnitStatus a2u8 left_battle\n\tand ! I_IsUnitRouting a2u8\n\tunit_deploy_stakes a2u8\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif ! I_UnitDestroyed a2u9\n\tand ! I_UnitStatus a2u9 left_battle\n\tand ! I_IsUnitRouting a2u9\n\tunit_deploy_stakes a2u9\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif ! I_UnitDestroyed a2u10\n\tand ! I_UnitStatus a2u10 left_battle\n\tand ! I_IsUnitRouting a2u10\n\tunit_deploy_stakes a2u10\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif ! I_UnitDestroyed a2u11\n\tand ! I_UnitStatus a2u11 left_battle\n\tand ! I_IsUnitRouting a2u11\n\tunit_deploy_stakes a2u11\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif ! I_UnitDestroyed a2u12\n\tand ! I_UnitStatus a2u12 left_battle\n\tand ! I_IsUnitRouting a2u12\n\tunit_deploy_stakes a2u12\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif ! I_UnitDestroyed a2u13\n\tand ! I_UnitStatus a2u13 left_battle\n\tand ! I_IsUnitRouting a2u13\n\tunit_deploy_stakes a2u13\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif ! I_UnitDestroyed a2u14\n\tand ! I_UnitStatus a2u14 left_battle\n\tand ! I_IsUnitRouting a2u14\n\tunit_deploy_stakes a2u14\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif ! I_UnitDestroyed a2u15\n\tand ! I_UnitStatus a2u15 left_battle\n\tand ! I_IsUnitRouting a2u15\n\tunit_deploy_stakes a2u15\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif ! I_UnitDestroyed a2u16\n\tand ! I_UnitStatus a2u16 left_battle\n\tand ! I_IsUnitRouting a2u16\n\tunit_deploy_stakes a2u16\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif ! I_UnitDestroyed a2u17\n\tand ! I_UnitStatus a2u17 left_battle\n\tand ! I_IsUnitRouting a2u17\n\tunit_deploy_stakes a2u17\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif ! I_UnitDestroyed a2u18\n\tand ! I_UnitStatus a2u18 left_battle\n\tand ! I_IsUnitRouting a2u18\n\tunit_deploy_stakes a2u18\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif ! I_UnitDestroyed a2u19\n\tand ! I_UnitStatus a2u19 left_battle\n\tand ! I_IsUnitRouting a2u19\n\tunit_deploy_stakes a2u19\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif ! I_UnitDestroyed a2u20\n\tand ! I_UnitStatus a2u20 left_battle\n\tand ! I_IsUnitRouting a2u20\n\tunit_deploy_stakes a2u20\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n\tbattle_wait 0.5\n\tai_active_set on\n\tset_counter stakes_on 0\nend_if\n\tbattle_wait 1.5\nend_monitor\n\nmonitor_event BattleDeploymentPhaseCommenced FactionIsLocal\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_BattleIsSiegeBattle\n\tand I_CompareCounter panel_check = 1\n\tand I_CompareCounter label_ready = 1\n\tand I_BattlePlayerArmyNumberOfUnitCategory cavalry > 0\n\tand I_BattleEnemyArmyNumberOfUnitCategory cavalry = 0\n\tand I_BattleEnemyArmyNumberOfAttribute stakes > 0\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tunit_deploy_stakes a2u1\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tunit_deploy_stakes a2u2\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tunit_deploy_stakes a2u3\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tunit_deploy_stakes a2u4\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tunit_deploy_stakes a2u5\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tunit_deploy_stakes a2u6\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tunit_deploy_stakes a2u7\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tunit_deploy_stakes a2u8\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tunit_deploy_stakes a2u9\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tunit_deploy_stakes a2u10\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tunit_deploy_stakes a2u11\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tunit_deploy_stakes a2u12\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tunit_deploy_stakes a2u13\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tunit_deploy_stakes a2u14\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tunit_deploy_stakes a2u15\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tunit_deploy_stakes a2u16\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tunit_deploy_stakes a2u17\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tunit_deploy_stakes a2u18\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tunit_deploy_stakes a2u19\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tunit_deploy_stakes a2u20\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n\tbattle_wait 0.5\n\tai_active_set on\n\tset_counter label_ready 0\nend_monitor\n\n" +
                    ";;;;;;;;HA fix;;;;;;;;;;;;\n\n;monitor_conditions I_BattleStarted\n;\tand I_CompareCounter ha_fix = 1\n;\tand I_CompareCounter open_battle = 1\n;\tand I_BattlePlayerArmyIsAttacker\n;\tand ! I_BattleAiAttacking\n;\tand I_BattleEnemyArmyPercentageOfUnitCategory cavalry > 60\n;\tand I_UnitEnemyUnitInRadius a2u1 250\n;\tai_gta_plan_set 1 ATTACK_ALL\n;\tset_counter ha_fix 0\n;\tset_counter ob_defense_launch 0\n;\tset_counter ob_defend 4\n;end_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter ha_fix = 1\n\tand I_CompareCounter open_battle = 1\n\tand ! I_BattlePlayerArmyIsAttacker\n\tand ! I_BattleAiAttacking\n;\tand I_BattleEnemyArmyPercentageOfUnitCategory cavalry > 60\n\n\tai_gta_plan_set 0 ATTACK_ALL\n\tset_counter apply_strategy 1\n\tset_counter ha_fix 0\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter ha_fix = 1\n\tand I_BattleIsRiverBattle\n\tand ! I_BattlePlayerArmyIsAttacker\n\tand ! I_BattleAiAssaultingCrossing\n;\tand I_BattleEnemyArmyPercentageOfUnitCategory cavalry >= 60\n\n\tai_gta_add_objective 0 ASSAULT_CROSSING 999\n\n;\tai_active_set off\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tai_gta_add_unit_label 0 0 a1u1\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tai_gta_add_unit_label 0 0 a1u2\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tai_gta_add_unit_label 0 0 a1u3\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tai_gta_add_unit_label 0 0 a1u4\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tai_gta_add_unit_label 0 0 a1u5\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tai_gta_add_unit_label 0 0 a1u6\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tai_gta_add_unit_label 0 0 a1u7\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tai_gta_add_unit_label 0 0 a1u8\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tai_gta_add_unit_label 0 0 a1u9\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tai_gta_add_unit_label 0 0 a1u10\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tai_gta_add_unit_label 0 0 a1u11\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tai_gta_add_unit_label 0 0 a1u12\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tai_gta_add_unit_label 0 0 a1u13\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tai_gta_add_unit_label 0 0 a1u14\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tai_gta_add_unit_label 0 0 a1u15\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tai_gta_add_unit_label 0 0 a1u16\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tai_gta_add_unit_label 0 0 a1u17\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tai_gta_add_unit_label 0 0 a1u18\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tai_gta_add_unit_label 0 0 a1u19\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tai_gta_add_unit_label 0 0 a1u20\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tbattle_wait 0.5\n\tai_active_set on\n\n\tset_counter ha_fix 0\nend_monitor\n\n;;;;;;;;Elephant;;;;;;;;;;;;\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter elephant_fix = 1\n\tand I_BattleIsSiegeBattle\n\tand ! I_BattleIsFortBattle\n\tand ! I_BattlePlayerArmyIsAttacker\n\tand I_IsBattleSettlementCastle\n\tand I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\n\tai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999\n;\tai_active_set off\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif I_UnitFormation a1u1 = horde\n\tand ! I_UnitStatus a1u1 running_amok\n\tand ! I_UnitDestroyed a1u1\n\tand ! I_UnitStatus a1u1 left_battle\n\tand ! I_IsUnitRouting a1u1\n\tai_gta_add_unit_label 0 0 a1u1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif I_UnitFormation a1u2 = horde\n\tand ! I_UnitStatus a1u2 running_amok\n\tand ! I_UnitDestroyed a1u2\n\tand ! I_UnitStatus a1u2 left_battle\n\tand ! I_IsUnitRouting a1u2\n\tai_gta_add_unit_label 0 0 a1u2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif I_UnitFormation a1u3 = horde\n\tand ! I_UnitStatus a1u3 running_amok\n\tand ! I_UnitDestroyed a1u3\n\tand ! I_UnitStatus a1u3 left_battle\n\tand ! I_IsUnitRouting a1u3\n\tai_gta_add_unit_label 0 0 a1u3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif I_UnitFormation a1u4 = horde\n\tand ! I_UnitStatus a1u4 running_amok\n\tand ! I_UnitDestroyed a1u4\n\tand ! I_UnitStatus a1u4 left_battle\n\tand ! I_IsUnitRouting a1u4\n\tai_gta_add_unit_label 0 0 a1u4\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif I_UnitFormation a1u5 = horde\n\tand ! I_UnitStatus a1u5 running_amok\n\tand ! I_UnitDestroyed a1u5\n\tand ! I_UnitStatus a1u5 left_battle\n\tand ! I_IsUnitRouting a1u5\n\tai_gta_add_unit_label 0 0 a1u5\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif I_UnitFormation a1u6 = horde\n\tand ! I_UnitStatus a1u6 running_amok\n\tand ! I_UnitDestroyed a1u6\n\tand ! I_UnitStatus a1u6 left_battle\n\tand ! I_IsUnitRouting a1u6\n\tai_gta_add_unit_label 0 0 a1u6\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif I_UnitFormation a1u7 = horde\n\tand ! I_UnitStatus a1u7 running_amok\n\tand ! I_UnitDestroyed a1u7\n\tand ! I_UnitStatus a1u7 left_battle\n\tand ! I_IsUnitRouting a1u7\n\tai_gta_add_unit_label 0 0 a1u7\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif I_UnitFormation a1u8 = horde\n\tand ! I_UnitStatus a1u8 running_amok\n\tand ! I_UnitDestroyed a1u8\n\tand ! I_UnitStatus a1u8 left_battle\n\tand ! I_IsUnitRouting a1u8\n\tai_gta_add_unit_label 0 0 a1u8\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif I_UnitFormation a1u9 = horde\n\tand ! I_UnitStatus a1u9 running_amok\n\tand ! I_UnitDestroyed a1u9\n\tand ! I_UnitStatus a1u9 left_battle\n\tand ! I_IsUnitRouting a1u9\n\tai_gta_add_unit_label 0 0 a1u9\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif I_UnitFormation a1u10 = horde\n\tand ! I_UnitStatus a1u10 running_amok\n\tand ! I_UnitDestroyed a1u10\n\tand ! I_UnitStatus a1u10 left_battle\n\tand ! I_IsUnitRouting a1u10\n\tai_gta_add_unit_label 0 0 a1u10\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif I_UnitFormation a1u11 = horde\n\tand ! I_UnitStatus a1u11 running_amok\n\tand ! I_UnitDestroyed a1u11\n\tand ! I_UnitStatus a1u11 left_battle\n\tand ! I_IsUnitRouting a1u11\n\tai_gta_add_unit_label 0 0 a1u11\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif I_UnitFormation a1u12 = horde\n\tand ! I_UnitStatus a1u12 running_amok\n\tand ! I_UnitDestroyed a1u12\n\tand ! I_UnitStatus a1u12 left_battle\n\tand ! I_IsUnitRouting a1u12\n\tai_gta_add_unit_label 0 0 a1u12\n\tend_if\n\n" +
                    "\tif I_CompareCounter enemy_unit_count > 12\n\tif I_UnitFormation a1u13 = horde\n\tand ! I_UnitStatus a1u13 running_amok\n\tand ! I_UnitDestroyed a1u13\n\tand ! I_UnitStatus a1u13 left_battle\n\tand ! I_IsUnitRouting a1u13\n\tai_gta_add_unit_label 0 0 a1u13\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif I_UnitFormation a1u14 = horde\n\tand ! I_UnitStatus a1u14 running_amok\n\tand ! I_UnitDestroyed a1u14\n\tand ! I_UnitStatus a1u14 left_battle\n\tand ! I_IsUnitRouting a1u14\n\tai_gta_add_unit_label 0 0 a1u14\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif I_UnitFormation a1u15 = horde\n\tand ! I_UnitStatus a1u15 running_amok\n\tand ! I_UnitDestroyed a1u15\n\tand ! I_UnitStatus a1u15 left_battle\n\tand ! I_IsUnitRouting a1u15\n\tai_gta_add_unit_label 0 0 a1u15\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif I_UnitFormation a1u16 = horde\n\tand ! I_UnitStatus a1u16 running_amok\n\tand ! I_UnitDestroyed a1u16\n\tand ! I_UnitStatus a1u16 left_battle\n\tand ! I_IsUnitRouting a1u16\n\tai_gta_add_unit_label 0 0 a1u16\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif I_UnitFormation a1u17 = horde\n\tand ! I_UnitStatus a1u17 running_amok\n\tand ! I_UnitDestroyed a1u17\n\tand ! I_UnitStatus a1u17 left_battle\n\tand ! I_IsUnitRouting a1u17\n\tai_gta_add_unit_label 0 0 a1u17\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif I_UnitFormation a1u18 = horde\n\tand ! I_UnitStatus a1u18 running_amok\n\tand ! I_UnitDestroyed a1u18\n\tand ! I_UnitStatus a1u18 left_battle\n\tand ! I_IsUnitRouting a1u18\n\tai_gta_add_unit_label 0 0 a1u18\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif I_UnitFormation a1u19 = horde\n\tand ! I_UnitStatus a1u19 running_amok\n\tand ! I_UnitDestroyed a1u19\n\tand ! I_UnitStatus a1u19 left_battle\n\tand ! I_IsUnitRouting a1u19\n\tai_gta_add_unit_label 0 0 a1u19\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif I_UnitFormation a1u20 = horde\n\tand ! I_UnitStatus a1u20 running_amok\n\tand ! I_UnitDestroyed a1u20\n\tand ! I_UnitStatus a1u20 left_battle\n\tand ! I_IsUnitRouting a1u20\n\tai_gta_add_unit_label 0 0 a1u20\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n\tbattle_wait 0.5\n\tai_active_set on\n\tset_counter elephant_gate 1\n\tset_counter elephant_fix 0\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter elephant_fix = 1\n\tand I_BattleIsSiegeBattle\n\tand ! I_BattleIsFortBattle\n\tand ! I_BattlePlayerArmyIsAttacker\n\tand ! I_IsBattleSettlementCastle\n\tand I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\n\tai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999\n;\tai_active_set off\n\tunit_group_order_halt army1\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif I_UnitFormation a1u1 = horde\n\tand ! I_UnitStatus a1u1 running_amok\n\tand ! I_UnitDestroyed a1u1\n\tand ! I_UnitStatus a1u1 left_battle\n\tand ! I_IsUnitRouting a1u1\n\tai_gta_add_unit_label 0 0 a1u1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif I_UnitFormation a1u2 = horde\n\tand ! I_UnitStatus a1u2 running_amok\n\tand ! I_UnitDestroyed a1u2\n\tand ! I_UnitStatus a1u2 left_battle\n\tand ! I_IsUnitRouting a1u2\n\tai_gta_add_unit_label 0 0 a1u2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif I_UnitFormation a1u3 = horde\n\tand ! I_UnitStatus a1u3 running_amok\n\tand ! I_UnitDestroyed a1u3\n\tand ! I_UnitStatus a1u3 left_battle\n\tand ! I_IsUnitRouting a1u3\n\tai_gta_add_unit_label 0 0 a1u3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif I_UnitFormation a1u4 = horde\n\tand ! I_UnitStatus a1u4 running_amok\n\tand ! I_UnitDestroyed a1u4\n\tand ! I_UnitStatus a1u4 left_battle\n\tand ! I_IsUnitRouting a1u4\n\tai_gta_add_unit_label 0 0 a1u4\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif I_UnitFormation a1u5 = horde\n\tand ! I_UnitStatus a1u5 running_amok\n\tand ! I_UnitDestroyed a1u5\n\tand ! I_UnitStatus a1u5 left_battle\n\tand ! I_IsUnitRouting a1u5\n\tai_gta_add_unit_label 0 0 a1u5\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif I_UnitFormation a1u6 = horde\n\tand ! I_UnitStatus a1u6 running_amok\n\tand ! I_UnitDestroyed a1u6\n\tand ! I_UnitStatus a1u6 left_battle\n\tand ! I_IsUnitRouting a1u6\n\tai_gta_add_unit_label 0 0 a1u6\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif I_UnitFormation a1u7 = horde\n\tand ! I_UnitStatus a1u7 running_amok\n\tand ! I_UnitDestroyed a1u7\n\tand ! I_UnitStatus a1u7 left_battle\n\tand ! I_IsUnitRouting a1u7\n\tai_gta_add_unit_label 0 0 a1u7\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif I_UnitFormation a1u8 = horde\n\tand ! I_UnitStatus a1u8 running_amok\n\tand ! I_UnitDestroyed a1u8\n\tand ! I_UnitStatus a1u8 left_battle\n\tand ! I_IsUnitRouting a1u8\n\tai_gta_add_unit_label 0 0 a1u8\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif I_UnitFormation a1u9 = horde\n\tand ! I_UnitStatus a1u9 running_amok\n\tand ! I_UnitDestroyed a1u9\n\tand ! I_UnitStatus a1u9 left_battle\n\tand ! I_IsUnitRouting a1u9\n\tai_gta_add_unit_label 0 0 a1u9\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif I_UnitFormation a1u10 = horde\n\tand ! I_UnitStatus a1u10 running_amok\n\tand ! I_UnitDestroyed a1u10\n\tand ! I_UnitStatus a1u10 left_battle\n\tand ! I_IsUnitRouting a1u10\n\tai_gta_add_unit_label 0 0 a1u10\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif I_UnitFormation a1u11 = horde\n\tand ! I_UnitStatus a1u11 running_amok\n\tand ! I_UnitDestroyed a1u11\n\tand ! I_UnitStatus a1u11 left_battle\n\tand ! I_IsUnitRouting a1u11\n\tai_gta_add_unit_label 0 0 a1u11\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif I_UnitFormation a1u12 = horde\n\tand ! I_UnitStatus a1u12 running_amok\n\tand ! I_UnitDestroyed a1u12\n\tand ! I_UnitStatus a1u12 left_battle\n\tand ! I_IsUnitRouting a1u12\n\tai_gta_add_unit_label 0 0 a1u12\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif I_UnitFormation a1u13 = horde\n\tand ! I_UnitStatus a1u13 running_amok\n\tand ! I_UnitDestroyed a1u13\n\tand ! I_UnitStatus a1u13 left_battle\n\tand ! I_IsUnitRouting a1u13\n\tai_gta_add_unit_label 0 0 a1u13\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif I_UnitFormation a1u14 = horde\n\tand ! I_UnitStatus a1u14 running_amok\n\tand ! I_UnitDestroyed a1u14\n\tand ! I_UnitStatus a1u14 left_battle\n\tand ! I_IsUnitRouting a1u14\n\tai_gta_add_unit_label 0 0 a1u14\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif I_UnitFormation a1u15 = horde\n\tand ! I_UnitStatus a1u15 running_amok\n\tand ! I_UnitDestroyed a1u15\n\tand ! I_UnitStatus a1u15 left_battle\n\tand ! I_IsUnitRouting a1u15\n\tai_gta_add_unit_label 0 0 a1u15\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif I_UnitFormation a1u16 = horde\n\tand ! I_UnitStatus a1u16 running_amok\n\tand ! I_UnitDestroyed a1u16\n\tand ! I_UnitStatus a1u16 left_battle\n\tand ! I_IsUnitRouting a1u16\n\tai_gta_add_unit_label 0 0 a1u16\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif I_UnitFormation a1u17 = horde\n\tand ! I_UnitStatus a1u17 running_amok\n\tand ! I_UnitDestroyed a1u17\n\tand ! I_UnitStatus a1u17 left_battle\n\tand ! I_IsUnitRouting a1u17\n\tai_gta_add_unit_label 0 0 a1u17\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif I_UnitFormation a1u18 = horde\n\tand ! I_UnitStatus a1u18 running_amok\n\tand ! I_UnitDestroyed a1u18\n\tand ! I_UnitStatus a1u18 left_battle\n\tand ! I_IsUnitRouting a1u18\n\tai_gta_add_unit_label 0 0 a1u18\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif I_UnitFormation a1u19 = horde\n\tand ! I_UnitStatus a1u19 running_amok\n" +
                    "\tand ! I_UnitDestroyed a1u19\n\tand ! I_UnitStatus a1u19 left_battle\n\tand ! I_IsUnitRouting a1u19\n\tai_gta_add_unit_label 0 0 a1u19\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif I_UnitFormation a1u20 = horde\n\tand ! I_UnitStatus a1u20 running_amok\n\tand ! I_UnitDestroyed a1u20\n\tand ! I_UnitStatus a1u20 left_battle\n\tand ! I_IsUnitRouting a1u20\n\tai_gta_add_unit_label 0 0 a1u20\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n\tunit_group_order_halt army1\n\tbattle_wait 0.5\n\tunit_group_order_change_group_formation army1 ai_wall_assault\n\tbattle_wait 0.5\n\tai_active_set on\n\tset_counter elephant_gate 1\n\tset_counter elephant_fix 0\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter elephant_fix = 1\n\tand I_BattleIsSiegeBattle\n\tand I_BattleIsFortBattle\n\tand ! I_BattlePlayerArmyIsAttacker\n\tand I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\n\tai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999\n;\tai_active_set off\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif I_UnitFormation a1u1 = horde\n\tand ! I_UnitStatus a1u1 running_amok\n\tand ! I_UnitDestroyed a1u1\n\tand ! I_UnitStatus a1u1 left_battle\n\tand ! I_IsUnitRouting a1u1\n\tai_gta_add_unit_label 0 0 a1u1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif I_UnitFormation a1u2 = horde\n\tand ! I_UnitStatus a1u2 running_amok\n\tand ! I_UnitDestroyed a1u2\n\tand ! I_UnitStatus a1u2 left_battle\n\tand ! I_IsUnitRouting a1u2\n\tai_gta_add_unit_label 0 0 a1u2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif I_UnitFormation a1u3 = horde\n\tand ! I_UnitStatus a1u3 running_amok\n\tand ! I_UnitDestroyed a1u3\n\tand ! I_UnitStatus a1u3 left_battle\n\tand ! I_IsUnitRouting a1u3\n\tai_gta_add_unit_label 0 0 a1u3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif I_UnitFormation a1u4 = horde\n\tand ! I_UnitStatus a1u4 running_amok\n\tand ! I_UnitDestroyed a1u4\n\tand ! I_UnitStatus a1u4 left_battle\n\tand ! I_IsUnitRouting a1u4\n\tai_gta_add_unit_label 0 0 a1u4\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif I_UnitFormation a1u5 = horde\n\tand ! I_UnitStatus a1u5 running_amok\n\tand ! I_UnitDestroyed a1u5\n\tand ! I_UnitStatus a1u5 left_battle\n\tand ! I_IsUnitRouting a1u5\n\tai_gta_add_unit_label 0 0 a1u5\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif I_UnitFormation a1u6 = horde\n\tand ! I_UnitStatus a1u6 running_amok\n\tand ! I_UnitDestroyed a1u6\n\tand ! I_UnitStatus a1u6 left_battle\n\tand ! I_IsUnitRouting a1u6\n\tai_gta_add_unit_label 0 0 a1u6\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif I_UnitFormation a1u7 = horde\n\tand ! I_UnitStatus a1u7 running_amok\n\tand ! I_UnitDestroyed a1u7\n\tand ! I_UnitStatus a1u7 left_battle\n\tand ! I_IsUnitRouting a1u7\n\tai_gta_add_unit_label 0 0 a1u7\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif I_UnitFormation a1u8 = horde\n\tand ! I_UnitStatus a1u8 running_amok\n\tand ! I_UnitDestroyed a1u8\n\tand ! I_UnitStatus a1u8 left_battle\n\tand ! I_IsUnitRouting a1u8\n\tai_gta_add_unit_label 0 0 a1u8\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif I_UnitFormation a1u9 = horde\n\tand ! I_UnitStatus a1u9 running_amok\n\tand ! I_UnitDestroyed a1u9\n\tand ! I_UnitStatus a1u9 left_battle\n\tand ! I_IsUnitRouting a1u9\n\tai_gta_add_unit_label 0 0 a1u9\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif I_UnitFormation a1u10 = horde\n\tand ! I_UnitStatus a1u10 running_amok\n\tand ! I_UnitDestroyed a1u10\n\tand ! I_UnitStatus a1u10 left_battle\n\tand ! I_IsUnitRouting a1u10\n\tai_gta_add_unit_label 0 0 a1u10\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif I_UnitFormation a1u11 = horde\n\tand ! I_UnitStatus a1u11 running_amok\n\tand ! I_UnitDestroyed a1u11\n\tand ! I_UnitStatus a1u11 left_battle\n\tand ! I_IsUnitRouting a1u11\n\tai_gta_add_unit_label 0 0 a1u11\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif I_UnitFormation a1u12 = horde\n\tand ! I_UnitStatus a1u12 running_amok\n\tand ! I_UnitDestroyed a1u12\n\tand ! I_UnitStatus a1u12 left_battle\n\tand ! I_IsUnitRouting a1u12\n\tai_gta_add_unit_label 0 0 a1u12\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif I_UnitFormation a1u13 = horde\n\tand ! I_UnitStatus a1u13 running_amok\n\tand ! I_UnitDestroyed a1u13\n\tand ! I_UnitStatus a1u13 left_battle\n\tand ! I_IsUnitRouting a1u13\n\tai_gta_add_unit_label 0 0 a1u13\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif I_UnitFormation a1u14 = horde\n\tand ! I_UnitStatus a1u14 running_amok\n\tand ! I_UnitDestroyed a1u14\n\tand ! I_UnitStatus a1u14 left_battle\n\tand ! I_IsUnitRouting a1u14\n\tai_gta_add_unit_label 0 0 a1u14\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif I_UnitFormation a1u15 = horde\n\tand ! I_UnitStatus a1u15 running_amok\n\tand ! I_UnitDestroyed a1u15\n\tand ! I_UnitStatus a1u15 left_battle\n\tand ! I_IsUnitRouting a1u15\n\tai_gta_add_unit_label 0 0 a1u15\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif I_UnitFormation a1u16 = horde\n\tand ! I_UnitStatus a1u16 running_amok\n\tand ! I_UnitDestroyed a1u16\n\tand ! I_UnitStatus a1u16 left_battle\n\tand ! I_IsUnitRouting a1u16\n" +
                    "\tai_gta_add_unit_label 0 0 a1u16\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif I_UnitFormation a1u17 = horde\n\tand ! I_UnitStatus a1u17 running_amok\n\tand ! I_UnitDestroyed a1u17\n\tand ! I_UnitStatus a1u17 left_battle\n\tand ! I_IsUnitRouting a1u17\n\tai_gta_add_unit_label 0 0 a1u17\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif I_UnitFormation a1u18 = horde\n\tand ! I_UnitStatus a1u18 running_amok\n\tand ! I_UnitDestroyed a1u18\n\tand ! I_UnitStatus a1u18 left_battle\n\tand ! I_IsUnitRouting a1u18\n\tai_gta_add_unit_label 0 0 a1u18\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif I_UnitFormation a1u19 = horde\n\tand ! I_UnitStatus a1u19 running_amok\n\tand ! I_UnitDestroyed a1u19\n\tand ! I_UnitStatus a1u19 left_battle\n\tand ! I_IsUnitRouting a1u19\n\tai_gta_add_unit_label 0 0 a1u19\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif I_UnitFormation a1u20 = horde\n\tand ! I_UnitStatus a1u20 running_amok\n\tand ! I_UnitDestroyed a1u20\n\tand ! I_UnitStatus a1u20 left_battle\n\tand ! I_IsUnitRouting a1u20\n\tai_gta_add_unit_label 0 0 a1u20\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n\tbattle_wait 0.5\n\tai_active_set on\n\tset_counter elephant_gate 1\n\tset_counter elephant_fix 0\nend_monitor\n\nmonitor_event BattleEnemyUnitAttacksPlayerUnit TrueCondition\n\tand I_CompareCounter panel_check = 1\n\tand I_CompareCounter rally_walls = 1\n\tand BattleIsMeleeAttack\n\tand ! BattlePlayerUnitOnWalls\n\tand ! BattleEnemyUnitOnWalls\n\n\tif I_CompareCounter elephant_gate != 2\n\tset_counter elephant_gate 0\n\tset_counter del_objective 1\n\tend_if\n\tset_counter elephant_fix_check 1\n\tset_counter rally_walls 3\n;\tbattle_wait 180\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls = 3\n\tand I_CompareCounter elephant_fix_check = 1\n\tset_counter elephant_fix_check 2\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls = 3\n\tand I_CompareCounter elephant_fix_check = 2\n\tset_counter elephant_fix_check 3\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls = 3\n\tand I_CompareCounter elephant_fix_check = 3\n\tset_counter elephant_fix_check 4\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls = 3\n\tand I_CompareCounter elephant_fix_check = 4\n\tset_counter elephant_fix_check 5\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls = 3\n\tand I_CompareCounter elephant_fix_check = 5\n\tset_counter elephant_fix_check 6\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls = 3\n\tand I_CompareCounter elephant_fix_check = 6\n\tset_counter elephant_gate_tier2 1\n\tset_counter rally_walls 0\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\nend_monitor\n\nmonitor_event BattlePlayerUnitAttacksEnemyUnit BattleIsMeleeAttack\n\tand I_CompareCounter panel_check = 1\n\tand I_CompareCounter rally_walls = 1\n\tand ! BattlePlayerUnitOnWalls\n\tand ! BattleEnemyUnitOnWalls\n\n\tif I_CompareCounter elephant_gate != 2\n\tset_counter elephant_gate 0\n\tset_counter del_objective 1\n\tend_if\n\tset_counter elephant_fix_check 1\n\tset_counter rally_walls 3\n;\tbattle_wait 180\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls = 3\n\tand I_CompareCounter elephant_fix_check = 1\n\tset_counter elephant_fix_check 2\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls = 3\n\tand I_CompareCounter elephant_fix_check = 2\n\tset_counter elephant_fix_check 3\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls = 3\n\tand I_CompareCounter elephant_fix_check = 3\n\tset_counter elephant_fix_check 4\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls = 3\n\tand I_CompareCounter elephant_fix_check = 4\n\tset_counter elephant_fix_check 5\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls = 3\n\tand I_CompareCounter elephant_fix_check = 5\n\tset_counter elephant_fix_check 6\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls = 3\n\tand I_CompareCounter elephant_fix_check = 6\n\tset_counter elephant_gate_tier2 1\n\tset_counter rally_walls 0\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter del_objective = 1\n\tand I_BattleIsSiegeBattle\n\tand ! I_BattlePlayerArmyIsAttacker\n\tand I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\n\tset_counter del_objective 2\n\tbattle_wait 15\n\tif I_CompareCounter del_objective = 2\n\tai_gta_del_objective 0\n\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tset_counter del_objective 0\n\tend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter elephant_gate_tier2 = 1\n\tand ! I_BattleIsFortBattle\n\tand I_BattleIsSiegeBattle\n\tand I_IsBattleSettlementCastle\n\tand I_BattleSettlementFortificationLevel > 2\n\n\tai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif I_UnitFormation a1u1 = horde\n\tand ! I_UnitStatus a1u1 running_amok\n\tand ! I_UnitDestroyed a1u1\n\tand ! I_UnitStatus a1u1 left_battle\n\tand ! I_IsUnitRouting a1u1\n\tai_gta_add_unit_label 0 0 a1u1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif I_UnitFormation a1u2 = horde\n\tand ! I_UnitStatus a1u2 running_amok\n\tand ! I_UnitDestroyed a1u2\n\tand ! I_UnitStatus a1u2 left_battle\n\tand ! I_IsUnitRouting a1u2\n\tai_gta_add_unit_label 0 0 a1u2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif I_UnitFormation a1u3 = horde\n\tand ! I_UnitStatus a1u3 running_amok\n\tand ! I_UnitDestroyed a1u3\n\tand ! I_UnitStatus a1u3 left_battle\n\tand ! I_IsUnitRouting a1u3\n\tai_gta_add_unit_label 0 0 a1u3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif I_UnitFormation a1u4 = horde\n\tand ! I_UnitStatus a1u4 running_amok\n\tand ! I_UnitDestroyed a1u4\n\tand ! I_UnitStatus a1u4 left_battle\n\tand ! I_IsUnitRouting a1u4\n\tai_gta_add_unit_label 0 0 a1u4\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif I_UnitFormation a1u5 = horde\n\tand ! I_UnitStatus a1u5 running_amok\n\tand ! I_UnitDestroyed a1u5\n\tand ! I_UnitStatus a1u5 left_battle\n\tand ! I_IsUnitRouting a1u5\n\tai_gta_add_unit_label 0 0 a1u5\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif I_UnitFormation a1u6 = horde\n\tand ! I_UnitStatus a1u6 running_amok\n\tand ! I_UnitDestroyed a1u6\n\tand ! I_UnitStatus a1u6 left_battle\n\tand ! I_IsUnitRouting a1u6\n\tai_gta_add_unit_label 0 0 a1u6\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif I_UnitFormation a1u7 = horde\n\tand ! I_UnitStatus a1u7 running_amok\n\tand ! I_UnitDestroyed a1u7\n\tand ! I_UnitStatus a1u7 left_battle\n\tand ! I_IsUnitRouting a1u7\n\tai_gta_add_unit_label 0 0 a1u7\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif I_UnitFormation a1u8 = horde\n\tand ! I_UnitStatus a1u8 running_amok\n\tand ! I_UnitDestroyed a1u8\n\tand ! I_UnitStatus a1u8 left_battle\n\tand ! I_IsUnitRouting a1u8\n\tai_gta_add_unit_label 0 0 a1u8\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif I_UnitFormation a1u9 = horde\n\tand ! I_UnitStatus a1u9 running_amok\n\tand ! I_UnitDestroyed a1u9\n\tand ! I_UnitStatus a1u9 left_battle\n\tand ! I_IsUnitRouting a1u9\n\tai_gta_add_unit_label 0 0 a1u9\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif I_UnitFormation a1u10 = horde\n\tand ! I_UnitStatus a1u10 running_amok\n\tand ! I_UnitDestroyed a1u10\n\tand ! I_UnitStatus a1u10 left_battle\n\tand ! I_IsUnitRouting a1u10\n\tai_gta_add_unit_label 0 0 a1u10\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif I_UnitFormation a1u11 = horde\n\tand ! I_UnitStatus a1u11 running_amok\n\tand ! I_UnitDestroyed a1u11\n\tand ! I_UnitStatus a1u11 left_battle\n\tand ! I_IsUnitRouting a1u11\n" +
                    "\tai_gta_add_unit_label 0 0 a1u11\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif I_UnitFormation a1u12 = horde\n\tand ! I_UnitStatus a1u12 running_amok\n\tand ! I_UnitDestroyed a1u12\n\tand ! I_UnitStatus a1u12 left_battle\n\tand ! I_IsUnitRouting a1u12\n\tai_gta_add_unit_label 0 0 a1u12\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif I_UnitFormation a1u13 = horde\n\tand ! I_UnitStatus a1u13 running_amok\n\tand ! I_UnitDestroyed a1u13\n\tand ! I_UnitStatus a1u13 left_battle\n\tand ! I_IsUnitRouting a1u13\n\tai_gta_add_unit_label 0 0 a1u13\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif I_UnitFormation a1u14 = horde\n\tand ! I_UnitStatus a1u14 running_amok\n\tand ! I_UnitDestroyed a1u14\n\tand ! I_UnitStatus a1u14 left_battle\n\tand ! I_IsUnitRouting a1u14\n\tai_gta_add_unit_label 0 0 a1u14\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif I_UnitFormation a1u15 = horde\n\tand ! I_UnitStatus a1u15 running_amok\n\tand ! I_UnitDestroyed a1u15\n\tand ! I_UnitStatus a1u15 left_battle\n\tand ! I_IsUnitRouting a1u15\n\tai_gta_add_unit_label 0 0 a1u15\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif I_UnitFormation a1u16 = horde\n\tand ! I_UnitStatus a1u16 running_amok\n\tand ! I_UnitDestroyed a1u16\n\tand ! I_UnitStatus a1u16 left_battle\n\tand ! I_IsUnitRouting a1u16\n\tai_gta_add_unit_label 0 0 a1u16\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif I_UnitFormation a1u17 = horde\n\tand ! I_UnitStatus a1u17 running_amok\n\tand ! I_UnitDestroyed a1u17\n\tand ! I_UnitStatus a1u17 left_battle\n\tand ! I_IsUnitRouting a1u17\n\tai_gta_add_unit_label 0 0 a1u17\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif I_UnitFormation a1u18 = horde\n\tand ! I_UnitStatus a1u18 running_amok\n\tand ! I_UnitDestroyed a1u18\n\tand ! I_UnitStatus a1u18 left_battle\n\tand ! I_IsUnitRouting a1u18\n\tai_gta_add_unit_label 0 0 a1u18\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif I_UnitFormation a1u19 = horde\n\tand ! I_UnitStatus a1u19 running_amok\n\tand ! I_UnitDestroyed a1u19\n\tand ! I_UnitStatus a1u19 left_battle\n\tand ! I_IsUnitRouting a1u19\n\tai_gta_add_unit_label 0 0 a1u19\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif I_UnitFormation a1u20 = horde\n\tand ! I_UnitStatus a1u20 running_amok\n\tand ! I_UnitDestroyed a1u20\n\tand ! I_UnitStatus a1u20 left_battle\n\tand ! I_IsUnitRouting a1u20\n\tai_gta_add_unit_label 0 0 a1u20\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n\tbattle_wait 0.5\n\tai_active_set on\n\tset_counter second_ring 1\n\tset_counter elephant_gate_tier2 0\nend_monitor\n\nmonitor_event BattleEnemyUnitAttacksPlayerUnit TrueCondition\n\tand I_CompareCounter panel_check = 1\n\tand I_CompareCounter rally_walls = 2\n\tand BattleIsMeleeAttack\n\tand ! BattlePlayerUnitOnWalls\n\tand ! BattleEnemyUnitOnWalls\n\n\tif I_CompareCounter second_ring != 2\n\tset_counter second_ring 0\n\tset_counter del_objective 1\n\tend_if\n\tset_counter elephant_fix_check 1\n\tset_counter rally_walls 4\n;\tbattle_wait 180\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls = 4\n\tand I_CompareCounter elephant_fix_check = 1\n\tset_counter elephant_fix_check 2\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls = 4\n\tand I_CompareCounter elephant_fix_check = 2\n\tset_counter elephant_fix_check 3\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls = 4\n\tand I_CompareCounter elephant_fix_check = 3\n\tset_counter elephant_fix_check 4\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls = 4\n\tand I_CompareCounter elephant_fix_check = 4\n\tset_counter elephant_fix_check 5\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls = 4\n\tand I_CompareCounter elephant_fix_check = 5\n\tset_counter elephant_fix_check 6\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls = 4\n\tand I_CompareCounter elephant_fix_check = 6\n\tset_counter elephant_gate_tier3 1\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\nend_monitor\n\nmonitor_event BattlePlayerUnitAttacksEnemyUnit BattleIsMeleeAttack\n\tand I_CompareCounter panel_check = 1\n\tand I_CompareCounter rally_walls = 2\n\tand ! BattlePlayerUnitOnWalls\n\tand ! BattleEnemyUnitOnWalls\n\n\tif I_CompareCounter second_ring != 2\n\tset_counter second_ring 0\n\tset_counter del_objective 1\n\tend_if\n\tset_counter elephant_fix_check 1\n\tset_counter rally_walls 4\n;\tbattle_wait 180\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls = 4\n\tand I_CompareCounter elephant_fix_check = 1\n\tset_counter elephant_fix_check 2\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls = 4\n\tand I_CompareCounter elephant_fix_check = 2\n\tset_counter elephant_fix_check 3\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls = 4\n\tand I_CompareCounter elephant_fix_check = 3\n\tset_counter elephant_fix_check 4\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls = 4\n\tand I_CompareCounter elephant_fix_check = 4\n\tset_counter elephant_fix_check 5\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls = 4\n\tand I_CompareCounter elephant_fix_check = 5\n\tset_counter elephant_fix_check 6\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls = 4\n\tand I_CompareCounter elephant_fix_check = 6\n\tset_counter elephant_gate_tier3 1\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter elephant_gate_tier3 = 1\n\tand I_IsBattleSettlementCastle\n\tand I_BattleSettlementFortificationLevel > 2\n\n\tai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif I_UnitFormation a1u1 = horde\n\tand ! I_UnitStatus a1u1 running_amok\n\tand ! I_UnitDestroyed a1u1\n\tand ! I_UnitStatus a1u1 left_battle\n\tand ! I_IsUnitRouting a1u1\n\tai_gta_add_unit_label 0 0 a1u1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif I_UnitFormation a1u2 = horde\n\tand ! I_UnitStatus a1u2 running_amok\n\tand ! I_UnitDestroyed a1u2\n\tand ! I_UnitStatus a1u2 left_battle\n\tand ! I_IsUnitRouting a1u2\n\tai_gta_add_unit_label 0 0 a1u2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif I_UnitFormation a1u3 = horde\n\tand ! I_UnitStatus a1u3 running_amok\n\tand ! I_UnitDestroyed a1u3\n\tand ! I_UnitStatus a1u3 left_battle\n\tand ! I_IsUnitRouting a1u3\n\tai_gta_add_unit_label 0 0 a1u3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif I_UnitFormation a1u4 = horde\n" +
                    "\tand ! I_UnitStatus a1u4 running_amok\n\tand ! I_UnitDestroyed a1u4\n\tand ! I_UnitStatus a1u4 left_battle\n\tand ! I_IsUnitRouting a1u4\n\tai_gta_add_unit_label 0 0 a1u4\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif I_UnitFormation a1u5 = horde\n\tand ! I_UnitStatus a1u5 running_amok\n\tand ! I_UnitDestroyed a1u5\n\tand ! I_UnitStatus a1u5 left_battle\n\tand ! I_IsUnitRouting a1u5\n\tai_gta_add_unit_label 0 0 a1u5\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif I_UnitFormation a1u6 = horde\n\tand ! I_UnitStatus a1u6 running_amok\n\tand ! I_UnitDestroyed a1u6\n\tand ! I_UnitStatus a1u6 left_battle\n\tand ! I_IsUnitRouting a1u6\n\tai_gta_add_unit_label 0 0 a1u6\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif I_UnitFormation a1u7 = horde\n\tand ! I_UnitStatus a1u7 running_amok\n\tand ! I_UnitDestroyed a1u7\n\tand ! I_UnitStatus a1u7 left_battle\n\tand ! I_IsUnitRouting a1u7\n\tai_gta_add_unit_label 0 0 a1u7\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif I_UnitFormation a1u8 = horde\n\tand ! I_UnitStatus a1u8 running_amok\n\tand ! I_UnitDestroyed a1u8\n\tand ! I_UnitStatus a1u8 left_battle\n\tand ! I_IsUnitRouting a1u8\n\tai_gta_add_unit_label 0 0 a1u8\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif I_UnitFormation a1u9 = horde\n\tand ! I_UnitStatus a1u9 running_amok\n\tand ! I_UnitDestroyed a1u9\n\tand ! I_UnitStatus a1u9 left_battle\n\tand ! I_IsUnitRouting a1u9\n\tai_gta_add_unit_label 0 0 a1u9\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif I_UnitFormation a1u10 = horde\n\tand ! I_UnitStatus a1u10 running_amok\n\tand ! I_UnitDestroyed a1u10\n\tand ! I_UnitStatus a1u10 left_battle\n\tand ! I_IsUnitRouting a1u10\n\tai_gta_add_unit_label 0 0 a1u10\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif I_UnitFormation a1u11 = horde\n\tand ! I_UnitStatus a1u11 running_amok\n\tand ! I_UnitDestroyed a1u11\n\tand ! I_UnitStatus a1u11 left_battle\n\tand ! I_IsUnitRouting a1u11\n\tai_gta_add_unit_label 0 0 a1u11\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif I_UnitFormation a1u12 = horde\n\tand ! I_UnitStatus a1u12 running_amok\n\tand ! I_UnitDestroyed a1u12\n\tand ! I_UnitStatus a1u12 left_battle\n\tand ! I_IsUnitRouting a1u12\n\tai_gta_add_unit_label 0 0 a1u12\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif I_UnitFormation a1u13 = horde\n\tand ! I_UnitStatus a1u13 running_amok\n\tand ! I_UnitDestroyed a1u13\n\tand ! I_UnitStatus a1u13 left_battle\n\tand ! I_IsUnitRouting a1u13\n\tai_gta_add_unit_label 0 0 a1u13\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif I_UnitFormation a1u14 = horde\n\tand ! I_UnitStatus a1u14 running_amok\n\tand ! I_UnitDestroyed a1u14\n\tand ! I_UnitStatus a1u14 left_battle\n\tand ! I_IsUnitRouting a1u14\n\tai_gta_add_unit_label 0 0 a1u14\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif I_UnitFormation a1u15 = horde\n\tand ! I_UnitStatus a1u15 running_amok\n\tand ! I_UnitDestroyed a1u15\n\tand ! I_UnitStatus a1u15 left_battle\n\tand ! I_IsUnitRouting a1u15\n\tai_gta_add_unit_label 0 0 a1u15\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif I_UnitFormation a1u16 = horde\n\tand ! I_UnitStatus a1u16 running_amok\n\tand ! I_UnitDestroyed a1u16\n\tand ! I_UnitStatus a1u16 left_battle\n\tand ! I_IsUnitRouting a1u16\n\tai_gta_add_unit_label 0 0 a1u16\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif I_UnitFormation a1u17 = horde\n\tand ! I_UnitStatus a1u17 running_amok\n\tand ! I_UnitDestroyed a1u17\n\tand ! I_UnitStatus a1u17 left_battle\n\tand ! I_IsUnitRouting a1u17\n\tai_gta_add_unit_label 0 0 a1u17\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif I_UnitFormation a1u18 = horde\n" +
                    "\tand ! I_UnitStatus a1u18 running_amok\n\tand ! I_UnitDestroyed a1u18\n\tand ! I_UnitStatus a1u18 left_battle\n\tand ! I_IsUnitRouting a1u18\n\tai_gta_add_unit_label 0 0 a1u18\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif I_UnitFormation a1u19 = horde\n\tand ! I_UnitStatus a1u19 running_amok\n\tand ! I_UnitDestroyed a1u19\n\tand ! I_UnitStatus a1u19 left_battle\n\tand ! I_IsUnitRouting a1u19\n\tai_gta_add_unit_label 0 0 a1u19\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif I_UnitFormation a1u20 = horde\n\tand ! I_UnitStatus a1u20 running_amok\n\tand ! I_UnitDestroyed a1u20\n\tand ! I_UnitStatus a1u20 left_battle\n\tand ! I_IsUnitRouting a1u20\n\tai_gta_add_unit_label 0 0 a1u20\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n\tai_active_set on\n\tset_counter third_ring 1\n\tset_counter elephant_gate_tier3 0\nend_monitor\n\n;;;;;;;;Sally-Out Elephant;;;;;;;;;;;;\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter elephant_fix = 1\n\tand I_BattleIsSallyOutBattle\n\tand ! I_BattleIsFortBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\n;\tset_counter sally-out_fix 1\n\tai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif I_UnitFormation a2u1 = horde\n\tand ! I_UnitStatus a2u1 running_amok\n\tand ! I_UnitDestroyed a2u1\n\tand ! I_UnitStatus a2u1 left_battle\n\tand ! I_IsUnitRouting a2u1\n\tai_gta_add_unit_label 1 0 a2u1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif I_UnitFormation a2u2 = horde\n\tand ! I_UnitStatus a2u2 running_amok\n\tand ! I_UnitDestroyed a2u2\n\tand ! I_UnitStatus a2u2 left_battle\n\tand ! I_IsUnitRouting a2u2\n\tai_gta_add_unit_label 1 0 a2u2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif I_UnitFormation a2u3 = horde\n\tand ! I_UnitStatus a2u3 running_amok\n\tand ! I_UnitDestroyed a2u3\n\tand ! I_UnitStatus a2u3 left_battle\n\tand ! I_IsUnitRouting a2u3\n\tai_gta_add_unit_label 1 0 a2u3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif I_UnitFormation a2u4 = horde\n\tand ! I_UnitStatus a2u4 running_amok\n\tand ! I_UnitDestroyed a2u4\n\tand ! I_UnitStatus a2u4 left_battle\n\tand ! I_IsUnitRouting a2u4\n\tai_gta_add_unit_label 1 0 a2u4\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif I_UnitFormation a2u5 = horde\n\tand ! I_UnitStatus a2u5 running_amok\n\tand ! I_UnitDestroyed a2u5\n\tand ! I_UnitStatus a2u5 left_battle\n\tand ! I_IsUnitRouting a2u5\n\tai_gta_add_unit_label 1 0 a2u5\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif I_UnitFormation a2u6 = horde\n\tand ! I_UnitStatus a2u6 running_amok\n\tand ! I_UnitDestroyed a2u6\n\tand ! I_UnitStatus a2u6 left_battle\n\tand ! I_IsUnitRouting a2u6\n\tai_gta_add_unit_label 1 0 a2u6\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif I_UnitFormation a2u7 = horde\n\tand ! I_UnitStatus a2u7 running_amok\n\tand ! I_UnitDestroyed a2u7\n\tand ! I_UnitStatus a2u7 left_battle\n\tand ! I_IsUnitRouting a2u7\n\tai_gta_add_unit_label 1 0 a2u7\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif I_UnitFormation a2u8 = horde\n\tand ! I_UnitStatus a2u8 running_amok\n\tand ! I_UnitDestroyed a2u8\n\tand ! I_UnitStatus a2u8 left_battle\n\tand ! I_IsUnitRouting a2u8\n\tai_gta_add_unit_label 1 0 a2u8\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif I_UnitFormation a2u9 = horde\n\tand ! I_UnitStatus a2u9 running_amok\n\tand ! I_UnitDestroyed a2u9\n\tand ! I_UnitStatus a2u9 left_battle\n\tand ! I_IsUnitRouting a2u9\n\tai_gta_add_unit_label 1 0 a2u9\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif I_UnitFormation a2u10 = horde\n\tand ! I_UnitStatus a2u10 running_amok\n\tand ! I_UnitDestroyed a2u10\n\tand ! I_UnitStatus a2u10 left_battle\n\tand ! I_IsUnitRouting a2u10\n\tai_gta_add_unit_label 1 0 a2u10\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif I_UnitFormation a2u11 = horde\n\tand ! I_UnitStatus a2u11 running_amok\n\tand ! I_UnitDestroyed a2u11\n\tand ! I_UnitStatus a2u11 left_battle\n\tand ! I_IsUnitRouting a2u11\n\tai_gta_add_unit_label 1 0 a2u11\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif I_UnitFormation a2u12 = horde\n\tand ! I_UnitStatus a2u12 running_amok\n\tand ! I_UnitDestroyed a2u12\n\tand ! I_UnitStatus a2u12 left_battle\n\tand ! I_IsUnitRouting a2u12\n\tai_gta_add_unit_label 1 0 a2u12\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif I_UnitFormation a2u13 = horde\n\tand ! I_UnitStatus a2u13 running_amok\n\tand ! I_UnitDestroyed a2u13\n\tand ! I_UnitStatus a2u13 left_battle\n\tand ! I_IsUnitRouting a2u13\n\tai_gta_add_unit_label 1 0 a2u13\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif I_UnitFormation a2u14 = horde\n\tand ! I_UnitStatus a2u14 running_amok\n\tand ! I_UnitDestroyed a2u14\n\tand ! I_UnitStatus a2u14 left_battle\n\tand ! I_IsUnitRouting a2u14\n\tai_gta_add_unit_label 1 0 a2u14\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif I_UnitFormation a2u15 = horde\n\tand ! I_UnitStatus a2u15 running_amok\n\tand ! I_UnitDestroyed a2u15\n\tand ! I_UnitStatus a2u15 left_battle\n\tand ! I_IsUnitRouting a2u15\n\tai_gta_add_unit_label 1 0 a2u15\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif I_UnitFormation a2u16 = horde\n\tand ! I_UnitStatus a2u16 running_amok\n\tand ! I_UnitDestroyed a2u16\n\tand ! I_UnitStatus a2u16 left_battle\n\tand ! I_IsUnitRouting a2u16\n\tai_gta_add_unit_label 1 0 a2u16\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif I_UnitFormation a2u17 = horde\n\tand ! I_UnitStatus a2u17 running_amok\n\tand ! I_UnitDestroyed a2u17\n\tand ! I_UnitStatus a2u17 left_battle\n\tand ! I_IsUnitRouting a2u17\n\tai_gta_add_unit_label 1 0 a2u17\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif I_UnitFormation a2u18 = horde\n\tand ! I_UnitStatus a2u18 running_amok\n\tand ! I_UnitDestroyed a2u18\n\tand ! I_UnitStatus a2u18 left_battle\n\tand ! I_IsUnitRouting a2u18\n\tai_gta_add_unit_label 1 0 a2u18\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif I_UnitFormation a2u19 = horde\n\tand ! I_UnitStatus a2u19 running_amok\n\tand ! I_UnitDestroyed a2u19\n\tand ! I_UnitStatus a2u19 left_battle\n\tand ! I_IsUnitRouting a2u19\n\tai_gta_add_unit_label 1 0 a2u19\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif I_UnitFormation a2u20 = horde\n\tand ! I_UnitStatus a2u20 running_amok\n\tand ! I_UnitDestroyed a2u20\n\tand ! I_UnitStatus a2u20 left_battle\n\tand ! I_IsUnitRouting a2u20\n\tai_gta_add_unit_label 1 0 a2u20\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n\tai_active_set on\n\tset_counter elephant_gate_s 1\n\tset_counter elephant_fix 0\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter elephant_fix = 1\n\tand I_BattleIsSallyOutBattle\n\tand I_BattleIsFortBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\n;\tset_counter sally-out_fix 1\n\tai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif I_UnitFormation a2u1 = horde\n\tand ! I_UnitStatus a2u1 running_amok\n\tand ! I_UnitDestroyed a2u1\n\tand ! I_UnitStatus a2u1 left_battle\n\tand ! I_IsUnitRouting a2u1\n\tai_gta_add_unit_label 1 0 a2u1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif I_UnitFormation a2u2 = horde\n\tand ! I_UnitStatus a2u2 running_amok\n\tand ! I_UnitDestroyed a2u2\n" +
                    "\tand ! I_UnitStatus a2u2 left_battle\n\tand ! I_IsUnitRouting a2u2\n\tai_gta_add_unit_label 1 0 a2u2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif I_UnitFormation a2u3 = horde\n\tand ! I_UnitStatus a2u3 running_amok\n\tand ! I_UnitDestroyed a2u3\n\tand ! I_UnitStatus a2u3 left_battle\n\tand ! I_IsUnitRouting a2u3\n\tai_gta_add_unit_label 1 0 a2u3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif I_UnitFormation a2u4 = horde\n\tand ! I_UnitStatus a2u4 running_amok\n\tand ! I_UnitDestroyed a2u4\n\tand ! I_UnitStatus a2u4 left_battle\n\tand ! I_IsUnitRouting a2u4\n\tai_gta_add_unit_label 1 0 a2u4\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif I_UnitFormation a2u5 = horde\n\tand ! I_UnitStatus a2u5 running_amok\n\tand ! I_UnitDestroyed a2u5\n\tand ! I_UnitStatus a2u5 left_battle\n\tand ! I_IsUnitRouting a2u5\n\tai_gta_add_unit_label 1 0 a2u5\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif I_UnitFormation a2u6 = horde\n\tand ! I_UnitStatus a2u6 running_amok\n\tand ! I_UnitDestroyed a2u6\n\tand ! I_UnitStatus a2u6 left_battle\n\tand ! I_IsUnitRouting a2u6\n\tai_gta_add_unit_label 1 0 a2u6\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif I_UnitFormation a2u7 = horde\n\tand ! I_UnitStatus a2u7 running_amok\n\tand ! I_UnitDestroyed a2u7\n\tand ! I_UnitStatus a2u7 left_battle\n\tand ! I_IsUnitRouting a2u7\n\tai_gta_add_unit_label 1 0 a2u7\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif I_UnitFormation a2u8 = horde\n\tand ! I_UnitStatus a2u8 running_amok\n\tand ! I_UnitDestroyed a2u8\n\tand ! I_UnitStatus a2u8 left_battle\n\tand ! I_IsUnitRouting a2u8\n\tai_gta_add_unit_label 1 0 a2u8\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif I_UnitFormation a2u9 = horde\n\tand ! I_UnitStatus a2u9 running_amok\n\tand ! I_UnitDestroyed a2u9\n\tand ! I_UnitStatus a2u9 left_battle\n\tand ! I_IsUnitRouting a2u9\n\tai_gta_add_unit_label 1 0 a2u9\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif I_UnitFormation a2u10 = horde\n\tand ! I_UnitStatus a2u10 running_amok\n\tand ! I_UnitDestroyed a2u10\n\tand ! I_UnitStatus a2u10 left_battle\n\tand ! I_IsUnitRouting a2u10\n\tai_gta_add_unit_label 1 0 a2u10\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif I_UnitFormation a2u11 = horde\n\tand ! I_UnitStatus a2u11 running_amok\n\tand ! I_UnitDestroyed a2u11\n\tand ! I_UnitStatus a2u11 left_battle\n\tand ! I_IsUnitRouting a2u11\n\tai_gta_add_unit_label 1 0 a2u11\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif I_UnitFormation a2u12 = horde\n\tand ! I_UnitStatus a2u12 running_amok\n\tand ! I_UnitDestroyed a2u12\n\tand ! I_UnitStatus a2u12 left_battle\n\tand ! I_IsUnitRouting a2u12\n\tai_gta_add_unit_label 1 0 a2u12\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif I_UnitFormation a2u13 = horde\n\tand ! I_UnitStatus a2u13 running_amok\n\tand ! I_UnitDestroyed a2u13\n\tand ! I_UnitStatus a2u13 left_battle\n\tand ! I_IsUnitRouting a2u13\n\tai_gta_add_unit_label 1 0 a2u13\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif I_UnitFormation a2u14 = horde\n\tand ! I_UnitStatus a2u14 running_amok\n\tand ! I_UnitDestroyed a2u14\n\tand ! I_UnitStatus a2u14 left_battle\n\tand ! I_IsUnitRouting a2u14\n\tai_gta_add_unit_label 1 0 a2u14\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif I_UnitFormation a2u15 = horde\n\tand ! I_UnitStatus a2u15 running_amok\n\tand ! I_UnitDestroyed a2u15\n\tand ! I_UnitStatus a2u15 left_battle\n\tand ! I_IsUnitRouting a2u15\n\tai_gta_add_unit_label 1 0 a2u15\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif I_UnitFormation a2u16 = horde\n\tand ! I_UnitStatus a2u16 running_amok\n\tand ! I_UnitDestroyed a2u16\n\tand ! I_UnitStatus a2u16 left_battle\n\tand ! I_IsUnitRouting a2u16\n\tai_gta_add_unit_label 1 0 a2u16\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif I_UnitFormation a2u17 = horde\n\tand ! I_UnitStatus a2u17 running_amok\n\tand ! I_UnitDestroyed a2u17\n\tand ! I_UnitStatus a2u17 left_battle\n\tand ! I_IsUnitRouting a2u17\n\tai_gta_add_unit_label 1 0 a2u17\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif I_UnitFormation a2u18 = horde\n\tand ! I_UnitStatus a2u18 running_amok\n\tand ! I_UnitDestroyed a2u18\n\tand ! I_UnitStatus a2u18 left_battle\n\tand ! I_IsUnitRouting a2u18\n\tai_gta_add_unit_label 1 0 a2u18\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif I_UnitFormation a2u19 = horde\n\tand ! I_UnitStatus a2u19 running_amok\n\tand ! I_UnitDestroyed a2u19\n\tand ! I_UnitStatus a2u19 left_battle\n\tand ! I_IsUnitRouting a2u19\n\tai_gta_add_unit_label 1 0 a2u19\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif I_UnitFormation a2u20 = horde\n\tand ! I_UnitStatus a2u20 running_amok\n\tand ! I_UnitDestroyed a2u20\n\tand ! I_UnitStatus a2u20 left_battle\n\tand ! I_IsUnitRouting a2u20\n\tai_gta_add_unit_label 1 0 a2u20\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n\tai_active_set on\n\tset_counter elephant_gate_s 1\n\tset_counter elephant_fix 0\nend_monitor\n\nmonitor_event BattleEnemyUnitAttacksPlayerUnit TrueCondition\n\tand I_CompareCounter panel_check = 1\n\tand I_CompareCounter rally_walls_s = 1\n\tand BattleIsMeleeAttack\n\tand ! BattlePlayerUnitOnWalls\n\tand ! BattleEnemyUnitOnWalls\n\n\tif I_CompareCounter elephant_gate_s != 2\n\tset_counter elephant_gate_s 0\n\tset_counter del_objective_s 1\n\tend_if\n\tset_counter elephant_fix_check_sally 1\n\tset_counter rally_walls_s 3\n;\tbattle_wait 180\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls_s = 3\n\tand I_CompareCounter elephant_fix_check_sally = 1\n\tset_counter elephant_fix_check_sally 2\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls_s = 3\n\tand I_CompareCounter elephant_fix_check_sally = 2\n\tset_counter elephant_fix_check_sally 3\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls_s = 3\n\tand I_CompareCounter elephant_fix_check_sally = 3\n\tset_counter elephant_fix_check_sally 4\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls_s = 3\n\tand I_CompareCounter elephant_fix_check_sally = 4\n\tset_counter elephant_fix_check_sally 5\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls_s = 3\n\tand I_CompareCounter elephant_fix_check_sally = 5\n\tset_counter elephant_fix_check_sally 6\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls_s = 3\n\tand I_CompareCounter elephant_fix_check_sally = 6\n" +
                    "\tset_counter elephant_gate_tier2s 1\n\tset_counter rally_walls_s 0\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\nend_monitor\n\nmonitor_event BattlePlayerUnitAttacksEnemyUnit BattleIsMeleeAttack\n\tand I_CompareCounter panel_check = 1\n\tand I_CompareCounter rally_walls_s = 1\n\tand ! BattlePlayerUnitOnWalls\n\tand ! BattleEnemyUnitOnWalls\n\n\tif I_CompareCounter elephant_gate_s != 2\n\tset_counter elephant_gate_s 0\n\tset_counter del_objective_s 1\n\tend_if\n\tset_counter elephant_fix_check_sally 1\n\tset_counter rally_walls_s 3\n;\tbattle_wait 180\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls_s = 3\n\tand I_CompareCounter elephant_fix_check_sally = 1\n\tset_counter elephant_fix_check_sally 2\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls_s = 3\n\tand I_CompareCounter elephant_fix_check_sally = 2\n\tset_counter elephant_fix_check_sally 3\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls_s = 3\n\tand I_CompareCounter elephant_fix_check_sally = 3\n\tset_counter elephant_fix_check_sally 4\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls_s = 3\n\tand I_CompareCounter elephant_fix_check_sally = 4\n\tset_counter elephant_fix_check_sally 5\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls_s = 3\n\tand I_CompareCounter elephant_fix_check_sally = 5\n\tset_counter elephant_fix_check_sally 6\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls_s = 3\n\tand I_CompareCounter elephant_fix_check_sally = 6\n\tset_counter elephant_gate_tier2s 1\n\tset_counter rally_walls_s 0\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter del_objective_s = 1\n\tand I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\n\tset_counter del_objective_s 2\n\tbattle_wait 15\n\tif I_CompareCounter del_objective_s = 2\n\tai_gta_del_objective 1\n\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tset_counter del_objective_s 0\n\tend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter elephant_gate_tier2s = 1\n\tand I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_IsBattleSettlementCastle\n\tand I_BattleSettlementFortificationLevel > 2\n\tand I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\n\tai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif I_UnitFormation a2u1 = horde\n\tand ! I_UnitStatus a2u1 running_amok\n\tand ! I_UnitDestroyed a2u1\n\tand ! I_UnitStatus a2u1 left_battle\n\tand ! I_IsUnitRouting a2u1\n\tai_gta_add_unit_label 1 0 a2u1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif I_UnitFormation a2u2 = horde\n\tand ! I_UnitStatus a2u2 running_amok\n\tand ! I_UnitDestroyed a2u2\n\tand ! I_UnitStatus a2u2 left_battle\n\tand ! I_IsUnitRouting a2u2\n\tai_gta_add_unit_label 1 0 a2u2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif I_UnitFormation a2u3 = horde\n\tand ! I_UnitStatus a2u3 running_amok\n\tand ! I_UnitDestroyed a2u3\n\tand ! I_UnitStatus a2u3 left_battle\n\tand ! I_IsUnitRouting a2u3\n\tai_gta_add_unit_label 1 0 a2u3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif I_UnitFormation a2u4 = horde\n\tand ! I_UnitStatus a2u4 running_amok\n\tand ! I_UnitDestroyed a2u4\n\tand ! I_UnitStatus a2u4 left_battle\n\tand ! I_IsUnitRouting a2u4\n\tai_gta_add_unit_label 1 0 a2u4\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif I_UnitFormation a2u5 = horde\n\tand ! I_UnitStatus a2u5 running_amok\n\tand ! I_UnitDestroyed a2u5\n\tand ! I_UnitStatus a2u5 left_battle\n\tand ! I_IsUnitRouting a2u5\n\tai_gta_add_unit_label 1 0 a2u5\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif I_UnitFormation a2u6 = horde\n\tand ! I_UnitStatus a2u6 running_amok\n\tand ! I_UnitDestroyed a2u6\n\tand ! I_UnitStatus a2u6 left_battle\n\tand ! I_IsUnitRouting a2u6\n\tai_gta_add_unit_label 1 0 a2u6\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif I_UnitFormation a2u7 = horde\n\tand ! I_UnitStatus a2u7 running_amok\n\tand ! I_UnitDestroyed a2u7\n\tand ! I_UnitStatus a2u7 left_battle\n\tand ! I_IsUnitRouting a2u7\n\tai_gta_add_unit_label 1 0 a2u7\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif I_UnitFormation a2u8 = horde\n\tand ! I_UnitStatus a2u8 running_amok\n\tand ! I_UnitDestroyed a2u8\n\tand ! I_UnitStatus a2u8 left_battle\n\tand ! I_IsUnitRouting a2u8\n\tai_gta_add_unit_label 1 0 a2u8\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif I_UnitFormation a2u9 = horde\n\tand ! I_UnitStatus a2u9 running_amok\n\tand ! I_UnitDestroyed a2u9\n\tand ! I_UnitStatus a2u9 left_battle\n\tand ! I_IsUnitRouting a2u9\n\tai_gta_add_unit_label 1 0 a2u9\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif I_UnitFormation a2u10 = horde\n\tand ! I_UnitStatus a2u10 running_amok\n\tand ! I_UnitDestroyed a2u10\n\tand ! I_UnitStatus a2u10 left_battle\n\tand ! I_IsUnitRouting a2u10\n\tai_gta_add_unit_label 1 0 a2u10\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif I_UnitFormation a2u11 = horde\n\tand ! I_UnitStatus a2u11 running_amok\n\tand ! I_UnitDestroyed a2u11\n\tand ! I_UnitStatus a2u11 left_battle\n\tand ! I_IsUnitRouting a2u11\n\tai_gta_add_unit_label 1 0 a2u11\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif I_UnitFormation a2u12 = horde\n\tand ! I_UnitStatus a2u12 running_amok\n\tand ! I_UnitDestroyed a2u12\n\tand ! I_UnitStatus a2u12 left_battle\n\tand ! I_IsUnitRouting a2u12\n\tai_gta_add_unit_label 1 0 a2u12\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif I_UnitFormation a2u13 = horde\n\tand ! I_UnitStatus a2u13 running_amok\n\tand ! I_UnitDestroyed a2u13\n\tand ! I_UnitStatus a2u13 left_battle\n\tand ! I_IsUnitRouting a2u13\n\tai_gta_add_unit_label 1 0 a2u13\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif I_UnitFormation a2u14 = horde\n\tand ! I_UnitStatus a2u14 running_amok\n\tand ! I_UnitDestroyed a2u14\n\tand ! I_UnitStatus a2u14 left_battle\n\tand ! I_IsUnitRouting a2u14\n\tai_gta_add_unit_label 1 0 a2u14\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif I_UnitFormation a2u15 = horde\n\tand ! I_UnitStatus a2u15 running_amok\n\tand ! I_UnitDestroyed a2u15\n\tand ! I_UnitStatus a2u15 left_battle\n\tand ! I_IsUnitRouting a2u15\n\tai_gta_add_unit_label 1 0 a2u15\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif I_UnitFormation a2u16 = horde\n\tand ! I_UnitStatus a2u16 running_amok\n\tand ! I_UnitDestroyed a2u16\n\tand ! I_UnitStatus a2u16 left_battle\n\tand ! I_IsUnitRouting a2u16\n\tai_gta_add_unit_label 1 0 a2u16\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif I_UnitFormation a2u17 = horde\n\tand ! I_UnitStatus a2u17 running_amok\n\tand ! I_UnitDestroyed a2u17\n\tand ! I_UnitStatus a2u17 left_battle\n\tand ! I_IsUnitRouting a2u17\n\tai_gta_add_unit_label 1 0 a2u17\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif I_UnitFormation a2u18 = horde\n\tand ! I_UnitStatus a2u18 running_amok\n\tand ! I_UnitDestroyed a2u18\n\tand ! I_UnitStatus a2u18 left_battle\n\tand ! I_IsUnitRouting a2u18\n\tai_gta_add_unit_label 1 0 a2u18\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif I_UnitFormation a2u19 = horde\n\tand ! I_UnitStatus a2u19 running_amok\n\tand ! I_UnitDestroyed a2u19\n\tand ! I_UnitStatus a2u19 left_battle\n\tand ! I_IsUnitRouting a2u19\n\tai_gta_add_unit_label 1 0 a2u19\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif I_UnitFormation a2u20 = horde\n\tand ! I_UnitStatus a2u20 running_amok\n\tand ! I_UnitDestroyed a2u20\n\tand ! I_UnitStatus a2u20 left_battle\n\tand ! I_IsUnitRouting a2u20\n\tai_gta_add_unit_label 1 0 a2u20\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n" +
                    "\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n\tai_active_set on\n\tset_counter second_ring_s 1\n\tset_counter elephant_gate_tier2s 0\nend_monitor\n\nmonitor_event BattleEnemyUnitAttacksPlayerUnit TrueCondition\n\tand I_CompareCounter panel_check = 1\n\tand I_CompareCounter rally_walls_s = 2\n\tand BattleIsMeleeAttack\n\tand ! BattlePlayerUnitOnWalls\n\tand ! BattleEnemyUnitOnWalls\n\n\tif I_CompareCounter second_ring_s != 2\n\tset_counter second_ring_s 0\n\tset_counter del_objective_s 1\n\tend_if\n\tset_counter elephant_fix_check_sally 1\n\tset_counter rally_walls_s 4\n;\tbattle_wait 180\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls_s = 4\n\tand I_CompareCounter elephant_fix_check_sally = 1\n\tset_counter elephant_fix_check_sally 2\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls_s = 4\n\tand I_CompareCounter elephant_fix_check_sally = 2\n\tset_counter elephant_fix_check_sally 3\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls_s = 4\n\tand I_CompareCounter elephant_fix_check_sally = 3\n\tset_counter elephant_fix_check_sally 4\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls_s = 4\n\tand I_CompareCounter elephant_fix_check_sally = 4\n\tset_counter elephant_fix_check_sally 5\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls_s = 4\n\tand I_CompareCounter elephant_fix_check_sally = 5\n\tset_counter elephant_fix_check_sally 6\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls_s = 4\n\tand I_CompareCounter elephant_fix_check_sally = 6\n\tset_counter elephant_gate_tier3s 1\n\tset_counter rally_walls_s 0\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\nend_monitor\n\nmonitor_event BattlePlayerUnitAttacksEnemyUnit BattleIsMeleeAttack\n\tand I_CompareCounter panel_check = 1\n\tand I_CompareCounter rally_walls_s = 2\n\tand ! BattlePlayerUnitOnWalls\n\tand ! BattleEnemyUnitOnWalls\n\n\tif I_CompareCounter second_ring_s != 2\n\tset_counter second_ring_s 0\n\tset_counter del_objective_s 1\n\tend_if\n\tset_counter elephant_fix_check_sally 1\n\tset_counter rally_walls_s 4\n;\tbattle_wait 180\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls_s = 4\n\tand I_CompareCounter elephant_fix_check_sally = 1\n\tset_counter elephant_fix_check_sally 2\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls_s = 4\n\tand I_CompareCounter elephant_fix_check_sally = 2\n\tset_counter elephant_fix_check_sally 3\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls_s = 4\n\tand I_CompareCounter elephant_fix_check_sally = 3\n\tset_counter elephant_fix_check_sally 4\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls_s = 4\n\tand I_CompareCounter elephant_fix_check_sally = 4\n\tset_counter elephant_fix_check_sally 5\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls_s = 4\n\tand I_CompareCounter elephant_fix_check_sally = 5\n\tset_counter elephant_fix_check_sally 6\n\tbattle_wait 30\n\tif I_CompareCounter rally_walls_s = 4\n\tand I_CompareCounter elephant_fix_check_sally = 6\n\tset_counter elephant_gate_tier3s 1\n\tset_counter rally_walls_s 0\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter elephant_gate_tier3s = 1\n\tand I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_IsBattleSettlementCastle\n\tand I_BattleSettlementFortificationLevel > 2\n\tand I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\n\tai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif I_UnitFormation a2u1 = horde\n\tand ! I_UnitStatus a2u1 running_amok\n\tand ! I_UnitDestroyed a2u1\n\tand ! I_UnitStatus a2u1 left_battle\n\tand ! I_IsUnitRouting a2u1\n\tai_gta_add_unit_label 1 0 a2u1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif I_UnitFormation a2u2 = horde\n\tand ! I_UnitStatus a2u2 running_amok\n\tand ! I_UnitDestroyed a2u2\n\tand ! I_UnitStatus a2u2 left_battle\n\tand ! I_IsUnitRouting a2u2\n\tai_gta_add_unit_label 1 0 a2u2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif I_UnitFormation a2u3 = horde\n\tand ! I_UnitStatus a2u3 running_amok\n\tand ! I_UnitDestroyed a2u3\n\tand ! I_UnitStatus a2u3 left_battle\n\tand ! I_IsUnitRouting a2u3\n\tai_gta_add_unit_label 1 0 a2u3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif I_UnitFormation a2u4 = horde\n\tand ! I_UnitStatus a2u4 running_amok\n\tand ! I_UnitDestroyed a2u4\n\tand ! I_UnitStatus a2u4 left_battle\n\tand ! I_IsUnitRouting a2u4\n\tai_gta_add_unit_label 1 0 a2u4\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif I_UnitFormation a2u5 = horde\n\tand ! I_UnitStatus a2u5 running_amok\n\tand ! I_UnitDestroyed a2u5\n\tand ! I_UnitStatus a2u5 left_battle\n\tand ! I_IsUnitRouting a2u5\n\tai_gta_add_unit_label 1 0 a2u5\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif I_UnitFormation a2u6 = horde\n\tand ! I_UnitStatus a2u6 running_amok\n\tand ! I_UnitDestroyed a2u6\n\tand ! I_UnitStatus a2u6 left_battle\n\tand ! I_IsUnitRouting a2u6\n\tai_gta_add_unit_label 1 0 a2u6\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif I_UnitFormation a2u7 = horde\n\tand ! I_UnitStatus a2u7 running_amok\n\tand ! I_UnitDestroyed a2u7\n\tand ! I_UnitStatus a2u7 left_battle\n\tand ! I_IsUnitRouting a2u7\n\tai_gta_add_unit_label 1 0 a2u7\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n" +
                    "\tif I_UnitFormation a2u8 = horde\n\tand ! I_UnitStatus a2u8 running_amok\n\tand ! I_UnitDestroyed a2u8\n\tand ! I_UnitStatus a2u8 left_battle\n\tand ! I_IsUnitRouting a2u8\n\tai_gta_add_unit_label 1 0 a2u8\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif I_UnitFormation a2u9 = horde\n\tand ! I_UnitStatus a2u9 running_amok\n\tand ! I_UnitDestroyed a2u9\n\tand ! I_UnitStatus a2u9 left_battle\n\tand ! I_IsUnitRouting a2u9\n\tai_gta_add_unit_label 1 0 a2u9\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif I_UnitFormation a2u10 = horde\n\tand ! I_UnitStatus a2u10 running_amok\n\tand ! I_UnitDestroyed a2u10\n\tand ! I_UnitStatus a2u10 left_battle\n\tand ! I_IsUnitRouting a2u10\n\tai_gta_add_unit_label 1 0 a2u10\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif I_UnitFormation a2u11 = horde\n\tand ! I_UnitStatus a2u11 running_amok\n\tand ! I_UnitDestroyed a2u11\n\tand ! I_UnitStatus a2u11 left_battle\n\tand ! I_IsUnitRouting a2u11\n\tai_gta_add_unit_label 1 0 a2u11\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif I_UnitFormation a2u12 = horde\n\tand ! I_UnitStatus a2u12 running_amok\n\tand ! I_UnitDestroyed a2u12\n\tand ! I_UnitStatus a2u12 left_battle\n\tand ! I_IsUnitRouting a2u12\n\tai_gta_add_unit_label 1 0 a2u12\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif I_UnitFormation a2u13 = horde\n\tand ! I_UnitStatus a2u13 running_amok\n\tand ! I_UnitDestroyed a2u13\n\tand ! I_UnitStatus a2u13 left_battle\n\tand ! I_IsUnitRouting a2u13\n\tai_gta_add_unit_label 1 0 a2u13\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif I_UnitFormation a2u14 = horde\n\tand ! I_UnitStatus a2u14 running_amok\n\tand ! I_UnitDestroyed a2u14\n\tand ! I_UnitStatus a2u14 left_battle\n\tand ! I_IsUnitRouting a2u14\n\tai_gta_add_unit_label 1 0 a2u14\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif I_UnitFormation a2u15 = horde\n\tand ! I_UnitStatus a2u15 running_amok\n\tand ! I_UnitDestroyed a2u15\n\tand ! I_UnitStatus a2u15 left_battle\n\tand ! I_IsUnitRouting a2u15\n\tai_gta_add_unit_label 1 0 a2u15\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif I_UnitFormation a2u16 = horde\n\tand ! I_UnitStatus a2u16 running_amok\n\tand ! I_UnitDestroyed a2u16\n\tand ! I_UnitStatus a2u16 left_battle\n\tand ! I_IsUnitRouting a2u16\n\tai_gta_add_unit_label 1 0 a2u16\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif I_UnitFormation a2u17 = horde\n\tand ! I_UnitStatus a2u17 running_amok\n\tand ! I_UnitDestroyed a2u17\n\tand ! I_UnitStatus a2u17 left_battle\n\tand ! I_IsUnitRouting a2u17\n\tai_gta_add_unit_label 1 0 a2u17\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif I_UnitFormation a2u18 = horde\n\tand ! I_UnitStatus a2u18 running_amok\n\tand ! I_UnitDestroyed a2u18\n\tand ! I_UnitStatus a2u18 left_battle\n\tand ! I_IsUnitRouting a2u18\n\tai_gta_add_unit_label 1 0 a2u18\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif I_UnitFormation a2u19 = horde\n\tand ! I_UnitStatus a2u19 running_amok\n\tand ! I_UnitDestroyed a2u19\n\tand ! I_UnitStatus a2u19 left_battle\n\tand ! I_IsUnitRouting a2u19\n\tai_gta_add_unit_label 1 0 a2u19\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif I_UnitFormation a2u20 = horde\n\tand ! I_UnitStatus a2u20 running_amok\n\tand ! I_UnitDestroyed a2u20\n\tand ! I_UnitStatus a2u20 left_battle\n\tand ! I_IsUnitRouting a2u20\n\tai_gta_add_unit_label 1 0 a2u20\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n\tai_active_set on\n\tset_counter third_ring_s 1\n\tset_counter elephant_gate_tier3s 0\nend_monitor\n\n;;;;;;;Elephants Gate and Walls\nmonitor_event BattleBattleGatesDestroyedByEngine TrueCondition ;wtf\n\tand I_CompareCounter panel_check = 1\n\nif I_BattleIsSiegeBattle\n\tand ! I_BattlePlayerArmyIsAttacker\n\tand I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\n\tif I_CompareCounter elephant_gate = 1\n\tset_counter elephant_gate 0\n\tset_counter rally_walls 1\n\tend_if\n\n\tif I_CompareCounter second_ring = 1\n\tand I_IsBattleSettlementCastle\n\tand I_BattleSettlementFortificationLevel > 2\n\tset_counter second_ring 0\n\tset_counter rally_walls 2\n\tend_if\n\n\tif I_CompareCounter third_ring = 1\n\tand I_IsBattleSettlementCastle\n\tand I_BattleSettlementFortificationLevel > 2\n\tset_counter third_ring 0\n\tset_counter del_objective 1\n\tend_if\n\nend_if\nif I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\n\tif I_CompareCounter elephant_gate_s = 1\n\tset_counter elephant_gate_s 0\n\tset_counter rally_walls_s 1\n\tend_if\n\n\tif I_CompareCounter second_ring_s = 1\n\tand I_IsBattleSettlementCastle\n\tand I_BattleSettlementFortificationLevel > 2\n\tset_counter second_ring_s 0\n\tset_counter rally_walls_s 2\n\tend_if\n\n\tif I_CompareCounter third_ring_s = 1\n\tand I_IsBattleSettlementCastle\n\tand I_BattleSettlementFortificationLevel > 2\n\tset_counter third_ring_s 0\n\tset_counter del_objective_s 1\n\tend_if\n\nend_if\nend_monitor\n\nmonitor_event BattleWallsCaptured TrueCondition\n\tand I_CompareCounter panel_check = 1\n\nif I_BattleIsSiegeBattle\n\tand ! I_BattlePlayerArmyIsAttacker\n\tand I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\n\tif I_CompareCounter elephant_gate = 1\n\tset_counter elephant_gate 0\n\tset_counter rally_walls 1\n\tend_if\n\n\tif I_CompareCounter second_ring = 1\n\tand I_IsBattleSettlementCastle\n\tand I_BattleSettlementFortificationLevel > 2\n\tset_counter second_ring 0\n\tset_counter rally_walls 2\n\tend_if\n\n\tif I_CompareCounter third_ring = 1\n\tand I_IsBattleSettlementCastle\n\tand I_BattleSettlementFortificationLevel > 2\n\tset_counter third_ring 0\n\tset_counter del_objective 1\n\tend_if\n\nend_if\nif I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\n\tif I_CompareCounter elephant_gate_s = 1\n\tset_counter elephant_gate_s 0\n\tset_counter rally_walls_s 1\n\tend_if\n\n\tif I_CompareCounter second_ring_s = 1\n\tand I_IsBattleSettlementCastle\n\tand I_BattleSettlementFortificationLevel > 2\n\tset_counter second_ring_s 0\n\tset_counter rally_walls_s 2\n\tend_if\n\n\tif I_CompareCounter third_ring_s = 1\n\tand I_IsBattleSettlementCastle\n\tand I_BattleSettlementFortificationLevel > 2\n\tset_counter third_ring_s 0\n\tset_counter del_objective_s 1\n\tend_if\n\nend_if\nend_monitor\n\nmonitor_event BattleWallsBreachedByEngine TrueCondition\n\tand I_CompareCounter panel_check = 1\n\nif I_BattleIsSiegeBattle\n\tand ! I_BattlePlayerArmyIsAttacker\n\tand I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\n\tif I_CompareCounter elephant_gate = 1\n\tai_gta_del_objective 0\n\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tset_counter elephant_gate 2\n\tset_counter rally_walls 0\n\tend_if\n\n\tif I_CompareCounter second_ring = 1\n\tand I_IsBattleSettlementCastle\n\tand I_BattleSettlementFortificationLevel > 2\n\tai_gta_del_objective 0\n\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tset_counter second_ring 2\n\tset_counter rally_walls 2\n\tend_if\n\n\tif I_CompareCounter third_ring = 1\n\tand I_IsBattleSettlementCastle\n\tand I_BattleSettlementFortificationLevel > 2\n\tset_counter third_ring 0\n\tset_counter del_objective 1\n\tend_if\n\nend_if\nif I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\n\tif I_CompareCounter elephant_gate_s = 1\n\tai_gta_del_objective 1\n\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tset_counter elephant_gate_s 2\n\tset_counter rally_walls_s 1\n" +
                    "\tend_if\n\n\tif I_CompareCounter second_ring_s = 1\n\tand I_IsBattleSettlementCastle\n\tand I_BattleSettlementFortificationLevel > 2\n\tai_gta_del_objective 1\n\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tset_counter second_ring_s 2\n\tset_counter rally_walls_s 2\n\tend_if\n\n\tif I_CompareCounter third_ring_s = 1\n\tand I_IsBattleSettlementCastle\n\tand I_BattleSettlementFortificationLevel > 2\n\tset_counter third_ring_s 0\n\tset_counter del_objective_s 1\n\tend_if\n\nend_if\nend_monitor\n\n;;;;;;;Sally Out Assault\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter sally-out_fix = 1\n\tand ! I_BattleIsFortBattle\n\tand I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_BattleSettlementFortificationLevel < 3\n\tand I_IsBattleSettlementCastle\n\tand I_BattleEnemyArmyNumberOfSpecialAbility drop_engines > 2\n\tand I_BattlePlayerAllianceOddsAgainst > 2.0\n\n\tset_counter kill_sally 1\n\tai_gta_plan_set 1 ATTACK_SETTLEMENT\n\tai_active_set on\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tset_counter elephant_fix 1\n\tbattle_wait 1\n\tend_if\n\tset_counter army2_sally 1\n\tif I_BattleEnemyArmyNumberOfClassAndCategory missile siege = 0\n\tset_counter wall_advance_s 1\n\tend_if\n\tset_counter sally-out_fix 0\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter sally-out_fix = 1\n\tand ! I_BattleIsFortBattle\n\tand I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_BattleSettlementFortificationLevel > 2\n\tand I_IsBattleSettlementCastle\n\tand I_BattleEnemyArmyNumberOfSpecialAbility drop_engines > 3\n\tand I_BattlePlayerAllianceOddsAgainst > 2.5\n\n\tset_counter kill_sally 1\n\tai_gta_plan_set 1 ATTACK_SETTLEMENT\n\tai_active_set on\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tset_counter elephant_fix 1\n\tbattle_wait 1\n\tend_if\n\tset_counter army2_sally 1\n\tif I_BattleEnemyArmyNumberOfClassAndCategory missile siege = 0\n\tset_counter wall_advance_s 1\n\tend_if\n\tset_counter sally-out_fix 0\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter sally-out_fix = 1\n\tand ! I_BattleIsFortBattle\n\tand I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_BattleSettlementFortificationLevel < 3\n\tand ! I_IsBattleSettlementCastle\n\tand I_BattleEnemyArmyNumberOfSpecialAbility drop_engines > 2\n\tand I_BattlePlayerAllianceOddsAgainst > 1.7\n\n\tset_counter kill_sally 1\n\tai_gta_plan_set 1 ATTACK_SETTLEMENT\n\tai_active_set on\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tset_counter elephant_fix 1\n\tbattle_wait 1\n\tend_if\n\tset_counter army2_sally 1\n\tif I_BattleEnemyArmyNumberOfClassAndCategory missile siege = 0\n\tset_counter wall_advance_s 1\n\tend_if\n\tset_counter sally-out_fix 0\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter sally-out_fix = 1\n\tand ! I_BattleIsFortBattle\n\tand I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_BattleSettlementFortificationLevel > 2\n\tand ! I_IsBattleSettlementCastle\n\tand I_BattleEnemyArmyNumberOfSpecialAbility drop_engines > 2\n\tand I_BattlePlayerAllianceOddsAgainst > 2.2\n\n\tset_counter kill_sally 1\n\tai_gta_plan_set 1 ATTACK_SETTLEMENT\n\tai_active_set on\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tset_counter elephant_fix 1\n\tbattle_wait 1\n\tend_if\n\tset_counter army2_sally 1\n\tif I_BattleEnemyArmyNumberOfClassAndCategory missile siege = 0\n\tset_counter wall_advance_s 1\n\tend_if\n\tset_counter sally-out_fix 0\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter sally-out_fix = 1\n\tand I_BattleIsFortBattle\n\tand I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_BattleEnemyArmyNumberOfSpecialAbility drop_engines > 2\n\tand I_BattlePlayerAllianceOddsAgainst > 1.8\n\n\tset_counter kill_sally 1\n\tai_gta_plan_set 1 ATTACK_SETTLEMENT\n\tai_active_set on\n\tif I_BattleEnemyArmyNumberOfMountClass elephant > 0\n\tset_counter elephant_fix 1\n\tbattle_wait 1\n\tend_if\n\tset_counter army2_sally 1\n\tif I_BattleEnemyArmyNumberOfClassAndCategory missile siege = 0\n\tset_counter wall_advance_s 1\n\tend_if\n\tset_counter sally-out_fix 0\nend_monitor\n\n;;;;;;;Sally Out Defense\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter sally_defense = 1\n\tand I_CompareCounter kill_sally = 0\n;\tand ! I_BattleIsFortBattle\n\tand I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\n\tif I_CompareCounter army_south = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -750, 100\n\tend_if\n\tif I_CompareCounter army_north = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 750, 100\n\tend_if\n\tif I_CompareCounter army_east = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 750, 0, 100\n\tend_if\n\tif I_CompareCounter army_west = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -750, 0, 100\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tai_gta_add_unit_label 1 0 a2u1\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tai_gta_add_unit_label 1 0 a2u2\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tai_gta_add_unit_label 1 0 a2u3\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tai_gta_add_unit_label 1 0 a2u4\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tai_gta_add_unit_label 1 0 a2u5\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tai_gta_add_unit_label 1 0 a2u6\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tai_gta_add_unit_label 1 0 a2u7\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tai_gta_add_unit_label 1 0 a2u8\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tai_gta_add_unit_label 1 0 a2u9\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tai_gta_add_unit_label 1 0 a2u10\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tai_gta_add_unit_label 1 0 a2u11\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tai_gta_add_unit_label 1 0 a2u12\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tai_gta_add_unit_label 1 0 a2u13\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tai_gta_add_unit_label 1 0 a2u14\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tai_gta_add_unit_label 1 0 a2u15\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tai_gta_add_unit_label 1 0 a2u16\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tai_gta_add_unit_label 1 0 a2u17\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tai_gta_add_unit_label 1 0 a2u18\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tai_gta_add_unit_label 1 0 a2u19\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tai_gta_add_unit_label 1 0 a2u20\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n" +
                    "\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n\tset_counter sally_defense 2\n\tset_counter defend_location 1\n;\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_defense = 2\n;\tand I_BattlePlayerArmyNumberOfClassAndCategory missile siege > 0\n\tand I_UnitDistanceFromPosition a2u1 1 1 > 630\n\tand ! I_UnitEnemyUnitInRadius a2u1 160\n\tand ! I_IsUnitGroupEngaged army2\n\n\tset_counter sally_defense 0\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif I_IsUnitUnderFire a2u1\n\tinc_counter unit_under_fire 2\n\tend_if\n\tif I_UnitStatus a2u1 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u1 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u1 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif I_IsUnitUnderFire a2u2\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u2 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u2 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u2 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif I_IsUnitUnderFire a2u3\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u3 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u3 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u3 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif I_IsUnitUnderFire a2u4\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u4 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u4 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u4 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif I_IsUnitUnderFire a2u5\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u5 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u5 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u5 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif I_IsUnitUnderFire a2u6\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u6 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u6 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u6 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif I_IsUnitUnderFire a2u7\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u7 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u7 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u7 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif I_IsUnitUnderFire a2u8\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u8 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u8 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u8 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif I_IsUnitUnderFire a2u9\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u9 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u9 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u9 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif I_IsUnitUnderFire a2u10\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u10 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u10 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u10 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif I_IsUnitUnderFire a2u11\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u11 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u11 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u11 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif I_IsUnitUnderFire a2u12\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u12 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u12 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u12 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif I_IsUnitUnderFire a2u13\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u13 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u13 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u13 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif I_IsUnitUnderFire a2u14\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u14 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u14 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u14 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif I_IsUnitUnderFire a2u15\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u15 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u15 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u15 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif I_IsUnitUnderFire a2u16\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u16 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u16 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u16 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif I_IsUnitUnderFire a2u17\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u17 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u17 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u17 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif I_IsUnitUnderFire a2u18\n\tinc_counter unit_under_fire 1\n" +
                    "\tend_if\n\tif I_UnitStatus a2u18 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u18 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u18 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif I_IsUnitUnderFire a2u19\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u19 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u19 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u19 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif I_IsUnitUnderFire a2u20\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u20 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u20 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u20 charging\n\tinc_counter reform_back 1\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n\tif I_CompareCounter sally_reinf > 0\n\tand I_UnitDistanceFromUnit a4u1 a2u1 < 300\n\tif I_IsUnitUnderFire a4u1\n\tinc_counter unit_under_fire 2\n\tend_if\n\tif I_UnitStatus a4u1 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a4u1 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a4u1 charging\n\tinc_counter reform_back 1\n\tend_if\n\tend_if\n\nif I_CompareCounter unit_under_fire > 0\nand I_CompareCounter reform_back < 1\n\n\tai_gta_del_objective 1\n\tbattle_wait 0.5\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\n\tai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif ! I_UnitDestroyed a2u1\n\tand ! I_UnitStatus a2u1 left_battle\n\tai_gta_add_unit_label 1 0 a2u1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif ! I_UnitDestroyed a2u2\n\tand ! I_UnitStatus a2u2 left_battle\n\tai_gta_add_unit_label 1 0 a2u2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif ! I_UnitDestroyed a2u3\n\tand ! I_UnitStatus a2u3 left_battle\n\tai_gta_add_unit_label 1 0 a2u3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif ! I_UnitDestroyed a2u4\n\tand ! I_UnitStatus a2u4 left_battle\n\tai_gta_add_unit_label 1 0 a2u4\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif ! I_UnitDestroyed a2u5\n\tand ! I_UnitStatus a2u5 left_battle\n\tai_gta_add_unit_label 1 0 a2u5\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif ! I_UnitDestroyed a2u6\n\tand ! I_UnitStatus a2u6 left_battle\n\tai_gta_add_unit_label 1 0 a2u6\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif ! I_UnitDestroyed a2u7\n\tand ! I_UnitStatus a2u7 left_battle\n\tai_gta_add_unit_label 1 0 a2u7\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif ! I_UnitDestroyed a2u8\n\tand ! I_UnitStatus a2u8 left_battle\n\tai_gta_add_unit_label 1 0 a2u8\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif ! I_UnitDestroyed a2u9\n\tand ! I_UnitStatus a2u9 left_battle\n\tai_gta_add_unit_label 1 0 a2u9\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif ! I_UnitDestroyed a2u10\n\tand ! I_UnitStatus a2u10 left_battle\n\tai_gta_add_unit_label 1 0 a2u10\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif ! I_UnitDestroyed a2u11\n\tand ! I_UnitStatus a2u11 left_battle\n\tai_gta_add_unit_label 1 0 a2u11\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif ! I_UnitDestroyed a2u12\n\tand ! I_UnitStatus a2u12 left_battle\n\tai_gta_add_unit_label 1 0 a2u12\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif ! I_UnitDestroyed a2u13\n\tand ! I_UnitStatus a2u13 left_battle\n\tai_gta_add_unit_label 1 0 a2u13\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif ! I_UnitDestroyed a2u14\n\tand ! I_UnitStatus a2u14 left_battle\n\tai_gta_add_unit_label 1 0 a2u14\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif ! I_UnitDestroyed a2u15\n\tand ! I_UnitStatus a2u15 left_battle\n\tai_gta_add_unit_label 1 0 a2u15\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif ! I_UnitDestroyed a2u16\n\tand ! I_UnitStatus a2u16 left_battle\n\tai_gta_add_unit_label 1 0 a2u16\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif ! I_UnitDestroyed a2u17\n\tand ! I_UnitStatus a2u17 left_battle\n\tai_gta_add_unit_label 1 0 a2u17\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif ! I_UnitDestroyed a2u18\n\tand ! I_UnitStatus a2u18 left_battle\n\tai_gta_add_unit_label 1 0 a2u18\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif ! I_UnitDestroyed a2u19\n\tand ! I_UnitStatus a2u19 left_battle\n\tai_gta_add_unit_label 1 0 a2u19\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif ! I_UnitDestroyed a2u20\n\tand ! I_UnitStatus a2u20 left_battle\n\tai_gta_add_unit_label 1 0 a2u20\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n;\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tinc_counter reform_multi 1\n\tset_counter unit_under_fire 0\n\tset_counter defend_location 2\n\tset_counter sally_defense_check 1\n\tbattle_wait 30\n\tif I_CompareCounter sally_defense_check = 1\n\tset_counter sally_defense 3\n\tend_if\nend_if\n\n\tif I_CompareCounter sally_defense = 0\n\tset_counter sally_defense 2\n\tend_if\n\tset_counter reform_back 0\n\tbattle_wait 7\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_defense = 2\n;\tand I_BattlePlayerArmyNumberOfClassAndCategory missile siege > 0\n\tand I_UnitDistanceFromPosition a2u1 1 1 > 560\n" +
                    "\tand I_UnitDistanceFromPosition a2u1 1 1 < 630\n\tand ! I_UnitEnemyUnitInRadius a2u1 160\n\tand ! I_IsUnitGroupEngaged army2\n\n\tset_counter sally_defense 0\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif I_IsUnitUnderFire a2u1\n\tinc_counter unit_under_fire 2\n\tend_if\n\tif I_UnitStatus a2u1 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u1 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u1 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif I_IsUnitUnderFire a2u2\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u2 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u2 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u2 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif I_IsUnitUnderFire a2u3\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u3 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u3 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u3 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif I_IsUnitUnderFire a2u4\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u4 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u4 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u4 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif I_IsUnitUnderFire a2u5\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u5 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u5 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u5 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif I_IsUnitUnderFire a2u6\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u6 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u6 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u6 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif I_IsUnitUnderFire a2u7\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u7 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u7 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u7 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif I_IsUnitUnderFire a2u8\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u8 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u8 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u8 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif I_IsUnitUnderFire a2u9\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u9 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u9 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u9 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif I_IsUnitUnderFire a2u10\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u10 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u10 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u10 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif I_IsUnitUnderFire a2u11\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u11 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u11 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u11 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif I_IsUnitUnderFire a2u12\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u12 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u12 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u12 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif I_IsUnitUnderFire a2u13\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u13 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u13 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u13 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif I_IsUnitUnderFire a2u14\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u14 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u14 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u14 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif I_IsUnitUnderFire a2u15\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u15 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u15 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u15 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif I_IsUnitUnderFire a2u16\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u16 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u16 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u16 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif I_IsUnitUnderFire a2u17\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u17 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u17 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u17 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif I_IsUnitUnderFire a2u18\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u18 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u18 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u18 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif I_IsUnitUnderFire a2u19\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u19 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u19 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u19 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif I_IsUnitUnderFire a2u20\n\tinc_counter unit_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u20 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u20 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u20 charging\n\tinc_counter reform_back 1\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n\tif I_CompareCounter sally_reinf > 0\n\tand I_UnitDistanceFromUnit a4u1 a2u1 < 300\n\tif I_IsUnitUnderFire a4u1\n\tinc_counter unit_under_fire 2\n\tend_if\n\tif I_UnitStatus a4u1 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a4u1 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a4u1 charging\n\tinc_counter reform_back 1\n\tend_if\n\tend_if\n\nif I_CompareCounter repeat_test1 = 1\nset_counter repeat_test1 2\nend_if\nif I_CompareCounter unit_under_fire > 0\nand I_CompareCounter reform_back < 1\nand I_CompareCounter repeat_test1 = 0\n\nset_counter unit_under_fire 0\n" +
                    "set_counter repeat_test1 1\n;battle_wait 10\nend_if\n\nif I_CompareCounter unit_under_fire > 0\nand I_CompareCounter reform_back < 1\nand I_CompareCounter repeat_test1 = 2\n\n\tai_gta_del_objective 1\n\tbattle_wait 0.5\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\n\tai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif ! I_UnitDestroyed a2u1\n\tand ! I_UnitStatus a2u1 left_battle\n\tai_gta_add_unit_label 1 0 a2u1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif ! I_UnitDestroyed a2u2\n\tand ! I_UnitStatus a2u2 left_battle\n\tai_gta_add_unit_label 1 0 a2u2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif ! I_UnitDestroyed a2u3\n\tand ! I_UnitStatus a2u3 left_battle\n\tai_gta_add_unit_label 1 0 a2u3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif ! I_UnitDestroyed a2u4\n\tand ! I_UnitStatus a2u4 left_battle\n\tai_gta_add_unit_label 1 0 a2u4\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif ! I_UnitDestroyed a2u5\n\tand ! I_UnitStatus a2u5 left_battle\n\tai_gta_add_unit_label 1 0 a2u5\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif ! I_UnitDestroyed a2u6\n\tand ! I_UnitStatus a2u6 left_battle\n\tai_gta_add_unit_label 1 0 a2u6\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif ! I_UnitDestroyed a2u7\n\tand ! I_UnitStatus a2u7 left_battle\n\tai_gta_add_unit_label 1 0 a2u7\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif ! I_UnitDestroyed a2u8\n\tand ! I_UnitStatus a2u8 left_battle\n\tai_gta_add_unit_label 1 0 a2u8\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif ! I_UnitDestroyed a2u9\n\tand ! I_UnitStatus a2u9 left_battle\n\tai_gta_add_unit_label 1 0 a2u9\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif ! I_UnitDestroyed a2u10\n\tand ! I_UnitStatus a2u10 left_battle\n\tai_gta_add_unit_label 1 0 a2u10\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif ! I_UnitDestroyed a2u11\n\tand ! I_UnitStatus a2u11 left_battle\n\tai_gta_add_unit_label 1 0 a2u11\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif ! I_UnitDestroyed a2u12\n\tand ! I_UnitStatus a2u12 left_battle\n\tai_gta_add_unit_label 1 0 a2u12\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif ! I_UnitDestroyed a2u13\n\tand ! I_UnitStatus a2u13 left_battle\n\tai_gta_add_unit_label 1 0 a2u13\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif ! I_UnitDestroyed a2u14\n\tand ! I_UnitStatus a2u14 left_battle\n\tai_gta_add_unit_label 1 0 a2u14\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif ! I_UnitDestroyed a2u15\n\tand ! I_UnitStatus a2u15 left_battle\n\tai_gta_add_unit_label 1 0 a2u15\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif ! I_UnitDestroyed a2u16\n\tand ! I_UnitStatus a2u16 left_battle\n\tai_gta_add_unit_label 1 0 a2u16\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif ! I_UnitDestroyed a2u17\n\tand ! I_UnitStatus a2u17 left_battle\n\tai_gta_add_unit_label 1 0 a2u17\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif ! I_UnitDestroyed a2u18\n\tand ! I_UnitStatus a2u18 left_battle\n\tai_gta_add_unit_label 1 0 a2u18\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif ! I_UnitDestroyed a2u19\n\tand ! I_UnitStatus a2u19 left_battle\n\tai_gta_add_unit_label 1 0 a2u19\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif ! I_UnitDestroyed a2u20\n\tand ! I_UnitStatus a2u20 left_battle\n\tai_gta_add_unit_label 1 0 a2u20\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n;\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tinc_counter reform_multi 1\n\tset_counter unit_under_fire 0\n\tset_counter defend_location 2\n\tset_counter sally_defense_check 1\n\tbattle_wait 30\n\tif I_CompareCounter sally_defense_check = 1\n\tset_counter sally_defense 3\n\tend_if\nend_if\n\n\tif I_CompareCounter sally_defense = 0\n\tset_counter sally_defense 2\n\tend_if\n\tset_counter reform_back 0\n\tbattle_wait 7\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter sally_defense = 2\n\tand I_BattleIsSallyOutBattle\n\tand I_UnitDistanceFromPosition a2u1 1 1 > 630\n\tand I_UnitEnemyUnitInRadius a2u1 160\n\n\tset_counter sally_defense 0\n\tai_gta_del_objective 1\n\tbattle_wait 0.5\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif ! I_UnitDestroyed a2u1\n\tand ! I_UnitStatus a2u1 left_battle\n\tai_gta_add_unit_label 1 0 a2u1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif ! I_UnitDestroyed a2u2\n\tand ! I_UnitStatus a2u2 left_battle\n\tai_gta_add_unit_label 1 0 a2u2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif ! I_UnitDestroyed a2u3\n\tand ! I_UnitStatus a2u3 left_battle\n\tai_gta_add_unit_label 1 0 a2u3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif ! I_UnitDestroyed a2u4\n\tand ! I_UnitStatus a2u4 left_battle\n\tai_gta_add_unit_label 1 0 a2u4\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif ! I_UnitDestroyed a2u5\n\tand ! I_UnitStatus a2u5 left_battle\n\tai_gta_add_unit_label 1 0 a2u5\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif ! I_UnitDestroyed a2u6\n\tand ! I_UnitStatus a2u6 left_battle\n\tai_gta_add_unit_label 1 0 a2u6\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif ! I_UnitDestroyed a2u7\n\tand ! I_UnitStatus a2u7 left_battle\n\tai_gta_add_unit_label 1 0 a2u7\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif ! I_UnitDestroyed a2u8\n\tand ! I_UnitStatus a2u8 left_battle\n\tai_gta_add_unit_label 1 0 a2u8\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif ! I_UnitDestroyed a2u9\n\tand ! I_UnitStatus a2u9 left_battle\n\tai_gta_add_unit_label 1 0 a2u9\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif ! I_UnitDestroyed a2u10\n\tand ! I_UnitStatus a2u10 left_battle\n\tai_gta_add_unit_label 1 0 a2u10\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif ! I_UnitDestroyed a2u11\n\tand ! I_UnitStatus a2u11 left_battle\n\tai_gta_add_unit_label 1 0 a2u11\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif ! I_UnitDestroyed a2u12\n\tand ! I_UnitStatus a2u12 left_battle\n\tai_gta_add_unit_label 1 0 a2u12\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n" +
                    "\tif ! I_UnitDestroyed a2u13\n\tand ! I_UnitStatus a2u13 left_battle\n\tai_gta_add_unit_label 1 0 a2u13\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif ! I_UnitDestroyed a2u14\n\tand ! I_UnitStatus a2u14 left_battle\n\tai_gta_add_unit_label 1 0 a2u14\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif ! I_UnitDestroyed a2u15\n\tand ! I_UnitStatus a2u15 left_battle\n\tai_gta_add_unit_label 1 0 a2u15\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif ! I_UnitDestroyed a2u16\n\tand ! I_UnitStatus a2u16 left_battle\n\tai_gta_add_unit_label 1 0 a2u16\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif ! I_UnitDestroyed a2u17\n\tand ! I_UnitStatus a2u17 left_battle\n\tai_gta_add_unit_label 1 0 a2u17\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif ! I_UnitDestroyed a2u18\n\tand ! I_UnitStatus a2u18 left_battle\n\tai_gta_add_unit_label 1 0 a2u18\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif ! I_UnitDestroyed a2u19\n\tand ! I_UnitStatus a2u19 left_battle\n\tai_gta_add_unit_label 1 0 a2u19\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif ! I_UnitDestroyed a2u20\n\tand ! I_UnitStatus a2u20 left_battle\n\tai_gta_add_unit_label 1 0 a2u20\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n;\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tinc_counter reform_multi 1\n\tset_counter defend_location 2\n\tset_counter sally_defense_check 1\n\tbattle_wait 30\n\tif I_CompareCounter sally_defense_check = 1\n\tset_counter sally_defense 3\n\tend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter sally_defense = 2\n\tand I_UnitDistanceFromPosition a2u1 1 1 > 560\n\tand I_UnitDistanceFromPosition a2u1 1 1 < 630\n\tand I_UnitEnemyUnitInRadius a2u1 160\n\n\tset_counter sally_defense 0\n\tai_gta_del_objective 1\n\tbattle_wait 0.5\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif ! I_UnitDestroyed a2u1\n\tand ! I_UnitStatus a2u1 left_battle\n\tai_gta_add_unit_label 1 0 a2u1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif ! I_UnitDestroyed a2u2\n\tand ! I_UnitStatus a2u2 left_battle\n\tai_gta_add_unit_label 1 0 a2u2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif ! I_UnitDestroyed a2u3\n\tand ! I_UnitStatus a2u3 left_battle\n\tai_gta_add_unit_label 1 0 a2u3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif ! I_UnitDestroyed a2u4\n\tand ! I_UnitStatus a2u4 left_battle\n\tai_gta_add_unit_label 1 0 a2u4\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif ! I_UnitDestroyed a2u5\n\tand ! I_UnitStatus a2u5 left_battle\n\tai_gta_add_unit_label 1 0 a2u5\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif ! I_UnitDestroyed a2u6\n\tand ! I_UnitStatus a2u6 left_battle\n\tai_gta_add_unit_label 1 0 a2u6\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif ! I_UnitDestroyed a2u7\n\tand ! I_UnitStatus a2u7 left_battle\n\tai_gta_add_unit_label 1 0 a2u7\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif ! I_UnitDestroyed a2u8\n\tand ! I_UnitStatus a2u8 left_battle\n\tai_gta_add_unit_label 1 0 a2u8\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif ! I_UnitDestroyed a2u9\n\tand ! I_UnitStatus a2u9 left_battle\n\tai_gta_add_unit_label 1 0 a2u9\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif ! I_UnitDestroyed a2u10\n\tand ! I_UnitStatus a2u10 left_battle\n\tai_gta_add_unit_label 1 0 a2u10\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif ! I_UnitDestroyed a2u11\n\tand ! I_UnitStatus a2u11 left_battle\n\tai_gta_add_unit_label 1 0 a2u11\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif ! I_UnitDestroyed a2u12\n\tand ! I_UnitStatus a2u12 left_battle\n\tai_gta_add_unit_label 1 0 a2u12\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif ! I_UnitDestroyed a2u13\n\tand ! I_UnitStatus a2u13 left_battle\n\tai_gta_add_unit_label 1 0 a2u13\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif ! I_UnitDestroyed a2u14\n\tand ! I_UnitStatus a2u14 left_battle\n\tai_gta_add_unit_label 1 0 a2u14\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif ! I_UnitDestroyed a2u15\n\tand ! I_UnitStatus a2u15 left_battle\n\tai_gta_add_unit_label 1 0 a2u15\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif ! I_UnitDestroyed a2u16\n\tand ! I_UnitStatus a2u16 left_battle\n\tai_gta_add_unit_label 1 0 a2u16\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif ! I_UnitDestroyed a2u17\n\tand ! I_UnitStatus a2u17 left_battle\n\tai_gta_add_unit_label 1 0 a2u17\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif ! I_UnitDestroyed a2u18\n\tand ! I_UnitStatus a2u18 left_battle\n\tai_gta_add_unit_label 1 0 a2u18\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif ! I_UnitDestroyed a2u19\n\tand ! I_UnitStatus a2u19 left_battle\n\tai_gta_add_unit_label 1 0 a2u19\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif ! I_UnitDestroyed a2u20\n\tand ! I_UnitStatus a2u20 left_battle\n\tai_gta_add_unit_label 1 0 a2u20\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n;\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tinc_counter reform_multi 1\n\tset_counter defend_location 2\n\tset_counter sally_defense_check 1\n\tbattle_wait 30\n\tif I_CompareCounter sally_defense_check = 1\n\tset_counter sally_defense 3\n\tend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_defense = 3\n\tand I_CompareCounter reform_multi < 2\n;\tand I_UnitDistanceFromPosition a2u1 1 1 < 660\n\tand I_UnitGroupDistanceFromPosition army2 1 1 < 630\n\tand ! I_IsUnitGroupEngaged army2\n\n\tset_counter sally_defense 6\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif I_UnitStatus a2u1 fighting\n\tinc_counter reform_back 3\n\tend_if\n\tif I_UnitStatus a2u1 pursuing\n\tinc_counter reform_back 3\n\tend_if\n\tif I_UnitStatus a2u1 charging\n\tinc_counter reform_back 3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif I_UnitStatus a2u2 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u2 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u2 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif I_UnitStatus a2u3 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u3 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u3 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif I_UnitStatus a2u4 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u4 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u4 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif I_UnitStatus a2u5 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u5 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u5 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif I_UnitStatus a2u6 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u6 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u6 charging\n\tinc_counter reform_back 1\n\tend_if\n\n" +
                    "\tif I_CompareCounter enemy_unit_count > 6\n\tif I_UnitStatus a2u7 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u7 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u7 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif I_UnitStatus a2u8 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u8 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u8 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif I_UnitStatus a2u9 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u9 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u9 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif I_UnitStatus a2u10 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u10 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u10 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif I_UnitStatus a2u11 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u11 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u11 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif I_UnitStatus a2u12 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u12 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u12 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif I_UnitStatus a2u13 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u13 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u13 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif I_UnitStatus a2u14 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u14 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u14 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif I_UnitStatus a2u15 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u15 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u15 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif I_UnitStatus a2u16 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u16 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u16 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif I_UnitStatus a2u17 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u17 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u17 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif I_UnitStatus a2u18 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u18 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u18 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif I_UnitStatus a2u19 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u19 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u19 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif I_UnitStatus a2u20 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u20 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u20 charging\n\tinc_counter reform_back 1\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n\tif I_CompareCounter repeat_test2 = 1\n\tset_counter repeat_test2 2\n\tend_if\n\tif I_CompareCounter reform_back = 0\n\tand I_CompareCounter repeat_test2 = 0\n\n\tset_counter repeat_test2 1\n\tset_counter sally_defense 3\n\tend_if\n\nif I_CompareCounter reform_back = 0\nand I_CompareCounter repeat_test2 = 2\n\n\tai_gta_del_objective 1\n\tbattle_wait 0.5\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\n\tif I_CompareCounter army_south = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -750, 100\n\tend_if\n\tif I_CompareCounter army_north = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 750, 100\n\tend_if\n\tif I_CompareCounter army_east = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 750, 0, 100\n\tend_if\n\tif I_CompareCounter army_west = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -750, 0, 100\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif ! I_UnitDestroyed a2u1\n\tand ! I_UnitStatus a2u1 left_battle\n\tai_gta_add_unit_label 1 0 a2u1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif ! I_UnitDestroyed a2u2\n\tand ! I_UnitStatus a2u2 left_battle\n\tai_gta_add_unit_label 1 0 a2u2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif ! I_UnitDestroyed a2u3\n\tand ! I_UnitStatus a2u3 left_battle\n\tai_gta_add_unit_label 1 0 a2u3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif ! I_UnitDestroyed a2u4\n" +
                    "\tand ! I_UnitStatus a2u4 left_battle\n\tai_gta_add_unit_label 1 0 a2u4\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif ! I_UnitDestroyed a2u5\n\tand ! I_UnitStatus a2u5 left_battle\n\tai_gta_add_unit_label 1 0 a2u5\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif ! I_UnitDestroyed a2u6\n\tand ! I_UnitStatus a2u6 left_battle\n\tai_gta_add_unit_label 1 0 a2u6\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif ! I_UnitDestroyed a2u7\n\tand ! I_UnitStatus a2u7 left_battle\n\tai_gta_add_unit_label 1 0 a2u7\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif ! I_UnitDestroyed a2u8\n\tand ! I_UnitStatus a2u8 left_battle\n\tai_gta_add_unit_label 1 0 a2u8\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif ! I_UnitDestroyed a2u9\n\tand ! I_UnitStatus a2u9 left_battle\n\tai_gta_add_unit_label 1 0 a2u9\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif ! I_UnitDestroyed a2u10\n\tand ! I_UnitStatus a2u10 left_battle\n\tai_gta_add_unit_label 1 0 a2u10\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif ! I_UnitDestroyed a2u11\n\tand ! I_UnitStatus a2u11 left_battle\n\tai_gta_add_unit_label 1 0 a2u11\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif ! I_UnitDestroyed a2u12\n\tand ! I_UnitStatus a2u12 left_battle\n\tai_gta_add_unit_label 1 0 a2u12\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif ! I_UnitDestroyed a2u13\n\tand ! I_UnitStatus a2u13 left_battle\n\tai_gta_add_unit_label 1 0 a2u13\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif ! I_UnitDestroyed a2u14\n\tand ! I_UnitStatus a2u14 left_battle\n\tai_gta_add_unit_label 1 0 a2u14\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif ! I_UnitDestroyed a2u15\n\tand ! I_UnitStatus a2u15 left_battle\n\tai_gta_add_unit_label 1 0 a2u15\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif ! I_UnitDestroyed a2u16\n\tand ! I_UnitStatus a2u16 left_battle\n\tai_gta_add_unit_label 1 0 a2u16\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif ! I_UnitDestroyed a2u17\n\tand ! I_UnitStatus a2u17 left_battle\n\tai_gta_add_unit_label 1 0 a2u17\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif ! I_UnitDestroyed a2u18\n\tand ! I_UnitStatus a2u18 left_battle\n\tai_gta_add_unit_label 1 0 a2u18\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif ! I_UnitDestroyed a2u19\n\tand ! I_UnitStatus a2u19 left_battle\n\tai_gta_add_unit_label 1 0 a2u19\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif ! I_UnitDestroyed a2u20\n\tand ! I_UnitStatus a2u20 left_battle\n\tai_gta_add_unit_label 1 0 a2u20\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n\tbattle_wait 0.5\n;\tunit_group_order_halt army2\n;\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tset_counter sally_defense 2\n\tset_counter defend_location 1\n\tset_counter reform_multi 1\n\tset_counter reset_position 0\n\tset_counter repeat_test1 0\n\tset_counter repeat_test2 0\n\tset_counter repeat_test3 0\n\tset_counter repeat_test4 0\n\tset_counter repeat_test5 0\n\tset_counter repeat_test6 0\nend_if\n\nif I_CompareCounter reform_back > 0\nand I_CompareCounter reform_back < 3\n\nset_counter reform_back 0\nset_counter sally_defense 3\nbattle_wait 20\nend_if\n\nif I_CompareCounter reform_back > 2\n\nset_counter reform_back 0\nset_counter sally_defense 3\n;battle_wait 60\nbattle_wait 30\nif I_CompareCounter sally_defense > 2\nbattle_wait 30\nend_if\nend_if\nset_counter reform_back 0\nif I_CompareCounter repeat_test2 = 1\nbattle_wait 20\nend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_defense = 3\n\tand I_CompareCounter reform_multi = 2\n;\tand I_UnitDistanceFromPosition a2u1 1 1 < 620\n\tand I_UnitGroupDistanceFromPosition army2 1 1 < 600\n\tand ! I_IsUnitGroupEngaged army2\n\n\tset_counter sally_defense 6\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif I_UnitStatus a2u1 fighting\n\tinc_counter reform_back 3\n\tend_if\n\tif I_UnitStatus a2u1 pursuing\n\tinc_counter reform_back 3\n\tend_if\n\tif I_UnitStatus a2u1 charging\n\tinc_counter reform_back 3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif I_UnitStatus a2u2 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u2 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u2 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif I_UnitStatus a2u3 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u3 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u3 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif I_UnitStatus a2u4 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u4 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u4 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif I_UnitStatus a2u5 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u5 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u5 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif I_UnitStatus a2u6 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u6 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u6 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif I_UnitStatus a2u7 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u7 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u7 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif I_UnitStatus a2u8 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u8 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u8 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif I_UnitStatus a2u9 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u9 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u9 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif I_UnitStatus a2u10 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u10 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u10 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif I_UnitStatus a2u11 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u11 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u11 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif I_UnitStatus a2u12 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u12 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u12 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif I_UnitStatus a2u13 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u13 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u13 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif I_UnitStatus a2u14 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u14 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u14 charging\n" +
                    "\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif I_UnitStatus a2u15 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u15 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u15 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif I_UnitStatus a2u16 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u16 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u16 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif I_UnitStatus a2u17 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u17 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u17 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif I_UnitStatus a2u18 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u18 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u18 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif I_UnitStatus a2u19 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u19 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u19 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif I_UnitStatus a2u20 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u20 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u20 charging\n\tinc_counter reform_back 1\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n\tif I_CompareCounter repeat_test3 = 1\n\tset_counter repeat_test3 2\n\tend_if\n\tif I_CompareCounter reform_back = 0\n\tand I_CompareCounter repeat_test3 = 0\n\n\tset_counter repeat_test3 1\n\tset_counter sally_defense 3\n\tend_if\n\nif I_CompareCounter reform_back = 0\nand I_CompareCounter repeat_test3 = 2\n\n\tif ! I_UnitEnemyUnitInRadius a2u1 150\n\tai_gta_del_objective 1\n\tbattle_wait 0.5\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tif I_CompareCounter army_south = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -750, 100\n\tend_if\n\tif I_CompareCounter army_north = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 750, -100\n\tend_if\n\tif I_CompareCounter army_east = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 750, 0, -100\n\tend_if\n\tif I_CompareCounter army_west = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -750, 0, 100\n\tend_if\n\tset_counter reform_multi 1\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif ! I_UnitDestroyed a2u1\n\tand ! I_UnitStatus a2u1 left_battle\n\tai_gta_add_unit_label 1 0 a2u1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif ! I_UnitDestroyed a2u2\n\tand ! I_UnitStatus a2u2 left_battle\n\tai_gta_add_unit_label 1 0 a2u2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif ! I_UnitDestroyed a2u3\n\tand ! I_UnitStatus a2u3 left_battle\n\tai_gta_add_unit_label 1 0 a2u3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif ! I_UnitDestroyed a2u4\n\tand ! I_UnitStatus a2u4 left_battle\n\tai_gta_add_unit_label 1 0 a2u4\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif ! I_UnitDestroyed a2u5\n\tand ! I_UnitStatus a2u5 left_battle\n\tai_gta_add_unit_label 1 0 a2u5\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif ! I_UnitDestroyed a2u6\n\tand ! I_UnitStatus a2u6 left_battle\n\tai_gta_add_unit_label 1 0 a2u6\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif ! I_UnitDestroyed a2u7\n\tand ! I_UnitStatus a2u7 left_battle\n\tai_gta_add_unit_label 1 0 a2u7\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif ! I_UnitDestroyed a2u8\n\tand ! I_UnitStatus a2u8 left_battle\n\tai_gta_add_unit_label 1 0 a2u8\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif ! I_UnitDestroyed a2u9\n\tand ! I_UnitStatus a2u9 left_battle\n\tai_gta_add_unit_label 1 0 a2u9\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif ! I_UnitDestroyed a2u10\n\tand ! I_UnitStatus a2u10 left_battle\n\tai_gta_add_unit_label 1 0 a2u10\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif ! I_UnitDestroyed a2u11\n\tand ! I_UnitStatus a2u11 left_battle\n\tai_gta_add_unit_label 1 0 a2u11\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif ! I_UnitDestroyed a2u12\n\tand ! I_UnitStatus a2u12 left_battle\n\tai_gta_add_unit_label 1 0 a2u12\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif ! I_UnitDestroyed a2u13\n\tand ! I_UnitStatus a2u13 left_battle\n\tai_gta_add_unit_label 1 0 a2u13\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif ! I_UnitDestroyed a2u14\n\tand ! I_UnitStatus a2u14 left_battle\n\tai_gta_add_unit_label 1 0 a2u14\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif ! I_UnitDestroyed a2u15\n\tand ! I_UnitStatus a2u15 left_battle\n\tai_gta_add_unit_label 1 0 a2u15\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif ! I_UnitDestroyed a2u16\n\tand ! I_UnitStatus a2u16 left_battle\n\tai_gta_add_unit_label 1 0 a2u16\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif ! I_UnitDestroyed a2u17\n\tand ! I_UnitStatus a2u17 left_battle\n\tai_gta_add_unit_label 1 0 a2u17\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif ! I_UnitDestroyed a2u18\n\tand ! I_UnitStatus a2u18 left_battle\n\tai_gta_add_unit_label 1 0 a2u18\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif ! I_UnitDestroyed a2u19\n\tand ! I_UnitStatus a2u19 left_battle\n\tai_gta_add_unit_label 1 0 a2u19\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif ! I_UnitDestroyed a2u20\n\tand ! I_UnitStatus a2u20 left_battle\n\tai_gta_add_unit_label 1 0 a2u20\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n\tbattle_wait 0.5\n;\tunit_group_order_halt army2\n;\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tset_counter sally_defense 2\n\tset_counter defend_location 1\n\tset_counter reset_position 0\n\tset_counter repeat_test1 0\n\tset_counter repeat_test2 0\n\tset_counter repeat_test3 0\n\tset_counter repeat_test4 0\n" +
                    "\tset_counter repeat_test5 0\n\tset_counter repeat_test6 0\n\tend_if\n\n\tif I_UnitEnemyUnitInRadius a2u1 150\n\tset_counter sally_defense 3\n\tbattle_wait 7\n\tend_if\nend_if\n\nif I_CompareCounter reform_back > 0\nand I_CompareCounter reform_back < 3\n\nset_counter reform_back 0\nset_counter sally_defense 3\nbattle_wait 20\nend_if\n\nif I_CompareCounter reform_back > 2\n\nset_counter reform_back 0\nset_counter sally_defense 3\n;battle_wait 60\nbattle_wait 30\nif I_CompareCounter sally_defense > 2\nbattle_wait 30\nend_if\nend_if\n\nset_counter reform_back 0\nif I_CompareCounter repeat_test3 = 1\nbattle_wait 20\nend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_defense = 3\n\tand I_CompareCounter reform_multi = 3\n;\tand I_UnitDistanceFromPosition a2u1 1 1 < 580\n\tand I_UnitGroupDistanceFromPosition army2 1 1 < 560\n\tand ! I_IsUnitGroupEngaged army2\n\n\tset_counter sally_defense 6\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif I_UnitStatus a2u1 fighting\n\tinc_counter reform_back 3\n\tend_if\n\tif I_UnitStatus a2u1 pursuing\n\tinc_counter reform_back 3\n\tend_if\n\tif I_UnitStatus a2u1 charging\n\tinc_counter reform_back 3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif I_UnitStatus a2u2 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u2 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u2 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif I_UnitStatus a2u3 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u3 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u3 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif I_UnitStatus a2u4 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u4 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u4 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif I_UnitStatus a2u5 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u5 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u5 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif I_UnitStatus a2u6 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u6 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u6 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif I_UnitStatus a2u7 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u7 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u7 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif I_UnitStatus a2u8 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u8 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u8 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif I_UnitStatus a2u9 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u9 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u9 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif I_UnitStatus a2u10 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u10 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u10 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif I_UnitStatus a2u11 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u11 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u11 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif I_UnitStatus a2u12 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u12 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u12 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif I_UnitStatus a2u13 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u13 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u13 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif I_UnitStatus a2u14 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u14 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u14 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif I_UnitStatus a2u15 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u15 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u15 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif I_UnitStatus a2u16 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u16 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u16 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif I_UnitStatus a2u17 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u17 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u17 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif I_UnitStatus a2u18 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u18 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u18 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif I_UnitStatus a2u19 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u19 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u19 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif I_UnitStatus a2u20 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u20 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u20 charging\n\tinc_counter reform_back 1\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n" +
                    "\tif I_CompareCounter sally_reinf > 0\n\tand I_UnitDistanceFromUnit a4u1 a2u1 < 300\n\tif I_UnitStatus a4u1 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a4u1 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a4u1 charging\n\tinc_counter reform_back 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter repeat_test4 = 1\n\tset_counter repeat_test4 2\n\tend_if\n\tif I_CompareCounter reform_back = 0\n\tand I_CompareCounter repeat_test4 = 0\n\n\tset_counter repeat_test4 1\n\tset_counter sally_defense 3\n\tend_if\n\nif I_CompareCounter reform_back = 0\nand I_CompareCounter repeat_test4 = 2\n\n\tif I_UnitEnemyUnitInRadius a2u1 180\n\tai_gta_del_objective 1\n\tbattle_wait 0.5\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\n\tif I_CompareCounter army_south = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -700, 100\n\tend_if\n\tif I_CompareCounter army_north = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 700, 100\n\tend_if\n\tif I_CompareCounter army_east = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 700, 0, 100\n\tend_if\n\tif I_CompareCounter army_west = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -700, 0, 100\n\tend_if\n\tset_counter reform_multi 2\n\tend_if\n\tif ! I_UnitEnemyUnitInRadius a2u1 180\n\tai_gta_del_objective 1\n\tbattle_wait 0.5\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\n\tif I_CompareCounter army_south = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -725, 100\n\tend_if\n\tif I_CompareCounter army_north = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 725, 100\n\tend_if\n\tif I_CompareCounter army_east = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 725, 0, 100\n\tend_if\n\tif I_CompareCounter army_west = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -725, 0, 100\n\tend_if\n\tset_counter reform_multi 1\n\tend_if\n\tif I_CompareCounter enemy_unit_count > 0\n\tif ! I_UnitDestroyed a2u1\n\tand ! I_UnitStatus a2u1 left_battle\n\tai_gta_add_unit_label 1 0 a2u1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif ! I_UnitDestroyed a2u2\n\tand ! I_UnitStatus a2u2 left_battle\n\tai_gta_add_unit_label 1 0 a2u2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif ! I_UnitDestroyed a2u3\n\tand ! I_UnitStatus a2u3 left_battle\n\tai_gta_add_unit_label 1 0 a2u3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif ! I_UnitDestroyed a2u4\n\tand ! I_UnitStatus a2u4 left_battle\n\tai_gta_add_unit_label 1 0 a2u4\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif ! I_UnitDestroyed a2u5\n\tand ! I_UnitStatus a2u5 left_battle\n\tai_gta_add_unit_label 1 0 a2u5\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif ! I_UnitDestroyed a2u6\n\tand ! I_UnitStatus a2u6 left_battle\n\tai_gta_add_unit_label 1 0 a2u6\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif ! I_UnitDestroyed a2u7\n\tand ! I_UnitStatus a2u7 left_battle\n\tai_gta_add_unit_label 1 0 a2u7\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif ! I_UnitDestroyed a2u8\n\tand ! I_UnitStatus a2u8 left_battle\n\tai_gta_add_unit_label 1 0 a2u8\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif ! I_UnitDestroyed a2u9\n\tand ! I_UnitStatus a2u9 left_battle\n\tai_gta_add_unit_label 1 0 a2u9\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif ! I_UnitDestroyed a2u10\n\tand ! I_UnitStatus a2u10 left_battle\n\tai_gta_add_unit_label 1 0 a2u10\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif ! I_UnitDestroyed a2u11\n\tand ! I_UnitStatus a2u11 left_battle\n\tai_gta_add_unit_label 1 0 a2u11\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif ! I_UnitDestroyed a2u12\n\tand ! I_UnitStatus a2u12 left_battle\n\tai_gta_add_unit_label 1 0 a2u12\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif ! I_UnitDestroyed a2u13\n\tand ! I_UnitStatus a2u13 left_battle\n\tai_gta_add_unit_label 1 0 a2u13\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif ! I_UnitDestroyed a2u14\n\tand ! I_UnitStatus a2u14 left_battle\n\tai_gta_add_unit_label 1 0 a2u14\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif ! I_UnitDestroyed a2u15\n\tand ! I_UnitStatus a2u15 left_battle\n\tai_gta_add_unit_label 1 0 a2u15\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif ! I_UnitDestroyed a2u16\n\tand ! I_UnitStatus a2u16 left_battle\n\tai_gta_add_unit_label 1 0 a2u16\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif ! I_UnitDestroyed a2u17\n\tand ! I_UnitStatus a2u17 left_battle\n\tai_gta_add_unit_label 1 0 a2u17\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif ! I_UnitDestroyed a2u18\n\tand ! I_UnitStatus a2u18 left_battle\n\tai_gta_add_unit_label 1 0 a2u18\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif ! I_UnitDestroyed a2u19\n\tand ! I_UnitStatus a2u19 left_battle\n\tai_gta_add_unit_label 1 0 a2u19\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif ! I_UnitDestroyed a2u20\n\tand ! I_UnitStatus a2u20 left_battle\n\tai_gta_add_unit_label 1 0 a2u20\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n\tbattle_wait 0.5\n;\tunit_group_order_halt army2\n;\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tset_counter sally_defense 2\n\tset_counter defend_location 1\n\tset_counter reset_position 0\n\tset_counter repeat_test1 0\n\tset_counter repeat_test2 0\n\tset_counter repeat_test3 0\n\tset_counter repeat_test4 0\n\tset_counter repeat_test5 0\n\tset_counter repeat_test6 0\nend_if\n\nif I_CompareCounter reform_back > 0\nand I_CompareCounter reform_back < 3\n\nset_counter reform_back 0\nset_counter sally_defense 3\nbattle_wait 20\nend_if\n\nif I_CompareCounter reform_back > 2\n\nset_counter reform_back 0\nset_counter sally_defense 3\n;battle_wait 60\nbattle_wait 30\nif I_CompareCounter sally_defense > 2\nbattle_wait 30\nend_if\nend_if\n\nset_counter reform_back 0\nif I_CompareCounter repeat_test4 = 1\nbattle_wait 20\nend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_defense = 3\n\tand I_CompareCounter reform_multi > 3\n\tand ! I_IsUnitGroupEngaged army2\n\n\tset_counter sally_defense 6\n\tif I_CompareCounter army_south = 1\n\tand I_UnitDistanceFromLine a2u1 sw se < 0\n\tset_counter line_passed 1\n\tend_if\n\tif I_CompareCounter army_north = 1\n\tand I_UnitDistanceFromLine a2u1 nw ne > 0\n\tset_counter line_passed 1\n\tend_if\n\tif I_CompareCounter army_west = 1\n\tand I_UnitDistanceFromLine a2u1 sw nw > 0\n\tset_counter line_passed 1\n\tend_if\n\tif I_CompareCounter army_east = 1\n\tand I_UnitDistanceFromLine a2u1 se ne < 0\n\tset_counter line_passed 1\n\tend_if\n\nif I_CompareCounter line_passed = 1\n\n\tset_counter line_passed 0\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif I_UnitStatus a2u1 fighting\n\tinc_counter reform_back 3\n\tend_if\n\tif I_UnitStatus a2u1 pursuing\n\tinc_counter reform_back 3\n\tend_if\n\tif I_UnitStatus a2u1 charging\n\tinc_counter reform_back 3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif I_UnitStatus a2u2 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u2 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u2 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif I_UnitStatus a2u3 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u3 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u3 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n" +
                    "\tif I_UnitStatus a2u4 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u4 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u4 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif I_UnitStatus a2u5 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u5 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u5 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif I_UnitStatus a2u6 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u6 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u6 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif I_UnitStatus a2u7 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u7 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u7 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif I_UnitStatus a2u8 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u8 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u8 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif I_UnitStatus a2u9 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u9 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u9 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif I_UnitStatus a2u10 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u10 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u10 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif I_UnitStatus a2u11 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u11 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u11 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif I_UnitStatus a2u12 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u12 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u12 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif I_UnitStatus a2u13 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u13 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u13 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif I_UnitStatus a2u14 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u14 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u14 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif I_UnitStatus a2u15 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u15 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u15 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif I_UnitStatus a2u16 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u16 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u16 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif I_UnitStatus a2u17 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u17 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u17 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif I_UnitStatus a2u18 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u18 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u18 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif I_UnitStatus a2u19 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u19 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u19 charging\n\tinc_counter reform_back 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif I_UnitStatus a2u20 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u20 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a2u20 charging\n\tinc_counter reform_back 1\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n\tif I_CompareCounter sally_reinf > 0\n\tand I_UnitDistanceFromUnit a4u1 a2u1 < 300\n\tif I_UnitStatus a4u1 fighting\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a4u1 pursuing\n\tinc_counter reform_back 1\n\tend_if\n\tif I_UnitStatus a4u1 charging\n\tinc_counter reform_back 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter repeat_test5 = 1\n\tset_counter repeat_test5 2\n\tend_if\n\tif I_CompareCounter reform_back = 0\n\tand I_CompareCounter repeat_test5 = 0\n\n\tset_counter repeat_test5 1\n\tend_if\n\nif I_CompareCounter reform_back = 0\nand I_CompareCounter repeat_test5 = 2\n\nif ! I_UnitEnemyUnitInRadius a2u1 20\n\n\tif ! I_UnitEnemyUnitInRadius a2u1 20\n\tand I_BattleSettlementFortificationLevel > 2\n\tai_gta_del_objective 1\n\tbattle_wait 0.5\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tif I_CompareCounter army_south = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -675, 100\n\tend_if\n\tif I_CompareCounter army_north = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 675, 100\n\tend_if\n\tif I_CompareCounter army_east = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 675, 0, 100\n\tend_if\n\tif I_CompareCounter army_west = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -675, 0, 100\n\tend_if\n\tset_counter reform_multi 2\n\tend_if\n\n\tif ! I_UnitEnemyUnitInRadius a2u1 150\n\tand I_BattleSettlementFortificationLevel < 3\n\tai_gta_del_objective 1\n\tbattle_wait 0.5\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tif I_CompareCounter army_south = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -675, 100\n\tend_if\n\tif I_CompareCounter army_north = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 675, 100\n\tend_if\n\tif I_CompareCounter army_east = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 675, 0, 100\n\tend_if\n\tif I_CompareCounter army_west = 1\n" +
                    "\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -675, 0, 100\n\tend_if\n\tset_counter reform_multi 2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif ! I_UnitDestroyed a2u1\n\tand ! I_UnitStatus a2u1 left_battle\n\tai_gta_add_unit_label 1 0 a2u1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif ! I_UnitDestroyed a2u2\n\tand ! I_UnitStatus a2u2 left_battle\n\tai_gta_add_unit_label 1 0 a2u2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif ! I_UnitDestroyed a2u3\n\tand ! I_UnitStatus a2u3 left_battle\n\tai_gta_add_unit_label 1 0 a2u3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif ! I_UnitDestroyed a2u4\n\tand ! I_UnitStatus a2u4 left_battle\n\tai_gta_add_unit_label 1 0 a2u4\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif ! I_UnitDestroyed a2u5\n\tand ! I_UnitStatus a2u5 left_battle\n\tai_gta_add_unit_label 1 0 a2u5\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif ! I_UnitDestroyed a2u6\n\tand ! I_UnitStatus a2u6 left_battle\n\tai_gta_add_unit_label 1 0 a2u6\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif ! I_UnitDestroyed a2u7\n\tand ! I_UnitStatus a2u7 left_battle\n\tai_gta_add_unit_label 1 0 a2u7\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif ! I_UnitDestroyed a2u8\n\tand ! I_UnitStatus a2u8 left_battle\n\tai_gta_add_unit_label 1 0 a2u8\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif ! I_UnitDestroyed a2u9\n\tand ! I_UnitStatus a2u9 left_battle\n\tai_gta_add_unit_label 1 0 a2u9\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif ! I_UnitDestroyed a2u10\n\tand ! I_UnitStatus a2u10 left_battle\n\tai_gta_add_unit_label 1 0 a2u10\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif ! I_UnitDestroyed a2u11\n\tand ! I_UnitStatus a2u11 left_battle\n\tai_gta_add_unit_label 1 0 a2u11\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif ! I_UnitDestroyed a2u12\n\tand ! I_UnitStatus a2u12 left_battle\n\tai_gta_add_unit_label 1 0 a2u12\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif ! I_UnitDestroyed a2u13\n\tand ! I_UnitStatus a2u13 left_battle\n\tai_gta_add_unit_label 1 0 a2u13\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif ! I_UnitDestroyed a2u14\n\tand ! I_UnitStatus a2u14 left_battle\n\tai_gta_add_unit_label 1 0 a2u14\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif ! I_UnitDestroyed a2u15\n\tand ! I_UnitStatus a2u15 left_battle\n\tai_gta_add_unit_label 1 0 a2u15\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif ! I_UnitDestroyed a2u16\n\tand ! I_UnitStatus a2u16 left_battle\n\tai_gta_add_unit_label 1 0 a2u16\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif ! I_UnitDestroyed a2u17\n\tand ! I_UnitStatus a2u17 left_battle\n\tai_gta_add_unit_label 1 0 a2u17\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif ! I_UnitDestroyed a2u18\n\tand ! I_UnitStatus a2u18 left_battle\n\tai_gta_add_unit_label 1 0 a2u18\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif ! I_UnitDestroyed a2u19\n\tand ! I_UnitStatus a2u19 left_battle\n\tai_gta_add_unit_label 1 0 a2u19\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif ! I_UnitDestroyed a2u20\n\tand ! I_UnitStatus a2u20 left_battle\n\tai_gta_add_unit_label 1 0 a2u20\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n\tbattle_wait 0.5\n;\tunit_group_order_halt army2\n;\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tset_counter sally_defense 2\n\tset_counter defend_location 1\n\tset_counter reset_position 0\n\tset_counter repeat_test1 0\n\tset_counter repeat_test2 0\n\tset_counter repeat_test3 0\n\tset_counter repeat_test4 0\n\tset_counter repeat_test5 0\n\tset_counter repeat_test6 0\nend_if\nif I_UnitEnemyUnitInRadius a2u1 20\nset_counter sally_defense 3\nbattle_wait 20\nend_if\nend_if\n\nif I_CompareCounter reform_back > 0\nand I_CompareCounter reform_back < 3\n\nset_counter reform_back 0\nset_counter sally_defense 3\nbattle_wait 20\nend_if\n\nif I_CompareCounter reform_back > 2\n\nset_counter reform_back 0\nset_counter sally_defense 3\n;battle_wait 60\nbattle_wait 30\nif I_CompareCounter sally_defense > 2\nbattle_wait 30\nend_if\nend_if\n\nset_counter reform_back 0\nif I_CompareCounter repeat_test5 = 1\nbattle_wait 10\nend_if\nend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_defense > 0  ;check\n\tand I_CompareCounter reform_multi > 2\n\tand ! I_IsUnitGroupEngaged army2\n\tand I_UnitEnemyUnitInRadius a2u1 160\n;\tand I_UnitDistanceFromPosition a2u1 1 1 < 560\n\tand I_UnitGroupDistanceFromPosition army2 1 1 < 560\n;\tand I_BattleSettlementFortificationLevel > 2\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tand I_IsUnitUnderFire a2u1\n\tand ! I_IsUnitEngaged a2u1\n\tand ! I_UnitStatus a2u1 pursuing\n\tand ! I_UnitStatus a2u1 charging\n\tand ! I_UnitStatus a2u1 moving\n\tinc_counter reset_position 2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tand I_IsUnitUnderFire a2u2\n\tand ! I_IsUnitEngaged a2u2\n\tand ! I_UnitStatus a2u2 pursuing\n\tand ! I_UnitStatus a2u2 charging\n\tand ! I_UnitStatus a2u2 moving\n\tinc_counter reset_position 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tand I_IsUnitUnderFire a2u3\n\tand ! I_IsUnitEngaged a2u3\n\tand ! I_UnitStatus a2u3 pursuing\n\tand ! I_UnitStatus a2u3 charging\n\tand ! I_UnitStatus a2u3 moving\n\tinc_counter reset_position 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tand I_IsUnitUnderFire a2u4\n\tand ! I_IsUnitEngaged a2u4\n\tand ! I_UnitStatus a2u4 pursuing\n\tand ! I_UnitStatus a2u4 charging\n\tand ! I_UnitStatus a2u4 moving\n\tinc_counter reset_position 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tand I_IsUnitUnderFire a2u5\n\tand ! I_IsUnitEngaged a2u5\n\tand ! I_UnitStatus a2u5 pursuing\n\tand ! I_UnitStatus a2u5 charging\n\tand ! I_UnitStatus a2u5 moving\n\tinc_counter reset_position 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tand I_IsUnitUnderFire a2u6\n\tand ! I_IsUnitEngaged a2u6\n\tand ! I_UnitStatus a2u6 pursuing\n\tand ! I_UnitStatus a2u6 charging\n\tand ! I_UnitStatus a2u6 moving\n\tinc_counter reset_position 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tand I_IsUnitUnderFire a2u7\n\tand ! I_IsUnitEngaged a2u7\n\tand ! I_UnitStatus a2u7 pursuing\n\tand ! I_UnitStatus a2u7 charging\n\tand ! I_UnitStatus a2u7 moving\n\tinc_counter reset_position 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tand I_IsUnitUnderFire a2u8\n\tand ! I_IsUnitEngaged a2u8\n\tand ! I_UnitStatus a2u8 pursuing\n\tand ! I_UnitStatus a2u8 charging\n\tand ! I_UnitStatus a2u8 moving\n\tinc_counter reset_position 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tand I_IsUnitUnderFire a2u9\n\tand ! I_IsUnitEngaged a2u9\n\tand ! I_UnitStatus a2u9 pursuing\n\tand ! I_UnitStatus a2u9 charging\n\tand ! I_UnitStatus a2u9 moving\n\tinc_counter reset_position 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tand I_IsUnitUnderFire a2u10\n\tand ! I_IsUnitEngaged a2u10\n\tand ! I_UnitStatus a2u10 pursuing\n\tand ! I_UnitStatus a2u10 charging\n\tand ! I_UnitStatus a2u10 moving\n\tinc_counter reset_position 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tand I_IsUnitUnderFire a2u11\n\tand ! I_IsUnitEngaged a2u11\n\tand ! I_UnitStatus a2u11 pursuing\n\tand ! I_UnitStatus a2u11 charging\n\tand ! I_UnitStatus a2u11 moving\n\tinc_counter reset_position 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tand I_IsUnitUnderFire a2u12\n" +
                    "\tand ! I_IsUnitEngaged a2u12\n\tand ! I_UnitStatus a2u12 pursuing\n\tand ! I_UnitStatus a2u12 charging\n\tand ! I_UnitStatus a2u12 moving\n\tinc_counter reset_position 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tand I_IsUnitUnderFire a2u13\n\tand ! I_IsUnitEngaged a2u13\n\tand ! I_UnitStatus a2u13 pursuing\n\tand ! I_UnitStatus a2u13 charging\n\tand ! I_UnitStatus a2u13 moving\n\tinc_counter reset_position 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tand I_IsUnitUnderFire a2u14\n\tand ! I_IsUnitEngaged a2u14\n\tand ! I_UnitStatus a2u14 pursuing\n\tand ! I_UnitStatus a2u14 charging\n\tand ! I_UnitStatus a2u14 moving\n\tinc_counter reset_position 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tand I_IsUnitUnderFire a2u15\n\tand ! I_IsUnitEngaged a2u15\n\tand ! I_UnitStatus a2u15 pursuing\n\tand ! I_UnitStatus a2u15 charging\n\tand ! I_UnitStatus a2u15 moving\n\tinc_counter reset_position 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tand I_IsUnitUnderFire a2u16\n\tand ! I_IsUnitEngaged a2u16\n\tand ! I_UnitStatus a2u16 pursuing\n\tand ! I_UnitStatus a2u16 charging\n\tand ! I_UnitStatus a2u16 moving\n\tinc_counter reset_position 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tand I_IsUnitUnderFire a2u17\n\tand ! I_IsUnitEngaged a2u17\n\tand ! I_UnitStatus a2u17 pursuing\n\tand ! I_UnitStatus a2u17 charging\n\tand ! I_UnitStatus a2u17 moving\n\tinc_counter reset_position 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tand I_IsUnitUnderFire a2u18\n\tand ! I_IsUnitEngaged a2u18\n\tand ! I_UnitStatus a2u18 pursuing\n\tand ! I_UnitStatus a2u18 charging\n\tand ! I_UnitStatus a2u18 moving\n\tinc_counter reset_position 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tand I_IsUnitUnderFire a2u19\n\tand ! I_IsUnitEngaged a2u19\n\tand ! I_UnitStatus a2u19 pursuing\n\tand ! I_UnitStatus a2u19 charging\n\tand ! I_UnitStatus a2u19 moving\n\tinc_counter reset_position 1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tand I_IsUnitUnderFire a2u20\n\tand ! I_IsUnitEngaged a2u20\n\tand ! I_UnitStatus a2u20 pursuing\n\tand ! I_UnitStatus a2u20 charging\n\tand ! I_UnitStatus a2u20 moving\n\tinc_counter reset_position 1\n\tend_if\n\n\tif I_CompareCounter sally_reinf > 0\n\tand I_CompareCounter army4_ready = 0\n\tand I_IsUnitUnderFire a4u1\n\tand ! I_IsUnitEngaged a4u1\n\tand ! I_UnitStatus a4u1 pursuing\n\tand ! I_UnitStatus a4u1 charging\n\tand ! I_UnitStatus a4u1 moving\n\tinc_counter reset_position 2\n\tend_if\n\nif I_CompareCounter reset_position > 3\n\n\tif ! I_UnitEnemyUnitInRadius a2u1 20\n\tand I_BattleSettlementFortificationLevel > 2\n\tai_gta_del_objective 1\n\tbattle_wait 0.5\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tif I_CompareCounter army_south = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -675, 100\n\tend_if\n\tif I_CompareCounter army_north = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 675, 100\n\tend_if\n\tif I_CompareCounter army_east = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 675, 0, 100\n\tend_if\n\tif I_CompareCounter army_west = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -675, 0, 100\n\tend_if\n\tset_counter reform_multi 1\n\tend_if\n\n\tif ! I_UnitEnemyUnitInRadius a2u1 150\n\tand I_BattleSettlementFortificationLevel < 3\n\tai_gta_del_objective 1\n\tbattle_wait 0.5\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tif I_CompareCounter army_south = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -675, 100\n\tend_if\n\tif I_CompareCounter army_north = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 675, 100\n\tend_if\n\tif I_CompareCounter army_east = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 675, 0, 100\n\tend_if\n\tif I_CompareCounter army_west = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -675, 0, 100\n\tend_if\n\tset_counter reform_multi 2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif ! I_UnitDestroyed a2u1\n\tand ! I_UnitStatus a2u1 left_battle\n\tai_gta_add_unit_label 1 0 a2u1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif ! I_UnitDestroyed a2u2\n\tand ! I_UnitStatus a2u2 left_battle\n\tai_gta_add_unit_label 1 0 a2u2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif ! I_UnitDestroyed a2u3\n\tand ! I_UnitStatus a2u3 left_battle\n\tai_gta_add_unit_label 1 0 a2u3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif ! I_UnitDestroyed a2u4\n\tand ! I_UnitStatus a2u4 left_battle\n\tai_gta_add_unit_label 1 0 a2u4\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif ! I_UnitDestroyed a2u5\n\tand ! I_UnitStatus a2u5 left_battle\n\tai_gta_add_unit_label 1 0 a2u5\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif ! I_UnitDestroyed a2u6\n\tand ! I_UnitStatus a2u6 left_battle\n\tai_gta_add_unit_label 1 0 a2u6\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif ! I_UnitDestroyed a2u7\n\tand ! I_UnitStatus a2u7 left_battle\n\tai_gta_add_unit_label 1 0 a2u7\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif ! I_UnitDestroyed a2u8\n\tand ! I_UnitStatus a2u8 left_battle\n\tai_gta_add_unit_label 1 0 a2u8\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif ! I_UnitDestroyed a2u9\n\tand ! I_UnitStatus a2u9 left_battle\n\tai_gta_add_unit_label 1 0 a2u9\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n" +
                    "\tif ! I_UnitDestroyed a2u10\n\tand ! I_UnitStatus a2u10 left_battle\n\tai_gta_add_unit_label 1 0 a2u10\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif ! I_UnitDestroyed a2u11\n\tand ! I_UnitStatus a2u11 left_battle\n\tai_gta_add_unit_label 1 0 a2u11\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif ! I_UnitDestroyed a2u12\n\tand ! I_UnitStatus a2u12 left_battle\n\tai_gta_add_unit_label 1 0 a2u12\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif ! I_UnitDestroyed a2u13\n\tand ! I_UnitStatus a2u13 left_battle\n\tai_gta_add_unit_label 1 0 a2u13\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif ! I_UnitDestroyed a2u14\n\tand ! I_UnitStatus a2u14 left_battle\n\tai_gta_add_unit_label 1 0 a2u14\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif ! I_UnitDestroyed a2u15\n\tand ! I_UnitStatus a2u15 left_battle\n\tai_gta_add_unit_label 1 0 a2u15\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif ! I_UnitDestroyed a2u16\n\tand ! I_UnitStatus a2u16 left_battle\n\tai_gta_add_unit_label 1 0 a2u16\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif ! I_UnitDestroyed a2u17\n\tand ! I_UnitStatus a2u17 left_battle\n\tai_gta_add_unit_label 1 0 a2u17\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif ! I_UnitDestroyed a2u18\n\tand ! I_UnitStatus a2u18 left_battle\n\tai_gta_add_unit_label 1 0 a2u18\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif ! I_UnitDestroyed a2u19\n\tand ! I_UnitStatus a2u19 left_battle\n\tai_gta_add_unit_label 1 0 a2u19\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif ! I_UnitDestroyed a2u20\n\tand ! I_UnitStatus a2u20 left_battle\n\tai_gta_add_unit_label 1 0 a2u20\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n\tbattle_wait 0.5\n;\tunit_group_order_halt army2\n;\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tset_counter reset_position 0\n\tset_counter sally_defense 2\n\tset_counter defend_location 1\nend_if\n\nif I_CompareCounter sally_defense != 2\nset_counter sally_defense 3\nbattle_wait 15\nend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_CompareCounter sally_defense > 0\n\tand I_UnitEnemyUnitInRadius a2u1 200\n\n\tif ! I_IsUnitGroupEngaged army2\n\tand ! I_IsUnitGroupMoving army2\n\tand ! I_UnitStatus a2u1 pursuing\n\tand ! I_UnitStatus a2u1 charging\n\n\tinc_counter army2_idle_s 1\n\tend_if\n\n\tif I_CompareCounter army2_idle_s > 5\n\tset_counter army2_idle_s 0\n\tai_gta_del_objective 1\n\tbattle_wait 0.5\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tif I_CompareCounter army_south = 1\n\tif I_CompareCounter reform_multi > 2\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -675, 100\n\tset_counter reform_multi 2\n\tend_if\n\tif I_CompareCounter reform_multi < 3\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -725, 100\n\tset_counter reform_multi 1\n\tend_if\n\tend_if\n\tif I_CompareCounter army_north = 1\n\tif I_CompareCounter reform_multi > 2\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 675, 100\n\tset_counter reform_multi 2\n\tend_if\n\tif I_CompareCounter reform_multi < 3\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 725, 100\n\tset_counter reform_multi 1\n\tend_if\n\tend_if\n\tif I_CompareCounter army_east = 1\n\tif I_CompareCounter reform_multi > 2\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 675, 0, 100\n\tset_counter reform_multi 2\n\tend_if\n\tif I_CompareCounter reform_multi < 3\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 725, 0, 100\n\tset_counter reform_multi 1\n\tend_if\n\tend_if\n\tif I_CompareCounter army_west = 1\n\tif I_CompareCounter reform_multi > 2\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -675, 0, 100\n\tset_counter reform_multi 2\n\tend_if\n\tif I_CompareCounter reform_multi < 3\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -725, 0, 100\n\tset_counter reform_multi 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif ! I_UnitDestroyed a2u1\n\tand ! I_UnitStatus a2u1 left_battle\n\tai_gta_add_unit_label 1 0 a2u1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif ! I_UnitDestroyed a2u2\n\tand ! I_UnitStatus a2u2 left_battle\n\tai_gta_add_unit_label 1 0 a2u2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif ! I_UnitDestroyed a2u3\n\tand ! I_UnitStatus a2u3 left_battle\n\tai_gta_add_unit_label 1 0 a2u3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif ! I_UnitDestroyed a2u4\n\tand ! I_UnitStatus a2u4 left_battle\n\tai_gta_add_unit_label 1 0 a2u4\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif ! I_UnitDestroyed a2u5\n\tand ! I_UnitStatus a2u5 left_battle\n\tai_gta_add_unit_label 1 0 a2u5\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif ! I_UnitDestroyed a2u6\n\tand ! I_UnitStatus a2u6 left_battle\n\tai_gta_add_unit_label 1 0 a2u6\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif ! I_UnitDestroyed a2u7\n\tand ! I_UnitStatus a2u7 left_battle\n\tai_gta_add_unit_label 1 0 a2u7\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif ! I_UnitDestroyed a2u8\n\tand ! I_UnitStatus a2u8 left_battle\n\tai_gta_add_unit_label 1 0 a2u8\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif ! I_UnitDestroyed a2u9\n\tand ! I_UnitStatus a2u9 left_battle\n\tai_gta_add_unit_label 1 0 a2u9\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif ! I_UnitDestroyed a2u10\n\tand ! I_UnitStatus a2u10 left_battle\n\tai_gta_add_unit_label 1 0 a2u10\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif ! I_UnitDestroyed a2u11\n\tand ! I_UnitStatus a2u11 left_battle\n\tai_gta_add_unit_label 1 0 a2u11\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif ! I_UnitDestroyed a2u12\n\tand ! I_UnitStatus a2u12 left_battle\n\tai_gta_add_unit_label 1 0 a2u12\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif ! I_UnitDestroyed a2u13\n\tand ! I_UnitStatus a2u13 left_battle\n\tai_gta_add_unit_label 1 0 a2u13\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif ! I_UnitDestroyed a2u14\n\tand ! I_UnitStatus a2u14 left_battle\n\tai_gta_add_unit_label 1 0 a2u14\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif ! I_UnitDestroyed a2u15\n\tand ! I_UnitStatus a2u15 left_battle\n\tai_gta_add_unit_label 1 0 a2u15\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif ! I_UnitDestroyed a2u16\n\tand ! I_UnitStatus a2u16 left_battle\n\tai_gta_add_unit_label 1 0 a2u16\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif ! I_UnitDestroyed a2u17\n\tand ! I_UnitStatus a2u17 left_battle\n\tai_gta_add_unit_label 1 0 a2u17\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif ! I_UnitDestroyed a2u18\n\tand ! I_UnitStatus a2u18 left_battle\n\tai_gta_add_unit_label 1 0 a2u18\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif ! I_UnitDestroyed a2u19\n\tand ! I_UnitStatus a2u19 left_battle\n\tai_gta_add_unit_label 1 0 a2u19\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif ! I_UnitDestroyed a2u20\n\tand ! I_UnitStatus a2u20 left_battle\n\tai_gta_add_unit_label 1 0 a2u20\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n;\tbattle_wait 0.5\n;\t unit_group_order_halt army2\n;\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tset_counter reset_position 0\n\tset_counter sally_defense 2\n\tset_counter defend_location 1\n" +
                    "\tend_if\n\n\tif I_IsUnitGroupEngaged army2\n\tset_counter army2_idle_s 0\n\tend_if\n\tif I_IsUnitGroupMoving army2\n\tset_counter army2_idle_s 0\n\tend_if\n\tif I_UnitStatus a2u1 pursuing\n\tset_counter army2_idle_s 0\n\tend_if\n\tif I_UnitStatus a2u1 charging\n\tset_counter army2_idle_s 0\n\tend_if\n\tbattle_wait 10\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_defense > 2\n\tand I_BattleSettlementFortificationLevel > 2\n;\tand I_CompareCounter reform_multi > 3\n\tand ! I_IsUnitGroupEngaged army2\n\tand ! I_UnitEnemyUnitInRadius a2u1 80\n\n\tset_counter sally_defense 6\n\tset_counter wall_line_passed 0\n\tset_counter reset_position_s 0\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif I_IsUnitEngaged a2u1\n\tinc_counter reset_position_s 2\n\tend_if\n\tif I_UnitStatus a2u1 pursuing\n\tinc_counter reset_position_s 2\n\tend_if\n\tif I_UnitStatus a2u1 charging\n\tinc_counter reset_position_s 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif I_IsUnitEngaged a2u2\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u2 pursuing\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u2 charging\n\tinc_counter reset_position_s 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif I_IsUnitEngaged a2u3\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u3 pursuing\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u3 charging\n\tinc_counter reset_position_s 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif I_IsUnitEngaged a2u4\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u4 pursuing\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u4 charging\n\tinc_counter reset_position_s 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif I_IsUnitEngaged a2u5\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u5 pursuing\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u5 charging\n\tinc_counter reset_position_s 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif I_IsUnitEngaged a2u6\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u6 pursuing\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u6 charging\n\tinc_counter reset_position_s 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif I_IsUnitEngaged a2u7\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u7 pursuing\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u7 charging\n\tinc_counter reset_position_s 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif I_IsUnitEngaged a2u8\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u8 pursuing\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u8 charging\n\tinc_counter reset_position_s 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif I_IsUnitEngaged a2u9\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u9 pursuing\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u9 charging\n\tinc_counter reset_position_s 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif I_IsUnitEngaged a2u10\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u10 pursuing\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u10 charging\n\tinc_counter reset_position_s 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif I_IsUnitEngaged a2u11\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u11 pursuing\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u11 charging\n\tinc_counter reset_position_s 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif I_IsUnitEngaged a2u12\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u12 pursuing\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u12 charging\n\tinc_counter reset_position_s 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif I_IsUnitEngaged a2u13\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u13 pursuing\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u13 charging\n\tinc_counter reset_position_s 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif I_IsUnitEngaged a2u14\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u14 pursuing\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u14 charging\n\tinc_counter reset_position_s 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif I_IsUnitEngaged a2u15\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u15 pursuing\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u15 charging\n\tinc_counter reset_position_s 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif I_IsUnitEngaged a2u16\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u16 pursuing\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u16 charging\n\tinc_counter reset_position_s 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif I_IsUnitEngaged a2u17\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u17 pursuing\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u17 charging\n\tinc_counter reset_position_s 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif I_IsUnitEngaged a2u18\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u18 pursuing\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u18 charging\n\tinc_counter reset_position_s 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif I_IsUnitEngaged a2u19\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u19 pursuing\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u19 charging\n\tinc_counter reset_position_s 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif I_IsUnitEngaged a2u20\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u20 pursuing\n\tinc_counter reset_position_s 1\n\tend_if\n\tif I_UnitStatus a2u20 charging\n\tinc_counter reset_position_s 1\n\tend_if\n\tend_if\n\nif I_CompareCounter reset_position_s = 0\n\tif I_CompareCounter army_south = 1\n\tif I_CompareCounter player_unit_count > 0\n" +
                    "\tand I_UnitDistanceFromLine a1u1 sw_wall se_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 1\n\tand I_UnitDistanceFromLine a1u2 sw_wall se_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 2\n\tand I_UnitDistanceFromLine a1u3 sw_wall se_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 3\n\tand I_UnitDistanceFromLine a1u4 sw_wall se_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 4\n\tand I_UnitDistanceFromLine a1u5 sw_wall se_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 5\n\tand I_UnitDistanceFromLine a1u6 sw_wall se_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 6\n\tand I_UnitDistanceFromLine a1u7 sw_wall se_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 7\n\tand I_UnitDistanceFromLine a1u8 sw_wall se_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 8\n\tand I_UnitDistanceFromLine a1u9 sw_wall se_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 9\n\tand I_UnitDistanceFromLine a1u10 sw_wall se_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 10\n\tand I_UnitDistanceFromLine a1u11 sw_wall se_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 11\n\tand I_UnitDistanceFromLine a1u12 sw_wall se_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 12\n\tand I_UnitDistanceFromLine a1u13 sw_wall se_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 13\n\tand I_UnitDistanceFromLine a1u14 sw_wall se_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 14\n\tand I_UnitDistanceFromLine a1u15 sw_wall se_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 15\n\tand I_UnitDistanceFromLine a1u16 sw_wall se_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 16\n\tand I_UnitDistanceFromLine a1u17 sw_wall se_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 17\n\tand I_UnitDistanceFromLine a1u18 sw_wall se_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 18\n\tand I_UnitDistanceFromLine a1u19 sw_wall se_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count = 20\n\tand I_UnitDistanceFromLine a1u20 sw_wall se_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\tend_if\n\tif I_CompareCounter army_north = 1\n\tif I_CompareCounter player_unit_count > 0\n\tand I_UnitDistanceFromLine a1u1 nw_wall ne_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 1\n\tand I_UnitDistanceFromLine a1u2 nw_wall ne_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 2\n\tand I_UnitDistanceFromLine a1u3 nw_wall ne_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 3\n\tand I_UnitDistanceFromLine a1u4 nw_wall ne_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 4\n\tand I_UnitDistanceFromLine a1u5 nw_wall ne_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 5\n" +
                    "\tand I_UnitDistanceFromLine a1u6 nw_wall ne_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 6\n\tand I_UnitDistanceFromLine a1u7 nw_wall ne_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 7\n\tand I_UnitDistanceFromLine a1u8 nw_wall ne_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 8\n\tand I_UnitDistanceFromLine a1u9 nw_wall ne_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 9\n\tand I_UnitDistanceFromLine a1u10 nw_wall ne_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 10\n\tand I_UnitDistanceFromLine a1u11 nw_wall ne_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 11\n\tand I_UnitDistanceFromLine a1u12 nw_wall ne_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 12\n\tand I_UnitDistanceFromLine a1u13 nw_wall ne_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 13\n\tand I_UnitDistanceFromLine a1u14 nw_wall ne_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 14\n\tand I_UnitDistanceFromLine a1u15 nw_wall ne_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 15\n\tand I_UnitDistanceFromLine a1u16 nw_wall ne_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 16\n\tand I_UnitDistanceFromLine a1u17 nw_wall ne_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 17\n\tand I_UnitDistanceFromLine a1u18 nw_wall ne_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 18\n\tand I_UnitDistanceFromLine a1u19 nw_wall ne_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count = 20\n\tand I_UnitDistanceFromLine a1u20 nw_wall ne_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\tend_if\n\tif I_CompareCounter army_west = 1\n\tif I_CompareCounter player_unit_count > 0\n\tand I_UnitDistanceFromLine a1u1 sw_wall nw_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 1\n\tand I_UnitDistanceFromLine a1u2 sw_wall nw_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 2\n\tand I_UnitDistanceFromLine a1u3 sw_wall nw_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 3\n\tand I_UnitDistanceFromLine a1u4 sw_wall nw_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 4\n\tand I_UnitDistanceFromLine a1u5 sw_wall nw_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 5\n\tand I_UnitDistanceFromLine a1u6 sw_wall nw_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 6\n\tand I_UnitDistanceFromLine a1u7 sw_wall nw_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 7\n\tand I_UnitDistanceFromLine a1u8 sw_wall nw_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 8\n\tand I_UnitDistanceFromLine a1u9 sw_wall nw_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 9\n\tand I_UnitDistanceFromLine a1u10 sw_wall nw_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 10\n\tand I_UnitDistanceFromLine a1u11 sw_wall nw_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 11\n\tand I_UnitDistanceFromLine a1u12 sw_wall nw_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 12\n\tand I_UnitDistanceFromLine a1u13 sw_wall nw_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 13\n\tand I_UnitDistanceFromLine a1u14 sw_wall nw_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 14\n\tand I_UnitDistanceFromLine a1u15 sw_wall nw_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 15\n\tand I_UnitDistanceFromLine a1u16 sw_wall nw_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 16\n\tand I_UnitDistanceFromLine a1u17 sw_wall nw_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 17\n\tand I_UnitDistanceFromLine a1u18 sw_wall nw_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 18\n\tand I_UnitDistanceFromLine a1u19 sw_wall nw_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count = 20\n\tand I_UnitDistanceFromLine a1u20 sw_wall nw_wall < 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\tend_if\n\tif I_CompareCounter army_east = 1\n\tif I_CompareCounter player_unit_count > 0\n\tand I_UnitDistanceFromLine a1u1 se_wall ne_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 1\n\tand I_UnitDistanceFromLine a1u2 se_wall ne_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 2\n\tand I_UnitDistanceFromLine a1u3 se_wall ne_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 3\n\tand I_UnitDistanceFromLine a1u4 se_wall ne_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 4\n\tand I_UnitDistanceFromLine a1u5 se_wall ne_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 5\n\tand I_UnitDistanceFromLine a1u6 se_wall ne_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 6\n\tand I_UnitDistanceFromLine a1u7 se_wall ne_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 7\n\tand I_UnitDistanceFromLine a1u8 se_wall ne_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 8\n\tand I_UnitDistanceFromLine a1u9 se_wall ne_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 9\n\tand I_UnitDistanceFromLine a1u10 se_wall ne_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 10\n\tand I_UnitDistanceFromLine a1u11 se_wall ne_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 11\n\tand I_UnitDistanceFromLine a1u12 se_wall ne_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 12\n\tand I_UnitDistanceFromLine a1u13 se_wall ne_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 13\n\tand I_UnitDistanceFromLine a1u14 se_wall ne_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 14\n\tand I_UnitDistanceFromLine a1u15 se_wall ne_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 15\n\tand I_UnitDistanceFromLine a1u16 se_wall ne_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 16\n\tand I_UnitDistanceFromLine a1u17 se_wall ne_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 17\n\tand I_UnitDistanceFromLine a1u18 se_wall ne_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n" +
                    "\tif I_CompareCounter player_unit_count > 18\n\tand I_UnitDistanceFromLine a1u19 se_wall ne_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count = 20\n\tand I_UnitDistanceFromLine a1u20 se_wall ne_wall > 0\n\tinc_counter wall_line_passed 1\n\tend_if\n\tend_if\nend_if\n\n\tif I_CompareCounter repeat_test6 = 1\n\tset_counter repeat_test6 2\n\tend_if\n\tif I_CompareCounter wall_line_passed = 0\n\tand I_CompareCounter reset_position_s = 0\n\tand I_CompareCounter repeat_test6 = 0\n\n\tset_counter repeat_test6 1\n\tend_if\n\tif I_CompareCounter wall_line_passed = 0\n\tand I_CompareCounter reset_position_s = 0\n\tand I_CompareCounter repeat_test6 = 2\n\tai_gta_del_objective 1\n\tbattle_wait 0.5\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tif I_CompareCounter army_south = 1\n\tif I_CompareCounter reform_multi > 2\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -675, 100\n\tset_counter reform_multi 2\n\tend_if\n\tif I_CompareCounter reform_multi < 3\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -725, 100\n\tset_counter reform_multi 1\n\tend_if\n\tend_if\n\tif I_CompareCounter army_north = 1\n\tif I_CompareCounter reform_multi > 2\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 675, 100\n\tset_counter reform_multi 2\n\tend_if\n\tif I_CompareCounter reform_multi < 3\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 725, 100\n\tset_counter reform_multi 1\n\tend_if\n\tend_if\n\tif I_CompareCounter army_east = 1\n\tif I_CompareCounter reform_multi > 2\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 675, 0, 100\n\tset_counter reform_multi 2\n\tend_if\n\tif I_CompareCounter reform_multi < 3\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 725, 0, 100\n\tset_counter reform_multi 1\n\tend_if\n\tend_if\n\tif I_CompareCounter army_west = 1\n\tif I_CompareCounter reform_multi > 2\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -675, 0, 100\n\tset_counter reform_multi 2\n\tend_if\n\tif I_CompareCounter reform_multi < 3\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -725, 0, 100\n\tset_counter reform_multi 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif ! I_UnitDestroyed a2u1\n\tand ! I_UnitStatus a2u1 left_battle\n\tai_gta_add_unit_label 1 0 a2u1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif ! I_UnitDestroyed a2u2\n\tand ! I_UnitStatus a2u2 left_battle\n\tai_gta_add_unit_label 1 0 a2u2\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif ! I_UnitDestroyed a2u3\n\tand ! I_UnitStatus a2u3 left_battle\n\tai_gta_add_unit_label 1 0 a2u3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif ! I_UnitDestroyed a2u4\n\tand ! I_UnitStatus a2u4 left_battle\n\tai_gta_add_unit_label 1 0 a2u4\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif ! I_UnitDestroyed a2u5\n\tand ! I_UnitStatus a2u5 left_battle\n\tai_gta_add_unit_label 1 0 a2u5\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif ! I_UnitDestroyed a2u6\n\tand ! I_UnitStatus a2u6 left_battle\n\tai_gta_add_unit_label 1 0 a2u6\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif ! I_UnitDestroyed a2u7\n\tand ! I_UnitStatus a2u7 left_battle\n\tai_gta_add_unit_label 1 0 a2u7\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif ! I_UnitDestroyed a2u8\n\tand ! I_UnitStatus a2u8 left_battle\n\tai_gta_add_unit_label 1 0 a2u8\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif ! I_UnitDestroyed a2u9\n\tand ! I_UnitStatus a2u9 left_battle\n\tai_gta_add_unit_label 1 0 a2u9\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif ! I_UnitDestroyed a2u10\n\tand ! I_UnitStatus a2u10 left_battle\n\tai_gta_add_unit_label 1 0 a2u10\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif ! I_UnitDestroyed a2u11\n\tand ! I_UnitStatus a2u11 left_battle\n\tai_gta_add_unit_label 1 0 a2u11\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif ! I_UnitDestroyed a2u12\n\tand ! I_UnitStatus a2u12 left_battle\n\tai_gta_add_unit_label 1 0 a2u12\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif ! I_UnitDestroyed a2u13\n\tand ! I_UnitStatus a2u13 left_battle\n\tai_gta_add_unit_label 1 0 a2u13\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif ! I_UnitDestroyed a2u14\n\tand ! I_UnitStatus a2u14 left_battle\n\tai_gta_add_unit_label 1 0 a2u14\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif ! I_UnitDestroyed a2u15\n\tand ! I_UnitStatus a2u15 left_battle\n\tai_gta_add_unit_label 1 0 a2u15\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif ! I_UnitDestroyed a2u16\n\tand ! I_UnitStatus a2u16 left_battle\n\tai_gta_add_unit_label 1 0 a2u16\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif ! I_UnitDestroyed a2u17\n\tand ! I_UnitStatus a2u17 left_battle\n\tai_gta_add_unit_label 1 0 a2u17\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif ! I_UnitDestroyed a2u18\n\tand ! I_UnitStatus a2u18 left_battle\n\tai_gta_add_unit_label 1 0 a2u18\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif ! I_UnitDestroyed a2u19\n\tand ! I_UnitStatus a2u19 left_battle\n\tai_gta_add_unit_label 1 0 a2u19\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif ! I_UnitDestroyed a2u20\n\tand ! I_UnitStatus a2u20 left_battle\n\tai_gta_add_unit_label 1 0 a2u20\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n;\tbattle_wait 0.5\n;\t unit_group_order_halt army2\n;\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tset_counter reset_position_s 0\n\tset_counter sally_defense 2\n\tset_counter defend_location 1\n\tset_counter repeat_test1 0\n\tset_counter repeat_test2 0\n\tset_counter repeat_test3 0\n\tset_counter repeat_test4 0\n\tset_counter repeat_test5 0\n\tset_counter repeat_test6 0\n\tend_if\n\n\tif I_CompareCounter sally_defense != 2\n\tset_counter sally_defense 3\n\tend_if\n\tif I_CompareCounter wall_line_passed > 0\n\tbattle_wait 15\n\tend_if\n\tif I_CompareCounter reset_position_s > 0\n\tbattle_wait 15\n\tend_if\n\tif I_CompareCounter repeat_test6 = 1\n\tbattle_wait 20\n\tend_if\nend_monitor\n\n;;;;;Termination\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_defense > 0\n\tand I_CompareCounter kill_sally = 0\n\tand I_IsUnitRouting a2u1\n\tand ! I_IsUnitGroupEngaged army2\n\tand ! I_IsUnitGroupDestroyed army2\n\n" +
                    "\tai_gta_del_objective 1\n\tbattle_wait 0.5\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tif I_CompareCounter army_south = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -725, 100\n\tend_if\n\tif I_CompareCounter army_north = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 725, 100\n\tend_if\n\tif I_CompareCounter army_east = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 725, 0, 100\n\tend_if\n\tif I_CompareCounter army_west = 1\n\tai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -725, 0, 100\n\tend_if\n\n\tset_counter sally_defense 0\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter kill_sally = 0\n\tand I_CompareCounter assign_labels = 1\n\tand I_UnitDestroyed a2u1\n\tand ! I_IsUnitGroupDestroyed army2\n\n\tset_counter reset_army2 1\n;\tbattle_wait 0.5\n;\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tset_counter assign_labels 2\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter kill_sally = 0\n\tand I_CompareCounter assign_labels = 2\n\tand I_UnitDestroyed a2u1\n\tand ! I_IsUnitGroupDestroyed army2\n\n\tset_counter assign_labels 1\nend_monitor\n\n;;;Sally Reinforcements\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_reinf = 1\n\tand I_CompareCounter kill_sally = 0\n;\tand ! I_BattleIsFortBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tand ! I_IsUnitEngaged a4u1\n\n\tif I_CompareCounter sally_defense < 3\n\tset_counter defend_location 1\n\tset_counter sally_reinf 2\n\tend_if\n\n\tif I_CompareCounter sally_defense > 2\n\n\tset_counter defend_location 2\n\tset_counter sally_reinf 2\n\tend_if\n\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_CompareCounter sally_reinf = 2\n\tand I_CompareCounter sally_defense < 3\n\tand I_CompareCounter sally_defense != 1\n\tand I_CompareCounter defend_location = 1\n\tand I_CompareCounter army4_ready_sally = 0\n\tand I_CompareCounter army4_ready = 0\n\tand ! I_IsUnitGroupEngaged army4\n\tand ! I_IsUnitGroupEngaged army2\n\tand ! I_UnitStatus a4u1 pursuing\n\tand ! I_UnitStatus a4u1 charging\n\tand ! I_UnitEnemyUnitInRadius a4u1 20\n\n\t ;;;Army 4\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u1\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u2\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u3\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u4\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u5\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u6\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u7\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u8\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u9\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u10\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u11\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u12\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u13\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u14\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u15\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u16\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u17\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u18\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u19\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u20\n\n\tbattle_wait 0.5\n\tai_active_set on\n\n\tset_counter defend_location 0\n;\tset_counter army4_idle_s 0\nbattle_wait 20\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_CompareCounter sally_reinf = 2\n\tand I_CompareCounter sally_defense > 2\n\tand I_CompareCounter defend_location = 2\n\tand I_CompareCounter army4_ready_sally = 0\n\tand I_CompareCounter army4_ready = 0\n\n\t;;;Army 4\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u1\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u2\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u3\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u4\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u5\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u6\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u7\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u8\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u9\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u10\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u11\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u12\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u13\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u14\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u15\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u16\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u17\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u18\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u19\n\tai_gta_add_unit_label 1 G5_OBJECTIVE a4u20\n\n;\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tset_counter defend_location 0\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_CompareCounter sally_reinf = 2\n;\tand I_CompareCounter sally_defense > 2\n\tand I_CompareCounter army4_ready_sally = 0\n\tand I_CompareCounter army4_ready = 0\n\tand I_CompareCounter defend_location = 0\n;\tand I_UnitEnemyUnitInRadius a4u1 200\n\n\tif ! I_IsUnitGroupEngaged army4\n\tand ! I_IsUnitGroupMoving army4\n\tand ! I_UnitStatus a4u1 pursuing\n\tand ! I_UnitStatus a4u1 charging\n\n\tinc_counter army4_idle_s 1\n\tend_if\n\tif I_CompareCounter army4_idle_s > 5\n\tset_counter defend_location 1\n\tset_counter sally_defense 2\n\tend_if\n\n\tif I_IsUnitGroupEngaged army4\n\tset_counter army4_idle_s 0\n\tend_if\n\tif I_IsUnitGroupMoving army4\n\tset_counter army4_idle_s 0\n\tend_if\n\tif I_UnitStatus a4u1 pursuing\n\tset_counter army4_idle_s 0\n\tend_if\n\tif I_UnitStatus a4u1 charging\n\tset_counter army4_idle_s 0\n\tend_if\n\tbattle_wait 10\nend_monitor\n\n;;;;;Termination\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter sally_reinf > 0\n\tand I_CompareCounter army4_ready_sally = 0\n\tand I_CompareCounter army4_ready = 0\n\tand I_IsUnitGroupDestroyed army4\n\tand I_BattleIsSallyOutBattle\n\n\tset_counter sally_reinf 0\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter sally_reinf > 0\n\tand I_CompareCounter army4_ready_sally = 0\n\tand I_CompareCounter army4_ready = 0\n\tand I_UnitDestroyed a4u1\n\tand I_BattleIsSallyOutBattle\n\n\tset_counter label_army4 1\n;\tbattle_wait 0.5\n;\tunit_group_enable_automation army4 false\n;\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tset_counter sally_reinf 0\nend_monitor\n\n;################## Germanicu5 Integrated Protect General script ###########################\n\nmonitor_event BattleConflictPhaseCommenced FactionIsLocal\n\tand I_CompareCounter panel_check = 1\n\tand I_BattleEnemyArmyNumberOfMountClass elephant = 0\n\tand I_CompareCounter enemy_unit_count > 4\n\n\tbattle_wait 10\n\n\tif I_BattleIsSiegeBattle\n\tand ! I_BattlePlayerArmyIsAttacker\n;\tand I_BattleEnemyArmyNumberOfSpecialAbility rally > 0\n\tand I_CompareCounter protect_siege = 1\n\tset_counter protect_general 1\n\tend_if\n\n\tif I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n;\tand I_BattleEnemyArmyNumberOfSpecialAbility rally > 0\n;\tand I_CompareCounter labels_only = 1\n\tand I_CompareCounter kill_sally = 1\n\tset_counter protect_general 1\n\tend_if\nend_monitor\n\nmonitor_event BattleBattleGatesDestroyedByEngine TrueCondition\n\tand I_CompareCounter panel_check = 1\n\tand I_CompareCounter protect_general = 1\n\n\tset_counter protect_general 0\n\tif I_BattleIsSiegeBattle\n\tand ! I_BattlePlayerArmyIsAttacker\n\tset_counter general_wait 1\n\tend_if\n\n\tif I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_CompareCounter kill_sally = 1\n\tset_counter general_wait 1\n\tend_if\nend_monitor\n\nmonitor_event BattleWallsCaptured TrueCondition\n\tand I_CompareCounter panel_check = 1\n\tand I_CompareCounter protect_general = 1\n\n\tset_counter protect_general 0\n\tif I_BattleIsSiegeBattle\n\tand ! I_BattlePlayerArmyIsAttacker\n\tset_counter general_wait 1\n\tend_if\n\n" +
                    "\tif I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tset_counter general_wait 1\n\tend_if\nend_monitor\n\nmonitor_event BattleWallsBreachedByEngine TrueCondition\n\tand I_CompareCounter panel_check = 1\n\tand I_CompareCounter protect_general = 1\n\n\tset_counter protect_general 0\n\tif I_BattleIsSiegeBattle\n\tand ! I_BattlePlayerArmyIsAttacker\n\tset_counter general_wait 1\n\tend_if\n\n\tif I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tset_counter general_wait 1\n\tend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSiegeBattle\n\tand I_CompareCounter general_wait = 1\n\tand I_IsUnitMoveFastSet a1u1\n\tand I_BattleEnemyArmyNumberOfUnitCategory cavalry > 0\n\n\tbattle_wait 0.5\n\tunit_order_halt a1u1\n\tif I_CompareCounter enemy_unit_count < 7\n\tset_counter general_wait 2\n\tbattle_wait 20\n\tif I_BattleIsSiegeBattle\n\tand I_CompareCounter general_wait = 2\n\tset_counter general_wait 3\n\tbattle_wait 20\n\tend_if\n\tend_if\n\tif I_CompareCounter enemy_unit_count > 6\n\tand I_CompareCounter enemy_unit_count < 12\n\tset_counter general_wait 2\n\tbattle_wait 25\n\tif I_BattleIsSiegeBattle\n\tand I_CompareCounter general_wait = 2\n\tset_counter general_wait 3\n\tbattle_wait 25\n\tend_if\n\tend_if\n\tif I_CompareCounter enemy_unit_count > 11\n\tand I_CompareCounter enemy_unit_count < 16\n\tset_counter general_wait 2\n\tbattle_wait 30\n\tif I_BattleIsSiegeBattle\n\tand I_CompareCounter general_wait = 2\n\tset_counter general_wait 3\n\tbattle_wait 30\n\tend_if\n\tend_if\n\tif I_CompareCounter enemy_unit_count > 15\n\tset_counter general_wait 2\n\tbattle_wait 35\n\tif I_BattleIsSiegeBattle\n\tand I_CompareCounter general_wait = 2\n\tset_counter general_wait 3\n\tbattle_wait 35\n\tend_if\n\tend_if\n\tif I_BattleIsSiegeBattle\n\tand I_CompareCounter general_wait = 3\n\trelease_unit a1u1\n\tset_counter general_wait 0\n\tend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter general_wait = 1\n\tand I_IsUnitMoveFastSet a2u1\n\tand I_BattleEnemyArmyNumberOfUnitCategory cavalry > 0\n\n\tbattle_wait 0.5\n\tunit_order_halt a2u1\n\n\tif I_CompareCounter enemy_unit_count < 7\n\tset_counter general_wait 2\n\tbattle_wait 20\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter general_wait = 2\n\tset_counter general_wait 3\n\tbattle_wait 20\n\tend_if\n\tend_if\n\tif I_CompareCounter enemy_unit_count > 6\n\tand I_CompareCounter enemy_unit_count < 12\n\tset_counter general_wait 2\n\tbattle_wait 25\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter general_wait = 2\n\tset_counter general_wait 3\n\tbattle_wait 25\n\tend_if\n\tend_if\n\tif I_CompareCounter enemy_unit_count > 11\n\tand I_CompareCounter enemy_unit_count < 16\n\tset_counter general_wait 2\n\tbattle_wait 30\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter general_wait = 2\n\tset_counter general_wait 3\n\tbattle_wait 30\n\tend_if\n\tend_if\n\tif I_CompareCounter enemy_unit_count > 15\n\tset_counter general_wait 2\n\tbattle_wait 35\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter general_wait = 2\n\tset_counter general_wait 3\n\tbattle_wait 35\n\tend_if\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter general_wait = 3\n\trelease_unit a2u1\n\tset_counter general_wait 0\n\tend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter general_wait > 1\n\tand I_BattleIsSiegeBattle\n\tand ! I_BattlePlayerArmyIsAttacker\n\tand I_UnitEnemyUnitInRadius a1u1 60\n\n\tset_counter general_wait 0\n\trelease_unit a1u1\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter general_wait > 1\n\tand I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_UnitEnemyUnitInRadius a2u1 60\n\n\tset_counter general_wait 0\n\trelease_unit a2u1\nend_monitor\n\n;################## Germanicu5 Integrated Siege script ###########################\n\nmonitor_conditions I_BattleStarted\n\tand ! I_BattleIsFortBattle\n\tand I_BattleEnemyArmyNumberOfMountClass elephant = 0\n\tand I_BattleSettlementFortificationLevel > 0\n\tand I_CompareCounter siege_fix = 1\n\n\tset_counter siege_fix 0\n\n\tif I_BattleIsSallyOutBattle\n\tand I_BattleEnemyArmyNumberOfClassAndCategory missile siege > 0\n\tset_counter army_sieging 1\n\tend_if\n\n\tif I_BattleIsSallyOutBattle\n\tand I_BattleEnemyArmyNumberOfClassAndCategory missile siege = 0\n\tset_counter wall_advance_s 1\n\tend_if\nend_monitor\n\n;;;;;;;Sally Out\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_CompareCounter reset_army2 = 1\n\n\tset_counter reset_army2 0\n\tset_counter enemy_unit_count 0\n\n\tif I_BattleEnemyArmyNumberOfUnits > 0\n\tlabel_unit 1 0 0 a2u1\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 1\n\tlabel_unit 1 0 1 a2u2\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 2\n\tlabel_unit 1 0 2 a2u3\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 3\n\tlabel_unit 1 0 3 a2u4\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 4\n\tlabel_unit 1 0 4 a2u5\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 5\n\tlabel_unit 1 0 5 a2u6\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 6\n\tlabel_unit 1 0 6 a2u7\n" +
                    "\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 7\n\tlabel_unit 1 0 7 a2u8\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 8\n\tlabel_unit 1 0 8 a2u9\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 9\n\tlabel_unit 1 0 9 a2u10\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 10\n\tlabel_unit 1 0 10 a2u11\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 11\n\tlabel_unit 1 0 11 a2u12\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 12\n\tlabel_unit 1 0 12 a2u13\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 13\n\tlabel_unit 1 0 13 a2u14\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 14\n\tlabel_unit 1 0 14 a2u15\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 15\n\tlabel_unit 1 0 15 a2u16\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 16\n\tlabel_unit 1 0 16 a2u17\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 17\n\tlabel_unit 1 0 17 a2u18\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits > 18\n\tlabel_unit 1 0 18 a2u19\n\tinc_counter enemy_unit_count 1\n\tif I_BattleEnemyArmyNumberOfUnits = 20\n\tlabel_unit 1 0 19 a2u20\n\tinc_counter enemy_unit_count 1\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\nend_monitor\n\n;;;;;;;Huge City\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand ! I_BattleIsFortBattle\n\t and I_CompareCounter army_sieging = 1\n\t and I_CompareCounter army2_sally = 1\n\tand I_BattleEnemyArmyNumberOfClassAndCategory missile siege > 0\n\tand I_BattlePlayerArmyNumberOfAttribute extreme_range > 0\n\tand I_BattlePlayerArmyIsAttacker\n\tand ! I_IsBattleSettlementCastle\n\tand I_BattleSettlementFortificationLevel 4\n\n\tbattle_wait 2\n\tset_counter reset_army2 1\n\tbattle_wait 0.5\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tunit_group_order_relative_move_formed army2 0 35\n\n\tset_counter emergency_stop 1\n\tset_counter omfg_cannon_tower 1\n\tbattle_wait 2\n\tai_active_set on\n\tset_counter sally_check 10\n\tbattle_wait 30\n\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 10\n\tif I_BattleStarted\n\tand I_CompareCounter omfg_cannon_tower > 0\n\tset_counter omfg_cannon_tower 0\n\tend_if\n\n\tif I_BattleStarted\n\tand I_CompareCounter emergency_stop = 1\n\tif ! I_IsUnitGroupMoving army2\n\tset_counter emergency_stop 0\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\tif I_IsUnitGroupMoving army2\n;\tbattle_wait 170\n\tset_counter sally_check 14\n\tbattle_wait 20\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 14\n\tset_counter sally_check 15\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 15\n\tset_counter sally_check 16\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 16\n\tset_counter sally_check 17\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 17\n\tset_counter sally_check 18\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 18\n\tset_counter sally_check 19\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 19\n\tset_counter emergency_stop 0\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\tend_if\n\tend_if\n\n\tset_counter army_sieging 0\n\tset_counter army2_sally 0\n\tend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand ! I_BattleIsFortBattle\n\t and I_CompareCounter army_sieging = 1\n\t and I_CompareCounter army2_sally = 1\n\tand I_BattleEnemyArmyNumberOfClassAndCategory missile siege > 0\n\tand I_BattlePlayerArmyNumberOfAttribute extreme_range = 0\n\tand I_BattlePlayerArmyIsAttacker\n\tand ! I_IsBattleSettlementCastle\n\tand I_BattleSettlementFortificationLevel 4\n\n\tbattle_wait 2\n\tset_counter reset_army2 1\n\tbattle_wait 0.5\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tunit_group_order_relative_move_formed army2 0 80\n\n\tset_counter emergency_stop 1\n\tset_counter omfg_cannon_tower 1\n\tbattle_wait 2\n\tai_active_set on\n;\tbattle_wait 60\n\tset_counter sally_check 20\n\tbattle_wait 30\nif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 20\n\tset_counter sally_check 21\n\tbattle_wait 30\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 21\n\tif I_BattleStarted\n\tand I_CompareCounter omfg_cannon_tower > 0\n\tset_counter omfg_cannon_tower 0\n\tend_if\n\n\tif I_BattleStarted\n\tand I_CompareCounter emergency_stop = 1\n\tif ! I_IsUnitGroupMoving army2\n\tset_counter emergency_stop 0\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\tif I_IsUnitGroupMoving army2\n;\tbattle_wait 170\n\tset_counter sally_check 24\n\tbattle_wait 20\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 24\n\tset_counter sally_check 25\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 25\n\tset_counter sally_check 26\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 26\n\tset_counter sally_check 27\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 27\n\tset_counter sally_check 28\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 28\n\tset_counter sally_check 29\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 29\n\tset_counter emergency_stop 0\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\tend_if\n\tend_if\n\n\tset_counter army_sieging 0\n\tset_counter army2_sally 0\n\tend_if\nend_if\nend_monitor\n\n;;;;;;;Large City\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand ! I_BattleIsFortBattle\n\t and I_CompareCounter army_sieging = 1\n\t and I_CompareCounter army2_sally = 1\n\tand I_BattleEnemyArmyNumberOfClassAndCategory missile siege > 0\n\tand I_BattlePlayerArmyNumberOfAttribute extreme_range > 0\n\tand I_BattlePlayerArmyIsAttacker\n\tand ! I_IsBattleSettlementCastle\n\tand I_BattleSettlementFortificationLevel 3\n\n\tbattle_wait 2\n\tset_counter reset_army2 1\n\tbattle_wait 0.5\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tunit_group_order_relative_move_formed army2 0 45\n\n\tset_counter emergency_stop 1\n\tset_counter omfg_cannon_tower 1\n\tbattle_wait 2\n\tai_active_set on\n\tset_counter sally_check 30\n\tbattle_wait 37\n\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 30\n\tif I_BattleStarted\n\tand I_CompareCounter omfg_cannon_tower > 0\n\tset_counter omfg_cannon_tower 0\n\tend_if\n\n\tif I_BattleStarted\n\tand I_CompareCounter emergency_stop = 1\n\tif ! I_IsUnitGroupMoving army2\n\tset_counter emergency_stop 0\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\tif I_IsUnitGroupMoving army2\n;\tbattle_wait 170\n\tset_counter sally_check 34\n\tbattle_wait 20\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 34\n\tset_counter sally_check 35\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 35\n\tset_counter sally_check 36\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 36\n\tset_counter sally_check 37\n\tbattle_wait 30\n\tend_if\n" +
                    "\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 37\n\tset_counter sally_check 38\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 38\n\tset_counter sally_check 39\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 39\n\tset_counter emergency_stop 0\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\tend_if\n\tend_if\n\n\tset_counter army_sieging 0\n\tset_counter army2_sally 0\n\tend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand ! I_BattleIsFortBattle\n\t and I_CompareCounter army_sieging = 1\n\t and I_CompareCounter army2_sally = 1\n\tand I_BattleEnemyArmyNumberOfClassAndCategory missile siege > 0\n\tand I_BattlePlayerArmyNumberOfAttribute extreme_range = 0\n\tand I_BattlePlayerArmyIsAttacker\n\tand ! I_IsBattleSettlementCastle\n\tand I_BattleSettlementFortificationLevel 3\n\n\tbattle_wait 2\n\tset_counter reset_army2 1\n\tbattle_wait 0.5\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tunit_group_order_relative_move_formed army2 0 90\n\n\tset_counter emergency_stop 1\n\tset_counter omfg_cannon_tower 1\n\tbattle_wait 2\n\tai_active_set on\n;\tbattle_wait 70\n\tset_counter sally_check 40\n\tbattle_wait 35\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 40\n\tset_counter sally_check 41\n\tbattle_wait 35\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 41\n\tif I_BattleStarted\n\tand I_CompareCounter emergency_stop = 1\n\tif ! I_IsUnitGroupMoving army2\n\tset_counter emergency_stop 0\n\tif I_CompareCounter omfg_cannon_tower > 0\n\tset_counter omfg_cannon_tower 0\n\tend_if\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\tif I_IsUnitGroupMoving army2\n;\tbattle_wait 170\n\tset_counter sally_check 44\n\tbattle_wait 20\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 44\n\tset_counter sally_check 45\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 45\n\tset_counter sally_check 46\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 46\n\tset_counter sally_check 47\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 47\n\tset_counter sally_check 48\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 48\n\tset_counter sally_check 49\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 49\n\tset_counter emergency_stop 0\n\tif I_CompareCounter omfg_cannon_tower > 0\n\tset_counter omfg_cannon_tower 0\n\tend_if\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\tend_if\n\tend_if\n\n\tset_counter army_sieging 0\n\tset_counter army2_sally 0\n\tend_if\nend_monitor\n\n;;;;;;;Castle, Citadel and Fortress\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand ! I_BattleIsFortBattle\n\t and I_CompareCounter army_sieging = 1\n\t and I_CompareCounter army2_sally = 1\n\tand I_BattleEnemyArmyNumberOfClassAndCategory missile siege > 0\n\tand I_BattlePlayerArmyNumberOfAttribute extreme_range > 0\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_IsBattleSettlementCastle\n\tand I_BattleSettlementFortificationLevel 3\n\n\tbattle_wait 2\n\tset_counter reset_army2 1\n\tbattle_wait 0.5\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tunit_group_order_relative_move_formed army2 0 100\n\n\tset_counter emergency_stop 1\n\tset_counter omfg_cannon_tower 1\n\tbattle_wait 2\n\tai_active_set on\n;\tbattle_wait 75\n\tset_counter sally_check 50\n\tbattle_wait 15\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 50\n\tset_counter sally_check 51\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 51\n\tset_counter sally_check 52\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 52\n\tif I_BattleStarted\n\tand I_CompareCounter omfg_cannon_tower > 0\n\tset_counter omfg_cannon_tower 0\n\tend_if\n\n\tif I_BattleStarted\n\tand I_CompareCounter emergency_stop = 1\n\tif ! I_IsUnitGroupMoving army2\n\tset_counter emergency_stop 0\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\tif I_IsUnitGroupMoving army2\n;\tbattle_wait 170\n\tset_counter sally_check 54\n\tbattle_wait 20\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 54\n\tset_counter sally_check 55\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 55\n\tset_counter sally_check 56\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 56\n\tset_counter sally_check 57\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 57\n\tset_counter sally_check 58\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 58\n\tset_counter sally_check 59\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 59\n\tset_counter emergency_stop 0\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\tend_if\n\tend_if\n\n\tset_counter army_sieging 0\n\tset_counter army2_sally 0\n\tend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand ! I_BattleIsFortBattle\n\t and I_CompareCounter army_sieging = 1\n\t and I_CompareCounter army2_sally = 1\n\tand I_BattleEnemyArmyNumberOfClassAndCategory missile siege > 0\n\tand I_BattlePlayerArmyNumberOfAttribute extreme_range = 0\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_IsBattleSettlementCastle\n\tand I_BattleSettlementFortificationLevel 3\n\n\tbattle_wait 2\n\tset_counter reset_army2 1\n\tbattle_wait 0.5\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tunit_group_order_relative_move_formed army2 0 170\n\n\tset_counter emergency_stop 1\n\tset_counter omfg_cannon_tower 1\n\tbattle_wait 2\n\tai_active_set on\n;\tbattle_wait 125\n\tset_counter sally_check 60\n\tbattle_wait 30\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 60\n\tset_counter sally_check 61\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 61\n\tset_counter sally_check 62\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n" +
                    "\tand I_CompareCounter sally_check = 62\n\tset_counter sally_check 63\n\tbattle_wait 35\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 63\n\tif I_BattleStarted\n\tand I_CompareCounter omfg_cannon_tower > 0\n\tset_counter omfg_cannon_tower 0\n\tend_if\n\n\tif I_BattleStarted\n\tand I_CompareCounter emergency_stop = 1\n\tif ! I_IsUnitGroupMoving army2\n\tset_counter emergency_stop 0\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\tif I_IsUnitGroupMoving army2\n;\tbattle_wait 170\n\tset_counter sally_check 64\n\tbattle_wait 20\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 64\n\tset_counter sally_check 65\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 65\n\tset_counter sally_check 66\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 66\n\tset_counter sally_check 67\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 67\n\tset_counter sally_check 68\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 68\n\tset_counter sally_check 69\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 69\n\tset_counter emergency_stop 0\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\tend_if\n\tend_if\n\n\tset_counter army_sieging 0\n\tset_counter army2_sally 0\n\tend_if\nend_monitor\n\n;;;;;;;Wall Advance\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter wall_advance_s = 1\n\tand I_CompareCounter kill_sally = 1\n\tand I_BattleIsSallyOutBattle\n\n\tbattle_wait 2\n\tif I_BattleSettlementFortificationLevel < 3\n\t and I_CompareCounter wall_advance_s = 1\n\tset_counter reset_army2 1\n\tbattle_wait 0.5\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tunit_group_order_relative_move_unformed army2 0 95\n\tend_if\n\n\tif I_BattleSettlementFortificationLevel > 2\n\t and I_CompareCounter wall_advance_s = 1\n\tset_counter reset_army2 1\n\tbattle_wait 0.5\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tunit_group_order_relative_move_unformed army2 0 200\n\tend_if\n\n\tset_counter emergency_stop 1\n\tif I_BattleSettlementFortificationLevel < 3\n;\tbattle_wait 72\n\tset_counter sally_check 113\n\tbattle_wait 36\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 113\n\tset_counter sally_check 114\n\tbattle_wait 36\n\tend_if\n\tend_if\n\tif I_BattleSettlementFortificationLevel > 2\n;\tbattle_wait 145\n\tset_counter sally_check 110\n\tbattle_wait 25\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 110\n\tset_counter sally_check 111\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 111\n\tset_counter sally_check 112\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 112\n\tset_counter sally_check 113\n\tbattle_wait 30\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 113\n\tset_counter sally_check 114\n\tbattle_wait 30\n\tend_if\n\tend_if\n\n\tif I_BattleIsSallyOutBattle\n\tand I_CompareCounter sally_check = 114\n\tif I_BattleStarted\n\tand I_CompareCounter emergency_stop = 1\n\n\tset_counter emergency_stop 0\n\tunit_group_order_halt army2\n;\tbattle_wait 0.5\n;\tai_active_set off\n\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\tset_counter wall_advance_s 0\n\tend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_BattleIsSallyOutBattle\n\tand I_CompareCounter omfg_cannon_tower > 0\n\n\tset_counter omfg_cannon_tower 2\nif I_CompareCounter player_unit_count > 0\n\tif I_UnitStatus a1u1 missiles_firing\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\tif I_UnitStatus a1u1 missiles_reloading\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 1\n\tand I_CompareCounter omfg_cannon_tower != 1\n\tif I_UnitStatus a1u2 missiles_firing\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\tif I_UnitStatus a1u2 missiles_reloading\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 2\n\tand I_CompareCounter omfg_cannon_tower != 1\n\tif I_UnitStatus a1u3 missiles_firing\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\tif I_UnitStatus a1u3 missiles_reloading\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 3\n\tand I_CompareCounter omfg_cannon_tower != 1\n\tif I_UnitStatus a1u4 missiles_firing\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\tif I_UnitStatus a1u4 missiles_reloading\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 4\n\tand I_CompareCounter omfg_cannon_tower != 1\n\tif I_UnitStatus a1u5 missiles_firing\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\tif I_UnitStatus a1u5 missiles_reloading\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 5\n\tand I_CompareCounter omfg_cannon_tower != 1\n\tif I_UnitStatus a1u6 missiles_firing\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\tif I_UnitStatus a1u6 missiles_reloading\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 6\n\tand I_CompareCounter omfg_cannon_tower != 1\n\tif I_UnitStatus a1u7 missiles_firing\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\tif I_UnitStatus a1u7 missiles_reloading\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 7\n\tand I_CompareCounter omfg_cannon_tower != 1\n\tif I_UnitStatus a1u8 missiles_firing\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\tif I_UnitStatus a1u8 missiles_reloading\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 8\n\tand I_CompareCounter omfg_cannon_tower != 1\n\tif I_UnitStatus a1u9 missiles_firing\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\tif I_UnitStatus a1u9 missiles_reloading\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 9\n\tand I_CompareCounter omfg_cannon_tower != 1\n\tif I_UnitStatus a1u10 missiles_firing\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\tif I_UnitStatus a1u10 missiles_reloading\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 10\n\tand I_CompareCounter omfg_cannon_tower != 1\n\tif I_UnitStatus a1u11 missiles_firing\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\tif I_UnitStatus a1u11 missiles_reloading\n" +
                    "\tset_counter omfg_cannon_tower 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 11\n\tand I_CompareCounter omfg_cannon_tower != 1\n\tif I_UnitStatus a1u12 missiles_firing\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\tif I_UnitStatus a1u12 missiles_reloading\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 12\n\tand I_CompareCounter omfg_cannon_tower != 1\n\tif I_UnitStatus a1u13 missiles_firing\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\tif I_UnitStatus a1u13 missiles_reloading\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 13\n\tand I_CompareCounter omfg_cannon_tower != 1\n\tif I_UnitStatus a1u14 missiles_firing\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\tif I_UnitStatus a1u14 missiles_reloading\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 14\n\tand I_CompareCounter omfg_cannon_tower != 1\n\tif I_UnitStatus a1u15 missiles_firing\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\tif I_UnitStatus a1u15 missiles_reloading\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 15\n\tand I_CompareCounter omfg_cannon_tower != 1\n\tif I_UnitStatus a1u16 missiles_firing\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\tif I_UnitStatus a1u16 missiles_reloading\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 16\n\tand I_CompareCounter omfg_cannon_tower != 1\n\tif I_UnitStatus a1u17 missiles_firing\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\tif I_UnitStatus a1u17 missiles_reloading\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 17\n\tand I_CompareCounter omfg_cannon_tower != 1\n\tif I_UnitStatus a1u18 missiles_firing\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\tif I_UnitStatus a1u18 missiles_reloading\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 18\n\tand I_CompareCounter omfg_cannon_tower != 1\n\tif I_UnitStatus a1u19 missiles_firing\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\tif I_UnitStatus a1u19 missiles_reloading\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 19\n\tand I_CompareCounter omfg_cannon_tower != 1\n\tif I_UnitStatus a1u20 missiles_firing\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\tif I_UnitStatus a1u20 missiles_reloading\n\tset_counter omfg_cannon_tower 1\n\tend_if\n\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\nend_if\n\nif I_CompareCounter omfg_cannon_tower = 2\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tand I_CompareCounter omfg_cannon_tower = 2\n\tand I_IsUnitUnderFire a2u1\n\tset_counter omfg_cannon_tower 3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tand I_CompareCounter omfg_cannon_tower = 2\n\tand I_IsUnitUnderFire a2u2\n\tset_counter omfg_cannon_tower 3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tand I_CompareCounter omfg_cannon_tower = 2\n\tand I_IsUnitUnderFire a2u3\n\tset_counter omfg_cannon_tower 3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tand I_CompareCounter omfg_cannon_tower = 2\n\tand I_IsUnitUnderFire a2u4\n\tset_counter omfg_cannon_tower 3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tand I_CompareCounter omfg_cannon_tower = 2\n\tand I_IsUnitUnderFire a2u5\n\tset_counter omfg_cannon_tower 3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tand I_CompareCounter omfg_cannon_tower = 2\n\tand I_IsUnitUnderFire a2u6\n\tset_counter omfg_cannon_tower 3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tand I_CompareCounter omfg_cannon_tower = 2\n\tand I_IsUnitUnderFire a2u7\n\tset_counter omfg_cannon_tower 3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tand I_CompareCounter omfg_cannon_tower = 2\n\tand I_IsUnitUnderFire a2u8\n\tset_counter omfg_cannon_tower 3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tand I_CompareCounter omfg_cannon_tower = 2\n\tand I_IsUnitUnderFire a2u9\n\tset_counter omfg_cannon_tower 3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tand I_CompareCounter omfg_cannon_tower = 2\n\tand I_IsUnitUnderFire a2u10\n\tset_counter omfg_cannon_tower 3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tand I_CompareCounter omfg_cannon_tower = 2\n\tand I_IsUnitUnderFire a2u11\n\tset_counter omfg_cannon_tower 3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tand I_CompareCounter omfg_cannon_tower = 2\n\tand I_IsUnitUnderFire a2u12\n\tset_counter omfg_cannon_tower 3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tand I_CompareCounter omfg_cannon_tower = 2\n\tand I_IsUnitUnderFire a2u13\n\tset_counter omfg_cannon_tower 3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tand I_CompareCounter omfg_cannon_tower = 2\n\tand I_IsUnitUnderFire a2u14\n\tset_counter omfg_cannon_tower 3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tand I_CompareCounter omfg_cannon_tower = 2\n\tand I_IsUnitUnderFire a2u15\n\tset_counter omfg_cannon_tower 3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tand I_CompareCounter omfg_cannon_tower = 2\n\tand I_IsUnitUnderFire a2u16\n\tset_counter omfg_cannon_tower 3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tand I_CompareCounter omfg_cannon_tower = 2\n\tand I_IsUnitUnderFire a2u17\n\tset_counter omfg_cannon_tower 3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tand I_CompareCounter omfg_cannon_tower = 2\n\tand I_IsUnitUnderFire a2u18\n\tset_counter omfg_cannon_tower 3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tand I_CompareCounter omfg_cannon_tower = 2\n\tand I_IsUnitUnderFire a2u19\n\tset_counter omfg_cannon_tower 3\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tand I_CompareCounter omfg_cannon_tower = 2\n\tand I_IsUnitUnderFire a2u20\n\tset_counter omfg_cannon_tower 3\n\tend_if\nend_if\n\n\tif I_CompareCounter omfg_cannon_tower = 3\n\tset_counter omfg_cannon_tower 0\n\tset_counter emergency_stop 0\n;\tai_active_set off\n;\tbattle_wait 0.5\n\tai_active_set on\n\tend_if\n\tbattle_wait 7\nend_monitor\n\nmonitor_event BattlePlayerUnitAttacksEnemyUnit BattleIsMeleeAttack\n\tand I_CompareCounter panel_check = 1\n\tand I_CompareCounter emergency_stop = 1\n;\tand I_CompareCounter labels_only = 1\n\tand I_CompareCounter kill_sally = 1\n\n\tif I_BattleIsSiegeBattle\n\tunit_group_order_halt army1\n\tbattle_wait 0.5\n\tai_active_set on\n\tset_counter emergency_stop 0\n\tend_if\n\tif I_BattleIsSallyOutBattle\n\tunit_group_order_halt army2\n\tbattle_wait 0.5\n\tai_active_set on\n\tset_counter emergency_stop 0\n\tend_if\nend_monitor\n\n;################## Open Battles #################\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter ob_defense_launch = 1\n\tand I_CompareCounter ob_defend = 0\n\tand I_CompareCounter open_battle = 1\n\tand I_BattlePlayerArmyIsAttacker\n\n\tset_counter ob_defend 2\n\n\tif I_UnitDistanceFromUnit a1u1 a2u1 < 220\n\tand I_BattleEnemyArmyNumberOfUnitClass missile = 0\n\tand I_BattleEnemyArmyNumberOfUnitClass skirmish = 0\n\tai_gta_plan_set 1 ATTACK_ALL\n\tset_counter apply_strategy 1\n\tset_counter ob_defend 4\n\tset_counter ob_defense_launch 0\n\tend_if\n\n\tif I_CompareCounter ob_defend = 2\n\tand I_BattleEnemyArmyPercentageOfUnitCategory cavalry > 60\n\tand I_UnitDistanceFromUnit a1u1 a2u1 < 270\n\tai_gta_plan_set 1 ATTACK_ALL\n\tset_counter apply_strategy 1\n\tset_counter ob_defend 4\n\tset_counter ob_defense_launch 0\n\tend_if\n\n\tif I_CompareCounter ob_defend = 2\n\tand I_BattleEnemyArmyPercentageOfUnitCategory cavalry > 60\n" +
                    "\tset_counter ob_repeat_test 3\n\tend_if\n\n\tif I_CompareCounter ob_defend = 2\n\tand I_BattlePlayerAllianceOddsInFavour > 1.7\n\tset_counter ob_repeat_test 3\n\tend_if\n\n\tif I_CompareCounter ob_defend = 2\n\tand I_BattleEnemyArmyNumberOfUnitClass missile = 0\n\tand I_BattleEnemyArmyNumberOfUnitClass skirmish = 0\n\tset_counter ob_repeat_test 1\n\tend_if\n;\tif I_BattlePlayerArmyNumberOfClassAndCategory missile siege > 0\n;\tend_if\nend_monitor\n\nmonitor_event BattlePlayerUnitAttacksEnemyUnit BattleIsMeleeAttack\n\tand I_CompareCounter ob_defense_launch = 1\n\tand I_CompareCounter open_battle = 1\n\tand I_CompareCounter ob_defend != 4\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_UnitEnemyUnitInRadius a2u1 200\n\tand BattleEnemyUnitClass != missile\n\tand BattleEnemyUnitClass != skirmish\n\tand BattleDirectionOfAttack != front\n\tand BattleRangeOfAttack < 200\n\n\tai_gta_plan_set 1 ATTACK_ALL\n\tset_counter ob_defend 4\n\tset_counter ob_defense_launch 0\nend_monitor\n\nmonitor_event BattlePlayerUnitAttacksEnemyUnit BattleIsMeleeAttack\n\tand I_CompareCounter ob_defense_launch = 1\n\tand I_CompareCounter open_battle = 1\n\tand I_CompareCounter ob_defend != 4\n\tand I_BattlePlayerArmyIsAttacker\n\tand BattleDirectionOfAttack != rear\n\tand I_UnitEnemyUnitInRadius a2u1 200\n\tand BattleRangeOfAttack < 200\n\tand BattlePlayerUnitCategory infantry\n\n\tai_gta_plan_set 1 ATTACK_ALL\n\tset_counter ob_defend 4\n" +
                    "\tset_counter ob_defense_launch 0\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter ob_defense_launch = 1\n\tand I_CompareCounter open_battle = 1\n\tand I_CompareCounter ob_defend != 4\n\tand I_UnitEnemyUnitInRadius a2u1 100\n\tand I_BattlePlayerArmyIsAttacker\n\n\tai_gta_plan_set 1 ATTACK_ALL\n\tset_counter apply_strategy 1\n\tset_counter ob_defend 4\n\tset_counter ob_defense_launch 0\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter ob_defense_launch = 1\n\tand I_CompareCounter open_battle = 1\n\tand I_CompareCounter ob_defend != 4\n\tand I_BattleEnemyArmyPercentageOfUnitCategory cavalry > 60\n\tand I_UnitEnemyUnitInRadius a2u1 250\n\tand I_BattlePlayerArmyIsAttacker\n\n\tai_gta_plan_set 1 ATTACK_ALL\n\tset_counter apply_strategy 1\n\tset_counter ob_defend 4\n\tset_counter ob_defense_launch 0\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter ob_defense_launch = 1\n\tand I_CompareCounter open_battle = 1\n\tand I_CompareCounter ob_defend != 4\n\n\tset_counter player_units_closing 0\n\n\tif I_CompareCounter player_unit_count > 0\n\tand I_UnitDistanceFromUnit a1u1 a2u1 < 180\n\tand ! I_UnitStatus a1u1 missiles_firing\n\tand ! I_UnitStatus a1u1 missiles_reloading\n\tinc_counter player_units_closing 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 1\n\tand I_UnitDistanceFromUnit a1u2 a2u1 < 180\n\tand ! I_UnitStatus a1u2 missiles_firing\n\tand ! I_UnitStatus a1u2 missiles_reloading\n\tinc_counter player_units_closing 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 2\n\tand I_UnitDistanceFromUnit a1u3 a2u1 < 180\n\tand ! I_UnitStatus a1u3 missiles_firing\n\tand ! I_UnitStatus a1u3 missiles_reloading\n\tinc_counter player_units_closing 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 3\n\tand I_UnitDistanceFromUnit a1u4 a2u1 < 180\n\tand ! I_UnitStatus a1u4 missiles_firing\n\tand ! I_UnitStatus a1u4 missiles_reloading\n\tinc_counter player_units_closing 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 4\n\tand I_UnitDistanceFromUnit a1u5 a2u1 < 180\n\tand ! I_UnitStatus a1u5 missiles_firing\n\tand ! I_UnitStatus a1u5 missiles_reloading\n\tinc_counter player_units_closing 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 5\n\tand I_UnitDistanceFromUnit a1u6 a2u1 < 180\n\tand ! I_UnitStatus a1u6 missiles_firing\n\tand ! I_UnitStatus a1u6 missiles_reloading\n\tinc_counter player_units_closing 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 6\n\tand I_UnitDistanceFromUnit a1u7 a2u1 < 180\n\tand ! I_UnitStatus a1u7 missiles_firing\n\tand ! I_UnitStatus a1u7 missiles_reloading\n\tinc_counter player_units_closing 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 7\n\tand I_UnitDistanceFromUnit a1u8 a2u1 < 180\n\tand ! I_UnitStatus a1u8 missiles_firing\n\tand ! I_UnitStatus a1u8 missiles_reloading\n\tinc_counter player_units_closing 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 8\n\tand I_UnitDistanceFromUnit a1u9 a2u1 < 180\n\tand ! I_UnitStatus a1u9 missiles_firing\n\tand ! I_UnitStatus a1u9 missiles_reloading\n\tinc_counter player_units_closing 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 9\n\tand I_UnitDistanceFromUnit a1u10 a2u1 < 180\n\tand ! I_UnitStatus a1u10 missiles_firing\n\tand ! I_UnitStatus a1u10 missiles_reloading\n\tinc_counter player_units_closing 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 10\n\tand I_UnitDistanceFromUnit a1u11 a2u1 < 180\n\tand ! I_UnitStatus a1u11 missiles_firing\n\tand ! I_UnitStatus a1u11 missiles_reloading\n\tinc_counter player_units_closing 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 11\n\tand I_UnitDistanceFromUnit a1u12 a2u1 < 180\n\tand ! I_UnitStatus a1u12 missiles_firing\n\tand ! I_UnitStatus a1u12 missiles_reloading\n\tinc_counter player_units_closing 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 12\n\tand I_UnitDistanceFromUnit a1u13 a2u1 < 180\n\tand ! I_UnitStatus a1u13 missiles_firing\n\tand ! I_UnitStatus a1u13 missiles_reloading\n\tinc_counter player_units_closing 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 13\n\tand I_UnitDistanceFromUnit a1u14 a2u1 < 180\n\tand ! I_UnitStatus a1u14 missiles_firing\n\tand ! I_UnitStatus a1u14 missiles_reloading\n\tinc_counter player_units_closing 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 14\n\tand I_UnitDistanceFromUnit a1u15 a2u1 < 180\n\tand ! I_UnitStatus a1u15 missiles_firing\n\tand ! I_UnitStatus a1u15 missiles_reloading\n\tinc_counter player_units_closing 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 15\n\tand I_UnitDistanceFromUnit a1u16 a2u1 < 180\n\tand ! I_UnitStatus a1u16 missiles_firing\n\tand ! I_UnitStatus a1u16 missiles_reloading\n\tinc_counter player_units_closing 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 16\n\tand I_UnitDistanceFromUnit a1u17 a2u1 < 180\n\tand ! I_UnitStatus a1u17 missiles_firing\n\tand ! I_UnitStatus a1u17 missiles_reloading\n\tinc_counter player_units_closing 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 17\n\tand I_UnitDistanceFromUnit a1u18 a2u1 < 180\n\tand ! I_UnitStatus a1u18 missiles_firing\n\tand ! I_UnitStatus a1u18 missiles_reloading\n\tinc_counter player_units_closing 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count > 18\n\tand I_UnitDistanceFromUnit a1u19 a2u1 < 180\n\tand ! I_UnitStatus a1u19 missiles_firing\n\tand ! I_UnitStatus a1u19 missiles_reloading\n\tinc_counter player_units_closing 1\n\tend_if\n\n\tif I_CompareCounter player_unit_count = 20\n\tand I_UnitDistanceFromUnit a1u20 a2u1 < 180\n\tand ! I_UnitStatus a1u20 missiles_firing\n\tand ! I_UnitStatus a1u20 missiles_reloading\n\tinc_counter player_units_closing 1\n\tend_if\n\n\tif I_CompareCounter player_units_closing > 1\n\tinc_counter player_enveloping 1\n\tend_if\n\tif I_CompareCounter player_units_closing < 1\n\tset_counter player_enveloping 0\n\tend_if\n\tif I_CompareCounter player_enveloping > 5\n\tai_gta_plan_set 1 ATTACK_ALL\n\tset_counter apply_strategy 1\n\tset_counter ob_defend 4\n\tset_counter ob_defense_launch 0\n\tend_if\n\n\tbattle_wait 10\nend_monitor\n\nmonitor_event BattleEnemyUnitAttacksPlayerUnit TrueCondition\n\tand I_CompareCounter panel_check = 1\n\tand I_CompareCounter ob_defend > 1\n\tand I_CompareCounter ob_defend != 4\n\tand BattleIsMeleeAttack\n\tand BattleEnemyUnitClass heavy\n\tand BattleEnemyUnitCategory cavalry\n\tand ! BattlePlayerUnitClass heavy\n\tand ! BattlePlayerUnitClass heavy\n\tand I_CompareCounter open_battle = 1\n\tand I_BattlePlayerArmyIsAttacker\n\n\tinc_counter ob_engaged -1\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter ob_defend > 1\n\tand I_CompareCounter ob_defend != 4\n\tand I_CompareCounter open_battle = 1\n\tand I_BattlePlayerArmyIsAttacker\n\n\tif I_PercentageOfArmyKilled 0 0 < 5\n\tand I_PercentageOfArmyKilled 1 0 > 10\n\tset_counter ob_repeat_test 4\n\tend_if\n\n\tif I_PercentageOfArmyKilled 0 0 < 10\n\tand I_PercentageOfArmyKilled 1 0 > 20\n\tset_counter ob_repeat_test 4\n\tend_if\n\n\tif I_PercentageOfArmyKilled 0 0 < 15\n\tand I_PercentageOfArmyKilled 1 0 > 25\n\tset_counter ob_repeat_test 4\n\tend_if\n\tbattle_wait 30\nend_monitor\n\n;monitor_event BattlePlayerUnitAttacksEnemyUnit TrueCondition\n;\tand I_CompareCounter panel_check = 1\n;\tand I_CompareCounter ob_defense_launch = 1\n;\tand ! I_CompareCounter ob_defend > 1\n;\tand BattlePlayerUnitCategory siege\n;\tand BattlePlayerUnitClass missile\n;\tand BattleRangeOfAttack < 400\n;\tand I_CompareCounter open_battle = 1\n;\tand I_BattlePlayerArmyIsAttacker\n;\tset_counter ob_siege_attack 1\n;end_monitor\n\n;monitor_conditions I_BattleStarted\n;\tand I_CompareCounter ob_defense_launch = 1\n;\tand I_CompareCounter ob_siege_attack = 1\n;\tand I_CompareCounter open_battle = 1\n;\tand I_BattlePlayerArmyIsAttacker\n;\tif I_PercentageOfArmyKilled 0 0 < 3\n" +
                    ";\tand I_PercentageOfArmyKilled 1 0 > 5\n;\tset_counter ob_defend 2\n;\tset_counter ob_siege_attack 0\n;\tend_if\n;\tif I_PercentageOfArmyKilled 0 0 < 5\n;\tand I_PercentageOfArmyKilled 1 0 > 10\n;\tif I_CompareCounter ob_repeat_test < 2\n;\tset_counter ob_repeat_test 2\n;\tend_if\n;\tset_counter ob_defend 2\n;\tset_counter ob_siege_attack 0\n;\tend_if\n;\tbattle_wait 30\n;end_monitor\n\n;;;;;; Reinf triggers\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter def_alliance_ready = 1\n\tand I_CompareCounter ob_defense_launch = 1\n\tand I_CompareCounter open_battle = 1\n\tand I_CompareCounter ob_defend != 4\n\tand I_BattlePlayerArmyIsAttacker\n\n\tif I_CompareCounter player_engaged_reinf = 4\n\tai_gta_plan_set 1 ATTACK_ALL\n\tset_counter apply_strategy 1\n\tset_counter ob_defend 4\n\tset_counter ob_defense_launch 0\n\tset_counter def_alliance_ready 0\n\tend_if\n\n\tif I_IsUnitGroupEngaged army1\n\tinc_counter player_engaged_reinf 1\n\tend_if\n\n\tif I_CompareCounter player_engaged_reinf > 0\n\tand ! I_IsUnitGroupEngaged army1\n\tset_counter player_engaged_reinf 0\n\tend_if\n\n\tbattle_wait 10\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter def_alliance_ready = 1\n\tand I_CompareCounter ob_defense_launch = 1\n\tand I_CompareCounter open_battle = 1\n\tand I_CompareCounter ob_defend != 4\n\tand I_PercentageUnitGroupKilled army4 > 10\n\tand I_BattlePlayerArmyIsAttacker\n\n\tai_gta_plan_set 1 ATTACK_ALL\n\tset_counter apply_strategy 1\n\tset_counter ob_defend 4\n\tset_counter ob_defense_launch 0\n\tset_counter def_alliance_ready 0\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter def_alliance_ready = 1\n\tand I_CompareCounter ob_defense_launch = 1\n\tand I_CompareCounter open_battle = 1\n\tand I_CompareCounter ob_defend != 4\n\tand I_UnitEnemyUnitInRadius a4u1 100\n\tand I_BattlePlayerArmyIsAttacker\n\n\tai_gta_plan_set 1 ATTACK_ALL\n\tset_counter apply_strategy 1\n\tset_counter ob_defend 4\n\tset_counter ob_defense_launch 0\n\tset_counter def_alliance_ready 0\nend_monitor\n\n;;;;;; Main monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter ob_defense_launch = 1\n\tand I_CompareCounter ob_defend = 2\n\tand I_CompareCounter open_battle = 1\n\tand I_BattlePlayerArmyIsAttacker\n\n\tset_counter ob_defend 3\n\n\tif I_CompareCounter enemy_unit_count > 0\n\tif I_IsUnitUnderFire a2u1\n\tinc_counter ob_under_fire 2\n\tend_if\n\tif I_UnitStatus a2u1 fighting\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u1 pursuing\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u1 charging\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u1 missiles_firing\n\tinc_counter ob_under_fire -1\n\tend_if\n\tif I_UnitStatus a2u1 missiles_reloading\n\tinc_counter ob_under_fire -1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 1\n\tif I_IsUnitUnderFire a2u2\n\tinc_counter ob_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u2 fighting\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u2 pursuing\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u2 charging\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u2 missiles_firing\n\tinc_counter ob_under_fire -1\n\tend_if\n\tif I_UnitStatus a2u2 missiles_reloading\n\tinc_counter ob_under_fire -1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 2\n\tif I_IsUnitUnderFire a2u3\n\tinc_counter ob_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u3 fighting\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u3 pursuing\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u3 charging\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u3 missiles_firing\n\tinc_counter ob_under_fire -1\n\tend_if\n\tif I_UnitStatus a2u3 missiles_reloading\n\tinc_counter ob_under_fire -1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 3\n\tif I_IsUnitUnderFire a2u4\n\tinc_counter ob_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u4 fighting\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u4 pursuing\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u4 charging\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u4 missiles_firing\n\tinc_counter ob_under_fire -1\n\tend_if\n\tif I_UnitStatus a2u4 missiles_reloading\n\tinc_counter ob_under_fire -1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 4\n\tif I_IsUnitUnderFire a2u5\n\tinc_counter ob_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u5 fighting\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u5 pursuing\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u5 charging\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u5 missiles_firing\n\tinc_counter ob_under_fire -1\n\tend_if\n\tif I_UnitStatus a2u5 missiles_reloading\n\tinc_counter ob_under_fire -1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 5\n\tif I_IsUnitUnderFire a2u6\n\tinc_counter ob_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u6 fighting\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u6 pursuing\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u6 charging\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u6 missiles_firing\n\tinc_counter ob_under_fire -1\n\tend_if\n\tif I_UnitStatus a2u6 missiles_reloading\n\tinc_counter ob_under_fire -1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 6\n\tif I_IsUnitUnderFire a2u7\n\tinc_counter ob_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u7 fighting\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u7 pursuing\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u7 charging\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u7 missiles_firing\n\tinc_counter ob_under_fire -1\n\tend_if\n\tif I_UnitStatus a2u7 missiles_reloading\n\tinc_counter ob_under_fire -1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 7\n\tif I_IsUnitUnderFire a2u8\n\tinc_counter ob_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u8 fighting\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u8 pursuing\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u8 charging\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u8 missiles_firing\n\tinc_counter ob_under_fire -1\n\tend_if\n\tif I_UnitStatus a2u8 missiles_reloading\n\tinc_counter ob_under_fire -1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 8\n\tif I_IsUnitUnderFire a2u9\n\tinc_counter ob_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u9 fighting\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u9 pursuing\n\tinc_counter ob_engaged 1\n" +
                    "\tend_if\n\tif I_UnitStatus a2u9 charging\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u9 missiles_firing\n\tinc_counter ob_under_fire -1\n\tend_if\n\tif I_UnitStatus a2u9 missiles_reloading\n\tinc_counter ob_under_fire -1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 9\n\tif I_IsUnitUnderFire a2u10\n\tinc_counter ob_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u10 fighting\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u10 pursuing\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u10 charging\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u10 missiles_firing\n\tinc_counter ob_under_fire -1\n\tend_if\n\tif I_UnitStatus a2u10 missiles_reloading\n\tinc_counter ob_under_fire -1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 10\n\tif I_IsUnitUnderFire a2u11\n\tinc_counter ob_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u11 fighting\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u11 pursuing\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u11 charging\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u11 missiles_firing\n\tinc_counter ob_under_fire -1\n\tend_if\n\tif I_UnitStatus a2u11 missiles_reloading\n\tinc_counter ob_under_fire -1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 11\n\tif I_IsUnitUnderFire a2u12\n\tinc_counter ob_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u12 fighting\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u12 pursuing\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u12 charging\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u12 missiles_firing\n\tinc_counter ob_under_fire -1\n\tend_if\n\tif I_UnitStatus a2u12 missiles_reloading\n\tinc_counter ob_under_fire -1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 12\n\tif I_IsUnitUnderFire a2u13\n\tinc_counter ob_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u13 fighting\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u13 pursuing\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u13 charging\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u13 missiles_firing\n\tinc_counter ob_under_fire -1\n\tend_if\n\tif I_UnitStatus a2u13 missiles_reloading\n\tinc_counter ob_under_fire -1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 13\n\tif I_IsUnitUnderFire a2u14\n\tinc_counter ob_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u14 fighting\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u14 pursuing\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u14 charging\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u14 missiles_firing\n\tinc_counter ob_under_fire -1\n\tend_if\n\tif I_UnitStatus a2u14 missiles_reloading\n\tinc_counter ob_under_fire -1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 14\n\tif I_IsUnitUnderFire a2u15\n\tinc_counter ob_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u15 fighting\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u15 pursuing\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u15 charging\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u15 missiles_firing\n\tinc_counter ob_under_fire -1\n\tend_if\n\tif I_UnitStatus a2u15 missiles_reloading\n\tinc_counter ob_under_fire -1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 15\n\tif I_IsUnitUnderFire a2u16\n\tinc_counter ob_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u16 fighting\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u16 pursuing\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u16 charging\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u16 missiles_firing\n\tinc_counter ob_under_fire -1\n\tend_if\n\tif I_UnitStatus a2u16 missiles_reloading\n\tinc_counter ob_under_fire -1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 16\n\tif I_IsUnitUnderFire a2u17\n\tinc_counter ob_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u17 fighting\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u17 pursuing\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u17 charging\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u17 missiles_firing\n\tinc_counter ob_under_fire -1\n\tend_if\n\tif I_UnitStatus a2u17 missiles_reloading\n\tinc_counter ob_under_fire -1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 17\n\tif I_IsUnitUnderFire a2u18\n\tinc_counter ob_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u18 fighting\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u18 pursuing\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u18 charging\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u18 missiles_firing\n\tinc_counter ob_under_fire -1\n\tend_if\n\tif I_UnitStatus a2u18 missiles_reloading\n\tinc_counter ob_under_fire -1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count > 18\n\tif I_IsUnitUnderFire a2u19\n\tinc_counter ob_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u19 fighting\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u19 pursuing\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u19 charging\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u19 missiles_firing\n\tinc_counter ob_under_fire -1\n\tend_if\n\tif I_UnitStatus a2u19 missiles_reloading\n\tinc_counter ob_under_fire -1\n\tend_if\n\n\tif I_CompareCounter enemy_unit_count = 20\n\tif I_IsUnitUnderFire a2u20\n\tinc_counter ob_under_fire 1\n\tend_if\n\tif I_UnitStatus a2u20 fighting\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u20 pursuing\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u20 charging\n\tinc_counter ob_engaged 1\n\tend_if\n\tif I_UnitStatus a2u20 missiles_firing\n\tinc_counter ob_under_fire -1\n\tend_if\n\tif I_UnitStatus a2u20 missiles_reloading\n\tinc_counter ob_under_fire -1\n\tend_if\n\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\tend_if\n\n\tif I_CompareCounter ob_under_fire < 1\n\tif I_CompareCounter ob_engaged > 0\n\n\tif I_CompareCounter ob_repeat_test = 3\n\tset_counter ob_repeat_test 4\n\tend_if\n\n\tif I_CompareCounter ob_repeat_test = 2\n\tset_counter ob_engaged 0\n\tset_counter ob_repeat_test 3\n\tend_if\n\n\tif I_CompareCounter ob_repeat_test = 1\n\tset_counter ob_engaged 0\n\tset_counter ob_under_fire 0\n\tset_counter ob_repeat_test 2\n\tend_if\n\n\tif I_CompareCounter ob_repeat_test = 0\n\tset_counter ob_engaged 0\n\tset_counter ob_under_fire 0\n\tset_counter ob_repeat_test 1\n\tend_if\n\tend_if\n\n\tif I_CompareCounter ob_engaged < 1\n\n\tif I_CompareCounter ob_repeat_test = 3\n\tset_counter ob_repeat_test 2\n\tset_counter ob_under_fire 0\n\tset_counter ob_engaged 0\n\tend_if\n\n\tif I_CompareCounter ob_repeat_test < 3\n\tset_counter ob_repeat_test 1\n\tset_counter ob_under_fire 0\n\tset_counter ob_engaged 0\n\tend_if\n\tend_if\n\n\tend_if\n\n\tif I_CompareCounter ob_under_fire > 0\n\tif I_CompareCounter ob_engaged > 0\n\n\tif I_CompareCounter ob_repeat_test = 3\n\tset_counter ob_repeat_test 4\n\tend_if\n\tif I_CompareCounter ob_repeat_test = 2\n\tset_counter ob_engaged 0\n\tset_counter ob_repeat_test 3\n\tend_if\n\tif I_CompareCounter ob_repeat_test < 2\n\tset_counter ob_under_fire 0\n\tset_counter ob_engaged 0\n\tset_counter ob_repeat_test 2\n\tend_if\n\tend_if\n\n\tif I_CompareCounter ob_engaged < 1\n\n\tif I_CompareCounter ob_repeat_test = 3\n\tset_counter ob_repeat_test 4\n\tend_if\n\n\tif I_CompareCounter ob_repeat_test = 2\n\tset_counter ob_repeat_test 3\n\tend_if\n\tif I_CompareCounter ob_repeat_test = 1\n\tset_counter ob_under_fire 0\n\tset_counter ob_repeat_test 2\n\tend_if\n\n\tif I_CompareCounter ob_repeat_test = 0\n" +
                    "\tset_counter ob_under_fire 0\n\tset_counter ob_repeat_test 1\n\tend_if\n\tend_if\n\n\tend_if\n\tif I_CompareCounter ob_repeat_test = 4\n\tif I_CompareCounter ob_under_fire < 1\n\tand I_CompareCounter ob_engaged < 1\n\t\tset_counter ob_under_fire 0\n\t\tset_counter ob_engaged 0\n\t\tset_counter ob_defend 3\n\t\tset_counter ob_repeat_test 2\n\tend_if\n\tif I_CompareCounter ob_under_fire > 0\n\n\t\tai_gta_plan_set 1 ATTACK_ALL\n\t\tset_counter apply_strategy 1\n\t\tset_counter ob_under_fire 0\n\t\tset_counter ob_engaged 0\n\t\tset_counter ob_defend 4\n\t\tset_counter ob_repeat_test 0\n\t\tset_counter ob_defense_launch 0\n\tend_if\n\tif I_CompareCounter ob_engaged > 0\n\n\t\tai_gta_plan_set 1 ATTACK_ALL\n\t\tset_counter apply_strategy 1\n\t\tset_counter ob_under_fire 0\n\t\tset_counter ob_engaged 0\n\t\tset_counter ob_defend 4\n\t\tset_counter ob_repeat_test 0\n\t\tset_counter ob_defense_launch 0\n\tend_if\n\n\tend_if\n\n\t\tif I_CompareCounter ob_defend = 3\n\t\tset_counter ob_defend 2\n\t\tend_if\n\t\tbattle_wait 15\nend_monitor\n\n;;;;;;;General Stop\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter g_stop = 1\n\tand I_CompareCounter open_battle = 1\n\tand I_BattleEnemyArmyNumberOfUnits > 2\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_BattleAiAttacking\n\tand I_UnitEnemyUnitInRadius a2u1 120\n\n\tset_counter g_stop 2\n\tlabel_unit 1 0 0 a2u1\n\tbattle_wait 0.1\n\tunit_order_halt a2u1\n\tif I_BattleEnemyArmyNumberOfUnits > 5\n\tbattle_wait 30\n\tend_if\n\tif I_BattleEnemyArmyNumberOfUnits < 6\n\tbattle_wait 15\n\tend_if\n\tif I_BattlePlayerArmyIsAttacker\n\tand I_CompareCounter g_stop = 2\n\tand I_BattleAiAttacking\n\trelease_unit a2u1\n\tset_counter g_stop 0\n\tend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter g_stop = 1\n\tand I_CompareCounter open_battle = 1\n\tand ! I_BattlePlayerArmyIsAttacker\n\tand I_BattleAiAttacking\n\tand I_UnitEnemyUnitInRadius a1u1 120\n\n\tset_counter g_stop 3\n\tlabel_unit 0 0 0 a1u1\n\tbattle_wait 0.1\n\tunit_order_halt a1u1\n\tbattle_wait 30\n\tif ! I_BattlePlayerArmyIsAttacker\n\tand I_CompareCounter g_stop = 3\n\tand I_BattleAiAttacking\n\trelease_unit a1u1\n\tset_counter g_stop 0\n\tend_if\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter g_stop = 2\n\tand I_CompareCounter open_battle = 1\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_UnitEnemyUnitInRadius a2u1 60\n\n\trelease_unit a2u1\n\tset_counter g_stop 0\nend_monitor\n\nmonitor_conditions I_BattleStarted\n\tand I_CompareCounter g_stop = 3\n\tand I_CompareCounter open_battle = 1\n\tand I_BattlePlayerArmyIsAttacker\n\tand I_UnitEnemyUnitInRadius a1u1 60\n\n\trelease_unit a1u1\n\tset_counter g_stop 0\nend_monitor\n\n;;;;;;;AI Stuck Fix\n\nmonitor_event BattleEnemyUnitAttacksPlayerUnit TrueCondition\n\tand I_CompareCounter ai_stuck_launch = 1\n\tand BattleIsMeleeAttack\n\tand I_BattleIsSiegeBattle\n\tset_counter ai_stuck_launch 2\nend_monitor\n\nmonitor_conditions I_CompareCounter ai_stuck_launch = 2\n\tand I_BattleIsSiegeBattle\n\nif I_CompareCounter enemy_unit_count > 0\nand ! I_UnitDestroyed a2u1\n\n\tif I_UnitStatus a2u1 moving\n\tif I_CompareCounter a2u1_status = 0\n\tset_counter a2u1_status 1\n\tend_if\n\tif I_CompareCounter a2u1_status != 1\n\tset_counter a2u1_status 0\n\tend_if\n\tend_if\n\n\tif I_UnitStatus a2u1 routing\n\tif I_CompareCounter a2u1_status = 0\n\tset_counter a2u1_status 2\n\tend_if\n\tif I_CompareCounter a2u1_status != 2\n\tset_counter a2u1_status 0\n\tend_if\n\tend_if\n\n\tif ! I_UnitStatus a2u1 moving\n\tand ! I_UnitStatus a2u1 routing\n\tset_counter a2u1_status 0\n\tend_if\n\n\tif I_CompareCounter a2u1_status > 0\n\n\tif I_UnitDistanceFromPosition a2u1 0,0 >= 150\n\tand I_UnitDistanceFromPosition a2u1 0,0 < 175\n\tif I_CompareCounter a2u1_distance != 1\n\tset_counter a2u1_stuck 0\n\tend_if\n\tset_counter a2u1_distance 1\n\tinc_counter a2u1_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u1 0,0 >= 175\n\tand I_UnitDistanceFromPosition a2u1 0,0 < 200\n\tif I_CompareCounter a2u1_distance != 2\n\tset_counter a2u1_stuck 0\n\tend_if\n\tset_counter a2u1_distance 2\n\tinc_counter a2u1_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u1 0,0 >= 200\n\tand I_UnitDistanceFromPosition a2u1 0,0 < 225\n\tif I_CompareCounter a2u1_distance != 3\n\tset_counter a2u1_stuck 0\n\tend_if\n\tset_counter a2u1_distance 3\n\tinc_counter a2u1_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u1 0,0 >= 225\n\tand I_UnitDistanceFromPosition a2u1 0,0 < 250\n\tif I_CompareCounter a2u1_distance != 4\n\tset_counter a2u1_stuck 0\n\tend_if\n\tset_counter a2u1_distance 4\n\tinc_counter a2u1_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u1 0,0 >= 250\n\tand I_UnitDistanceFromPosition a2u1 0,0 < 275\n\tif I_CompareCounter a2u1_distance != 5\n\tset_counter a2u1_stuck 0\n\tend_if\n\tset_counter a2u1_distance 5\n\tinc_counter a2u1_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u1 0,0 >= 275\n\tand I_UnitDistanceFromPosition a2u1 0,0 < 300\n\tif I_CompareCounter a2u1_distance != 6\n\tset_counter a2u1_stuck 0\n\tend_if\n\tset_counter a2u1_distance 6\n\tinc_counter a2u1_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u1 0,0 >= 300\n\tand I_UnitDistanceFromPosition a2u1 0,0 < 325\n\tif I_CompareCounter a2u1_distance != 7\n\tset_counter a2u1_stuck 0\n\tend_if\n" +
                    "\tset_counter a2u1_distance 7\n\tinc_counter a2u1_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u1 0,0 >= 325\n\tand I_UnitDistanceFromPosition a2u1 0,0 < 350\n\tif I_CompareCounter a2u1_distance != 8\n\tset_counter a2u1_stuck 0\n\tend_if\n\tset_counter a2u1_distance 8\n\tinc_counter a2u1_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u1 0,0 >= 350\n\tand I_UnitDistanceFromPosition a2u1 0,0 < 375\n\tif I_CompareCounter a2u1_distance != 9\n\tset_counter a2u1_stuck 0\n\tend_if\n\tset_counter a2u1_distance 9\n\tinc_counter a2u1_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u1 0,0 >= 375\n\tand I_UnitDistanceFromPosition a2u1 0,0 < 400\n\tif I_CompareCounter a2u1_distance != 10\n\tset_counter a2u1_stuck 0\n\tend_if\n\tset_counter a2u1_distance 10\n\tinc_counter a2u1_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u1 0,0 >= 400\n\tand I_UnitDistanceFromPosition a2u1 0,0 < 425\n\tif I_CompareCounter a2u1_distance != 11\n\tset_counter a2u1_stuck 0\n\tend_if\n\tset_counter a2u1_distance 11\n\tinc_counter a2u1_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u1 0,0 >= 425\n\tand I_UnitDistanceFromPosition a2u1 0,0 < 450\n\tif I_CompareCounter a2u1_distance != 12\n\tset_counter a2u1_stuck 0\n\tend_if\n\tset_counter a2u1_distance 12\n\tinc_counter a2u1_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u1 0,0 >= 450\n\tand I_UnitDistanceFromPosition a2u1 0,0 < 500\n\tif I_CompareCounter a2u1_distance != 13\n\tset_counter a2u1_stuck 0\n\tend_if\n\tset_counter a2u1_distance 13\n\tinc_counter a2u1_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u1 0,0 >= 500\n\tand I_UnitDistanceFromPosition a2u1 0,0 < 550\n\tif I_CompareCounter a2u1_distance != 14\n\tset_counter a2u1_stuck 0\n\tend_if\n\tset_counter a2u1_distance 14\n\tinc_counter a2u1_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u1 0,0 >= 550\n\tand I_UnitDistanceFromPosition a2u1 0,0 < 600\n\tif I_CompareCounter a2u1_distance != 15\n\tset_counter a2u1_stuck 0\n\tend_if\n\tset_counter a2u1_distance 15\n\tinc_counter a2u1_stuck 1\n\tend_if\n\n\tif I_CompareCounter a2u1_stuck = 4\n\tunit_order_halt a2u1\n\tunit_set_morale a2u1 wavering\n\tbattle_wait 0.1\n\tunit_unset_morale a2u1\n\trelease_unit a2u1\n\tset_counter a2u1_stuck 0\n\tend_if\n\n\tend_if\nend_if\n\nif I_CompareCounter enemy_unit_count > 1\nand ! I_UnitDestroyed a2u2\n\n\tif I_UnitStatus a2u2 moving\n\tif I_CompareCounter a2u2_status = 0\n\tset_counter a2u2_status 1\n\tend_if\n\tif I_CompareCounter a2u2_status != 1\n\tset_counter a2u2_status 0\n\tend_if\n\tend_if\n\n\tif I_UnitStatus a2u2 routing\n\tif I_CompareCounter a2u2_status = 0\n\tset_counter a2u2_status 2\n\tend_if\n\tif I_CompareCounter a2u2_status != 2\n\tset_counter a2u2_status 0\n\tend_if\n\tend_if\n\n\tif ! I_UnitStatus a2u2 moving\n\tand ! I_UnitStatus a2u2 routing\n\tset_counter a2u2_status 0\n\tend_if\n\n\tif I_CompareCounter a2u2_status > 0\n\n\tif I_UnitDistanceFromPosition a2u2 0,0 >= 150\n\tand I_UnitDistanceFromPosition a2u2 0,0 < 175\n\tif I_CompareCounter a2u2_distance != 1\n\tset_counter a2u2_stuck 0\n\tend_if\n\tset_counter a2u2_distance 1\n\tinc_counter a2u2_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u2 0,0 >= 175\n\tand I_UnitDistanceFromPosition a2u2 0,0 < 200\n\tif I_CompareCounter a2u2_distance != 2\n\tset_counter a2u2_stuck 0\n\tend_if\n\tset_counter a2u2_distance 2\n\tinc_counter a2u2_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u2 0,0 >= 200\n\tand I_UnitDistanceFromPosition a2u2 0,0 < 225\n\tif I_CompareCounter a2u2_distance != 3\n\tset_counter a2u2_stuck 0\n\tend_if\n\tset_counter a2u2_distance 3\n\tinc_counter a2u2_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u2 0,0 >= 225\n\tand I_UnitDistanceFromPosition a2u2 0,0 < 250\n\tif I_CompareCounter a2u2_distance != 4\n\tset_counter a2u2_stuck 0\n\tend_if\n\tset_counter a2u2_distance 4\n\tinc_counter a2u2_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u2 0,0 >= 250\n\tand I_UnitDistanceFromPosition a2u2 0,0 < 275\n\tif I_CompareCounter a2u2_distance != 5\n\tset_counter a2u2_stuck 0\n\tend_if\n\tset_counter a2u2_distance 5\n\tinc_counter a2u2_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u2 0,0 >= 275\n\tand I_UnitDistanceFromPosition a2u2 0,0 < 300\n\tif I_CompareCounter a2u2_distance != 6\n\tset_counter a2u2_stuck 0\n\tend_if\n\tset_counter a2u2_distance 6\n\tinc_counter a2u2_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u2 0,0 >= 300\n\tand I_UnitDistanceFromPosition a2u2 0,0 < 325\n\tif I_CompareCounter a2u2_distance != 7\n\tset_counter a2u2_stuck 0\n\tend_if\n\tset_counter a2u2_distance 7\n\tinc_counter a2u2_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u2 0,0 >= 325\n\tand I_UnitDistanceFromPosition a2u2 0,0 < 350\n\tif I_CompareCounter a2u2_distance != 8\n\tset_counter a2u2_stuck 0\n\tend_if\n\tset_counter a2u2_distance 8\n\tinc_counter a2u2_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u2 0,0 >= 350\n\tand I_UnitDistanceFromPosition a2u2 0,0 < 375\n\tif I_CompareCounter a2u2_distance != 9\n\tset_counter a2u2_stuck 0\n\tend_if\n\tset_counter a2u2_distance 9\n\tinc_counter a2u2_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u2 0,0 >= 375\n\tand I_UnitDistanceFromPosition a2u2 0,0 < 400\n\tif I_CompareCounter a2u2_distance != 10\n\tset_counter a2u2_stuck 0\n\tend_if\n\tset_counter a2u2_distance 10\n\tinc_counter a2u2_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u2 0,0 >= 400\n\tand I_UnitDistanceFromPosition a2u2 0,0 < 425\n\tif I_CompareCounter a2u2_distance != 11\n\tset_counter a2u2_stuck 0\n\tend_if\n\tset_counter a2u2_distance 11\n\tinc_counter a2u2_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u2 0,0 >= 425\n\tand I_UnitDistanceFromPosition a2u2 0,0 < 450\n\tif I_CompareCounter a2u2_distance != 12\n\tset_counter a2u2_stuck 0\n\tend_if\n\tset_counter a2u2_distance 12\n\tinc_counter a2u2_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u2 0,0 >= 450\n\tand I_UnitDistanceFromPosition a2u2 0,0 < 500\n\tif I_CompareCounter a2u2_distance != 13\n\tset_counter a2u2_stuck 0\n\tend_if\n\tset_counter a2u2_distance 13\n\tinc_counter a2u2_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u2 0,0 >= 500\n\tand I_UnitDistanceFromPosition a2u2 0,0 < 550\n\tif I_CompareCounter a2u2_distance != 14\n\tset_counter a2u2_stuck 0\n\tend_if\n\tset_counter a2u2_distance 14\n\tinc_counter a2u2_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u2 0,0 >= 550\n\tand I_UnitDistanceFromPosition a2u2 0,0 < 600\n\tif I_CompareCounter a2u2_distance != 15\n\tset_counter a2u2_stuck 0\n\tend_if\n\tset_counter a2u2_distance 15\n\tinc_counter a2u2_stuck 1\n\tend_if\n\n\tif I_CompareCounter a2u2_stuck = 4\n\tunit_order_halt a2u2\n\tunit_set_morale a2u2 wavering\n\tbattle_wait 0.1\n\tunit_unset_morale a2u2\n\trelease_unit a2u2\n\tset_counter a2u2_stuck 0\n\tend_if\n\n\tend_if\nend_if\n\nif I_CompareCounter enemy_unit_count > 2\nand ! I_UnitDestroyed a2u3\n\n\tif I_UnitStatus a2u3 moving\n\tif I_CompareCounter a2u3_status = 0\n\tset_counter a2u3_status 1\n\tend_if\n\tif I_CompareCounter a2u3_status != 1\n\tset_counter a2u3_status 0\n\tend_if\n\tend_if\n\n\tif I_UnitStatus a2u3 routing\n\tif I_CompareCounter a2u3_status = 0\n\tset_counter a2u3_status 2\n\tend_if\n\tif I_CompareCounter a2u3_status != 2\n\tset_counter a2u3_status 0\n\tend_if\n\tend_if\n\n\tif ! I_UnitStatus a2u3 moving\n\tand ! I_UnitStatus a2u3 routing\n\tset_counter a2u3_status 0\n\tend_if\n\n\tif I_CompareCounter a2u3_status > 0\n\n\tif I_UnitDistanceFromPosition a2u3 0,0 >= 150\n\tand I_UnitDistanceFromPosition a2u3 0,0 < 175\n\tif I_CompareCounter a2u3_distance != 1\n\tset_counter a2u3_stuck 0\n\tend_if\n\tset_counter a2u3_distance 1\n\tinc_counter a2u3_stuck 1\n\tend_if\n\n" +
                    "\tif I_UnitDistanceFromPosition a2u3 0,0 >= 175\n\tand I_UnitDistanceFromPosition a2u3 0,0 < 200\n\tif I_CompareCounter a2u3_distance != 2\n\tset_counter a2u3_stuck 0\n\tend_if\n\tset_counter a2u3_distance 2\n\tinc_counter a2u3_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u3 0,0 >= 200\n\tand I_UnitDistanceFromPosition a2u3 0,0 < 225\n\tif I_CompareCounter a2u3_distance != 3\n\tset_counter a2u3_stuck 0\n\tend_if\n\tset_counter a2u3_distance 3\n\tinc_counter a2u3_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u3 0,0 >= 225\n\tand I_UnitDistanceFromPosition a2u3 0,0 < 250\n\tif I_CompareCounter a2u3_distance != 4\n\tset_counter a2u3_stuck 0\n\tend_if\n\tset_counter a2u3_distance 4\n\tinc_counter a2u3_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u3 0,0 >= 250\n\tand I_UnitDistanceFromPosition a2u3 0,0 < 275\n\tif I_CompareCounter a2u3_distance != 5\n\tset_counter a2u3_stuck 0\n\tend_if\n\tset_counter a2u3_distance 5\n\tinc_counter a2u3_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u3 0,0 >= 275\n\tand I_UnitDistanceFromPosition a2u3 0,0 < 300\n\tif I_CompareCounter a2u3_distance != 6\n\tset_counter a2u3_stuck 0\n\tend_if\n\tset_counter a2u3_distance 6\n\tinc_counter a2u3_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u3 0,0 >= 300\n\tand I_UnitDistanceFromPosition a2u3 0,0 < 325\n\tif I_CompareCounter a2u3_distance != 7\n\tset_counter a2u3_stuck 0\n\tend_if\n\tset_counter a2u3_distance 7\n\tinc_counter a2u3_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u3 0,0 >= 325\n\tand I_UnitDistanceFromPosition a2u3 0,0 < 350\n\tif I_CompareCounter a2u3_distance != 8\n\tset_counter a2u3_stuck 0\n\tend_if\n\tset_counter a2u3_distance 8\n\tinc_counter a2u3_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u3 0,0 >= 350\n\tand I_UnitDistanceFromPosition a2u3 0,0 < 375\n\tif I_CompareCounter a2u3_distance != 9\n\tset_counter a2u3_stuck 0\n\tend_if\n\tset_counter a2u3_distance 9\n\tinc_counter a2u3_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u3 0,0 >= 375\n\tand I_UnitDistanceFromPosition a2u3 0,0 < 400\n\tif I_CompareCounter a2u3_distance != 10\n\tset_counter a2u3_stuck 0\n\tend_if\n\tset_counter a2u3_distance 10\n\tinc_counter a2u3_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u3 0,0 >= 400\n\tand I_UnitDistanceFromPosition a2u3 0,0 < 425\n\tif I_CompareCounter a2u3_distance != 11\n\tset_counter a2u3_stuck 0\n\tend_if\n\tset_counter a2u3_distance 11\n\tinc_counter a2u3_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u3 0,0 >= 425\n\tand I_UnitDistanceFromPosition a2u3 0,0 < 450\n\tif I_CompareCounter a2u3_distance != 12\n\tset_counter a2u3_stuck 0\n\tend_if\n\tset_counter a2u3_distance 12\n\tinc_counter a2u3_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u3 0,0 >= 450\n\tand I_UnitDistanceFromPosition a2u3 0,0 < 500\n\tif I_CompareCounter a2u3_distance != 13\n\tset_counter a2u3_stuck 0\n\tend_if\n\tset_counter a2u3_distance 13\n\tinc_counter a2u3_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u3 0,0 >= 500\n\tand I_UnitDistanceFromPosition a2u3 0,0 < 550\n\tif I_CompareCounter a2u3_distance != 14\n\tset_counter a2u3_stuck 0\n\tend_if\n\tset_counter a2u3_distance 14\n\tinc_counter a2u3_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u3 0,0 >= 550\n\tand I_UnitDistanceFromPosition a2u3 0,0 < 600\n\tif I_CompareCounter a2u3_distance != 15\n\tset_counter a2u3_stuck 0\n\tend_if\n\tset_counter a2u3_distance 15\n\tinc_counter a2u3_stuck 1\n\tend_if\n\n\tif I_CompareCounter a2u3_stuck = 4\n\tunit_order_halt a2u3\n\tunit_set_morale a2u3 wavering\n\tbattle_wait 0.1\n\tunit_unset_morale a2u3\n\trelease_unit a2u3\n\tset_counter a2u3_stuck 0\n\tend_if\n\n\tend_if\nend_if\n\nif I_CompareCounter enemy_unit_count > 3\nand ! I_UnitDestroyed a2u4\n\n\tif I_UnitStatus a2u4 moving\n\tif I_CompareCounter a2u4_status = 0\n\tset_counter a2u4_status 1\n\tend_if\n\tif I_CompareCounter a2u4_status != 1\n\tset_counter a2u4_status 0\n\tend_if\n\tend_if\n\n\tif I_UnitStatus a2u4 routing\n\tif I_CompareCounter a2u4_status = 0\n\tset_counter a2u4_status 2\n\tend_if\n\tif I_CompareCounter a2u4_status != 2\n\tset_counter a2u4_status 0\n\tend_if\n\tend_if\n\n\tif ! I_UnitStatus a2u4 moving\n\tand ! I_UnitStatus a2u4 routing\n\tset_counter a2u4_status 0\n\tend_if\n\n\tif I_CompareCounter a2u4_status > 0\n\n\tif I_UnitDistanceFromPosition a2u4 0,0 >= 150\n\tand I_UnitDistanceFromPosition a2u4 0,0 < 175\n\tif I_CompareCounter a2u4_distance != 1\n\tset_counter a2u4_stuck 0\n\tend_if\n\tset_counter a2u4_distance 1\n\tinc_counter a2u4_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u4 0,0 >= 175\n\tand I_UnitDistanceFromPosition a2u4 0,0 < 200\n\tif I_CompareCounter a2u4_distance != 2\n\tset_counter a2u4_stuck 0\n\tend_if\n\tset_counter a2u4_distance 2\n\tinc_counter a2u4_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u4 0,0 >= 200\n\tand I_UnitDistanceFromPosition a2u4 0,0 < 225\n\tif I_CompareCounter a2u4_distance != 3\n\tset_counter a2u4_stuck 0\n\tend_if\n\tset_counter a2u4_distance 3\n\tinc_counter a2u4_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u4 0,0 >= 225\n\tand I_UnitDistanceFromPosition a2u4 0,0 < 250\n\tif I_CompareCounter a2u4_distance != 4\n\tset_counter a2u4_stuck 0\n\tend_if\n\tset_counter a2u4_distance 4\n\tinc_counter a2u4_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u4 0,0 >= 250\n\tand I_UnitDistanceFromPosition a2u4 0,0 < 275\n\tif I_CompareCounter a2u4_distance != 5\n\tset_counter a2u4_stuck 0\n\tend_if\n\tset_counter a2u4_distance 5\n\tinc_counter a2u4_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u4 0,0 >= 275\n\tand I_UnitDistanceFromPosition a2u4 0,0 < 300\n\tif I_CompareCounter a2u4_distance != 6\n\tset_counter a2u4_stuck 0\n\tend_if\n\tset_counter a2u4_distance 6\n\tinc_counter a2u4_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u4 0,0 >= 300\n\tand I_UnitDistanceFromPosition a2u4 0,0 < 325\n\tif I_CompareCounter a2u4_distance != 7\n\tset_counter a2u4_stuck 0\n\tend_if\n\tset_counter a2u4_distance 7\n\tinc_counter a2u4_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u4 0,0 >= 325\n\tand I_UnitDistanceFromPosition a2u4 0,0 < 350\n\tif I_CompareCounter a2u4_distance != 8\n\tset_counter a2u4_stuck 0\n\tend_if\n\tset_counter a2u4_distance 8\n\tinc_counter a2u4_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u4 0,0 >= 350\n\tand I_UnitDistanceFromPosition a2u4 0,0 < 375\n\tif I_CompareCounter a2u4_distance != 9\n\tset_counter a2u4_stuck 0\n\tend_if\n\tset_counter a2u4_distance 9\n" +
                    "\tinc_counter a2u4_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u4 0,0 >= 375\n\tand I_UnitDistanceFromPosition a2u4 0,0 < 400\n\tif I_CompareCounter a2u4_distance != 10\n\tset_counter a2u4_stuck 0\n\tend_if\n\tset_counter a2u4_distance 10\n\tinc_counter a2u4_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u4 0,0 >= 400\n\tand I_UnitDistanceFromPosition a2u4 0,0 < 425\n\tif I_CompareCounter a2u4_distance != 11\n\tset_counter a2u4_stuck 0\n\tend_if\n\tset_counter a2u4_distance 11\n\tinc_counter a2u4_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u4 0,0 >= 425\n\tand I_UnitDistanceFromPosition a2u4 0,0 < 450\n\tif I_CompareCounter a2u4_distance != 12\n\tset_counter a2u4_stuck 0\n\tend_if\n\tset_counter a2u4_distance 12\n\tinc_counter a2u4_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u4 0,0 >= 450\n\tand I_UnitDistanceFromPosition a2u4 0,0 < 500\n\tif I_CompareCounter a2u4_distance != 13\n\tset_counter a2u4_stuck 0\n\tend_if\n\tset_counter a2u4_distance 13\n\tinc_counter a2u4_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u4 0,0 >= 500\n\tand I_UnitDistanceFromPosition a2u4 0,0 < 550\n\tif I_CompareCounter a2u4_distance != 14\n\tset_counter a2u4_stuck 0\n\tend_if\n\tset_counter a2u4_distance 14\n\tinc_counter a2u4_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u4 0,0 >= 550\n\tand I_UnitDistanceFromPosition a2u4 0,0 < 600\n\tif I_CompareCounter a2u4_distance != 15\n\tset_counter a2u4_stuck 0\n\tend_if\n\tset_counter a2u4_distance 15\n\tinc_counter a2u4_stuck 1\n\tend_if\n\n\tif I_CompareCounter a2u4_stuck = 4\n\tunit_order_halt a2u4\n\tunit_set_morale a2u4 wavering\n\tbattle_wait 0.1\n\tunit_unset_morale a2u4\n\trelease_unit a2u4\n\tset_counter a2u4_stuck 0\n\tend_if\n\n\tend_if\nend_if\n\nif I_CompareCounter enemy_unit_count > 4\nand ! I_UnitDestroyed a2u5\n\n\tif I_UnitStatus a2u5 moving\n\tif I_CompareCounter a2u5_status = 0\n\tset_counter a2u5_status 1\n\tend_if\n\tif I_CompareCounter a2u5_status != 1\n\tset_counter a2u5_status 0\n\tend_if\n\tend_if\n\n\tif I_UnitStatus a2u5 routing\n\tif I_CompareCounter a2u5_status = 0\n\tset_counter a2u5_status 2\n\tend_if\n\tif I_CompareCounter a2u5_status != 2\n\tset_counter a2u5_status 0\n\tend_if\n\tend_if\n\n\tif ! I_UnitStatus a2u5 moving\n\tand ! I_UnitStatus a2u5 routing\n\tset_counter a2u5_status 0\n\tend_if\n\n\tif I_CompareCounter a2u5_status > 0\n\n\tif I_UnitDistanceFromPosition a2u5 0,0 >= 150\n\tand I_UnitDistanceFromPosition a2u5 0,0 < 175\n\tif I_CompareCounter a2u5_distance != 1\n\tset_counter a2u5_stuck 0\n\tend_if\n\tset_counter a2u5_distance 1\n\tinc_counter a2u5_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u5 0,0 >= 175\n\tand I_UnitDistanceFromPosition a2u5 0,0 < 200\n\tif I_CompareCounter a2u5_distance != 2\n\tset_counter a2u5_stuck 0\n\tend_if\n\tset_counter a2u5_distance 2\n\tinc_counter a2u5_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u5 0,0 >= 200\n\tand I_UnitDistanceFromPosition a2u5 0,0 < 225\n\tif I_CompareCounter a2u5_distance != 3\n\tset_counter a2u5_stuck 0\n\tend_if\n\tset_counter a2u5_distance 3\n\tinc_counter a2u5_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u5 0,0 >= 225\n\tand I_UnitDistanceFromPosition a2u5 0,0 < 250\n\tif I_CompareCounter a2u5_distance != 4\n\tset_counter a2u5_stuck 0\n\tend_if\n\tset_counter a2u5_distance 4\n\tinc_counter a2u5_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u5 0,0 >= 250\n\tand I_UnitDistanceFromPosition a2u5 0,0 < 275\n\tif I_CompareCounter a2u5_distance != 5\n\tset_counter a2u5_stuck 0\n\tend_if\n\tset_counter a2u5_distance 5\n\tinc_counter a2u5_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u5 0,0 >= 275\n\tand I_UnitDistanceFromPosition a2u5 0,0 < 300\n\tif I_CompareCounter a2u5_distance != 6\n\tset_counter a2u5_stuck 0\n\tend_if\n\tset_counter a2u5_distance 6\n\tinc_counter a2u5_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u5 0,0 >= 300\n\tand I_UnitDistanceFromPosition a2u5 0,0 < 325\n\tif I_CompareCounter a2u5_distance != 7\n\tset_counter a2u5_stuck 0\n\tend_if\n\tset_counter a2u5_distance 7\n\tinc_counter a2u5_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u5 0,0 >= 325\n\tand I_UnitDistanceFromPosition a2u5 0,0 < 350\n\tif I_CompareCounter a2u5_distance != 8\n\tset_counter a2u5_stuck 0\n\tend_if\n\tset_counter a2u5_distance 8\n\tinc_counter a2u5_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u5 0,0 >= 350\n\tand I_UnitDistanceFromPosition a2u5 0,0 < 375\n\tif I_CompareCounter a2u5_distance != 9\n\tset_counter a2u5_stuck 0\n\tend_if\n\tset_counter a2u5_distance 9\n\tinc_counter a2u5_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u5 0,0 >= 375\n\tand I_UnitDistanceFromPosition a2u5 0,0 < 400\n\tif I_CompareCounter a2u5_distance != 10\n\tset_counter a2u5_stuck 0\n\tend_if\n\tset_counter a2u5_distance 10\n\tinc_counter a2u5_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u5 0,0 >= 400\n\tand I_UnitDistanceFromPosition a2u5 0,0 < 425\n\tif I_CompareCounter a2u5_distance != 11\n\tset_counter a2u5_stuck 0\n\tend_if\n\tset_counter a2u5_distance 11\n\tinc_counter a2u5_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u5 0,0 >= 425\n\tand I_UnitDistanceFromPosition a2u5 0,0 < 450\n\tif I_CompareCounter a2u5_distance != 12\n\tset_counter a2u5_stuck 0\n\tend_if\n\tset_counter a2u5_distance 12\n\tinc_counter a2u5_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u5 0,0 >= 450\n\tand I_UnitDistanceFromPosition a2u5 0,0 < 500\n\tif I_CompareCounter a2u5_distance != 13\n\tset_counter a2u5_stuck 0\n\tend_if\n\tset_counter a2u5_distance 13\n\tinc_counter a2u5_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u5 0,0 >= 500\n\tand I_UnitDistanceFromPosition a2u5 0,0 < 550\n\tif I_CompareCounter a2u5_distance != 14\n\tset_counter a2u5_stuck 0\n\tend_if\n\tset_counter a2u5_distance 14\n\tinc_counter a2u5_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u5 0,0 >= 550\n\tand I_UnitDistanceFromPosition a2u5 0,0 < 600\n\tif I_CompareCounter a2u5_distance != 15\n\tset_counter a2u5_stuck 0\n\tend_if\n\tset_counter a2u5_distance 15\n\tinc_counter a2u5_stuck 1\n\tend_if\n\n\tif I_CompareCounter a2u5_stuck = 4\n\tunit_order_halt a2u5\n\tunit_set_morale a2u5 wavering\n\tbattle_wait 0.1\n\tunit_unset_morale a2u5\n\trelease_unit a2u5\n\tset_counter a2u5_stuck 0\n\tend_if\n\n\tend_if\nend_if\n\nif I_CompareCounter enemy_unit_count > 5\nand ! I_UnitDestroyed a2u6\n\n\tif I_UnitStatus a2u6 moving\n\tif I_CompareCounter a2u6_status = 0\n\tset_counter a2u6_status 1\n" +
                    "\tend_if\n\tif I_CompareCounter a2u6_status != 1\n\tset_counter a2u6_status 0\n\tend_if\n\tend_if\n\n\tif I_UnitStatus a2u6 routing\n\tif I_CompareCounter a2u6_status = 0\n\tset_counter a2u6_status 2\n\tend_if\n\tif I_CompareCounter a2u6_status != 2\n\tset_counter a2u6_status 0\n\tend_if\n\tend_if\n\n\tif ! I_UnitStatus a2u6 moving\n\tand ! I_UnitStatus a2u6 routing\n\tset_counter a2u6_status 0\n\tend_if\n\n\tif I_CompareCounter a2u6_status > 0\n\n\tif I_UnitDistanceFromPosition a2u6 0,0 >= 150\n\tand I_UnitDistanceFromPosition a2u6 0,0 < 175\n\tif I_CompareCounter a2u6_distance != 1\n\tset_counter a2u6_stuck 0\n\tend_if\n\tset_counter a2u6_distance 1\n\tinc_counter a2u6_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u6 0,0 >= 175\n\tand I_UnitDistanceFromPosition a2u6 0,0 < 200\n\tif I_CompareCounter a2u6_distance != 2\n\tset_counter a2u6_stuck 0\n\tend_if\n\tset_counter a2u6_distance 2\n\tinc_counter a2u6_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u6 0,0 >= 200\n\tand I_UnitDistanceFromPosition a2u6 0,0 < 225\n\tif I_CompareCounter a2u6_distance != 3\n\tset_counter a2u6_stuck 0\n\tend_if\n\tset_counter a2u6_distance 3\n\tinc_counter a2u6_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u6 0,0 >= 225\n\tand I_UnitDistanceFromPosition a2u6 0,0 < 250\n\tif I_CompareCounter a2u6_distance != 4\n\tset_counter a2u6_stuck 0\n\tend_if\n\tset_counter a2u6_distance 4\n\tinc_counter a2u6_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u6 0,0 >= 250\n\tand I_UnitDistanceFromPosition a2u6 0,0 < 275\n\tif I_CompareCounter a2u6_distance != 5\n\tset_counter a2u6_stuck 0\n\tend_if\n\tset_counter a2u6_distance 5\n\tinc_counter a2u6_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u6 0,0 >= 275\n\tand I_UnitDistanceFromPosition a2u6 0,0 < 300\n\tif I_CompareCounter a2u6_distance != 6\n\tset_counter a2u6_stuck 0\n\tend_if\n\tset_counter a2u6_distance 6\n\tinc_counter a2u6_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u6 0,0 >= 300\n\tand I_UnitDistanceFromPosition a2u6 0,0 < 325\n\tif I_CompareCounter a2u6_distance != 7\n\tset_counter a2u6_stuck 0\n\tend_if\n\tset_counter a2u6_distance 7\n\tinc_counter a2u6_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u6 0,0 >= 325\n\tand I_UnitDistanceFromPosition a2u6 0,0 < 350\n\tif I_CompareCounter a2u6_distance != 8\n\tset_counter a2u6_stuck 0\n\tend_if\n\tset_counter a2u6_distance 8\n\tinc_counter a2u6_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u6 0,0 >= 350\n\tand I_UnitDistanceFromPosition a2u6 0,0 < 375\n\tif I_CompareCounter a2u6_distance != 9\n\tset_counter a2u6_stuck 0\n\tend_if\n\tset_counter a2u6_distance 9\n\tinc_counter a2u6_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u6 0,0 >= 375\n\tand I_UnitDistanceFromPosition a2u6 0,0 < 400\n\tif I_CompareCounter a2u6_distance != 10\n\tset_counter a2u6_stuck 0\n\tend_if\n\tset_counter a2u6_distance 10\n\tinc_counter a2u6_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u6 0,0 >= 400\n\tand I_UnitDistanceFromPosition a2u6 0,0 < 425\n\tif I_CompareCounter a2u6_distance != 11\n\tset_counter a2u6_stuck 0\n\tend_if\n\tset_counter a2u6_distance 11\n\tinc_counter a2u6_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u6 0,0 >= 425\n\tand I_UnitDistanceFromPosition a2u6 0,0 < 450\n\tif I_CompareCounter a2u6_distance != 12\n\tset_counter a2u6_stuck 0\n\tend_if\n\tset_counter a2u6_distance 12\n\tinc_counter a2u6_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u6 0,0 >= 450\n\tand I_UnitDistanceFromPosition a2u6 0,0 < 500\n\tif I_CompareCounter a2u6_distance != 13\n\tset_counter a2u6_stuck 0\n\tend_if\n\tset_counter a2u6_distance 13\n\tinc_counter a2u6_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u6 0,0 >= 500\n\tand I_UnitDistanceFromPosition a2u6 0,0 < 550\n\tif I_CompareCounter a2u6_distance != 14\n\tset_counter a2u6_stuck 0\n\tend_if\n\tset_counter a2u6_distance 14\n\tinc_counter a2u6_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u6 0,0 >= 550\n\tand I_UnitDistanceFromPosition a2u6 0,0 < 600\n\tif I_CompareCounter a2u6_distance != 15\n\tset_counter a2u6_stuck 0\n\tend_if\n\tset_counter a2u6_distance 15\n\tinc_counter a2u6_stuck 1\n\tend_if\n\n\tif I_CompareCounter a2u6_stuck = 4\n\tunit_order_halt a2u6\n\tunit_set_morale a2u6 wavering\n\tbattle_wait 0.1\n\tunit_unset_morale a2u6\n\trelease_unit a2u6\n\tset_counter a2u6_stuck 0\n\tend_if\n\n\tend_if\nend_if\n\nif I_CompareCounter enemy_unit_count > 6\nand ! I_UnitDestroyed a2u7\n\n\tif I_UnitStatus a2u7 moving\n\tif I_CompareCounter a2u7_status = 0\n\tset_counter a2u7_status 1\n\tend_if\n\tif I_CompareCounter a2u7_status != 1\n\tset_counter a2u7_status 0\n\tend_if\n\tend_if\n\n\tif I_UnitStatus a2u7 routing\n\tif I_CompareCounter a2u7_status = 0\n\tset_counter a2u7_status 2\n\tend_if\n\tif I_CompareCounter a2u7_status != 2\n\tset_counter a2u7_status 0\n\tend_if\n\tend_if\n\n\tif ! I_UnitStatus a2u7 moving\n\tand ! I_UnitStatus a2u7 routing\n\tset_counter a2u7_status 0\n\tend_if\n\n\tif I_CompareCounter a2u7_status > 0\n\n\tif I_UnitDistanceFromPosition a2u7 0,0 >= 150\n\tand I_UnitDistanceFromPosition a2u7 0,0 < 175\n\tif I_CompareCounter a2u7_distance != 1\n\tset_counter a2u7_stuck 0\n\tend_if\n\tset_counter a2u7_distance 1\n\tinc_counter a2u7_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u7 0,0 >= 175\n\tand I_UnitDistanceFromPosition a2u7 0,0 < 200\n\tif I_CompareCounter a2u7_distance != 2\n\tset_counter a2u7_stuck 0\n\tend_if\n\tset_counter a2u7_distance 2\n\tinc_counter a2u7_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u7 0,0 >= 200\n\tand I_UnitDistanceFromPosition a2u7 0,0 < 225\n\tif I_CompareCounter a2u7_distance != 3\n\tset_counter a2u7_stuck 0\n\tend_if\n\tset_counter a2u7_distance 3\n\tinc_counter a2u7_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u7 0,0 >= 225\n\tand I_UnitDistanceFromPosition a2u7 0,0 < 250\n\tif I_CompareCounter a2u7_distance != 4\n\tset_counter a2u7_stuck 0\n\tend_if\n\tset_counter a2u7_distance 4\n\tinc_counter a2u7_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u7 0,0 >= 250\n\tand I_UnitDistanceFromPosition a2u7 0,0 < 275\n\tif I_CompareCounter a2u7_distance != 5\n\tset_counter a2u7_stuck 0\n\tend_if\n\tset_counter a2u7_distance 5\n\tinc_counter a2u7_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u7 0,0 >= 275\n\tand I_UnitDistanceFromPosition a2u7 0,0 < 300\n\tif I_CompareCounter a2u7_distance != 6\n\tset_counter a2u7_stuck 0\n\tend_if\n\tset_counter a2u7_distance 6\n\tinc_counter a2u7_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u7 0,0 >= 300\n\tand I_UnitDistanceFromPosition a2u7 0,0 < 325\n\tif I_CompareCounter a2u7_distance != 7\n\tset_counter a2u7_stuck 0\n\tend_if\n\tset_counter a2u7_distance 7\n\tinc_counter a2u7_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u7 0,0 >= 325\n\tand I_UnitDistanceFromPosition a2u7 0,0 < 350\n\tif I_CompareCounter a2u7_distance != 8\n\tset_counter a2u7_stuck 0\n\tend_if\n\tset_counter a2u7_distance 8\n\tinc_counter a2u7_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u7 0,0 >= 350\n\tand I_UnitDistanceFromPosition a2u7 0,0 < 375\n\tif I_CompareCounter a2u7_distance != 9\n\tset_counter a2u7_stuck 0\n\tend_if\n\tset_counter a2u7_distance 9\n\tinc_counter a2u7_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u7 0,0 >= 375\n\tand I_UnitDistanceFromPosition a2u7 0,0 < 400\n\tif I_CompareCounter a2u7_distance != 10\n\tset_counter a2u7_stuck 0\n\tend_if\n\tset_counter a2u7_distance 10\n\tinc_counter a2u7_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u7 0,0 >= 400\n\tand I_UnitDistanceFromPosition a2u7 0,0 < 425\n\tif I_CompareCounter a2u7_distance != 11\n\tset_counter a2u7_stuck 0\n\tend_if\n\tset_counter a2u7_distance 11\n\tinc_counter a2u7_stuck 1\n" +
                    "\tend_if\n\n\tif I_UnitDistanceFromPosition a2u7 0,0 >= 425\n\tand I_UnitDistanceFromPosition a2u7 0,0 < 450\n\tif I_CompareCounter a2u7_distance != 12\n\tset_counter a2u7_stuck 0\n\tend_if\n\tset_counter a2u7_distance 12\n\tinc_counter a2u7_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u7 0,0 >= 450\n\tand I_UnitDistanceFromPosition a2u7 0,0 < 500\n\tif I_CompareCounter a2u7_distance != 13\n\tset_counter a2u7_stuck 0\n\tend_if\n\tset_counter a2u7_distance 13\n\tinc_counter a2u7_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u7 0,0 >= 500\n\tand I_UnitDistanceFromPosition a2u7 0,0 < 550\n\tif I_CompareCounter a2u7_distance != 14\n\tset_counter a2u7_stuck 0\n\tend_if\n\tset_counter a2u7_distance 14\n\tinc_counter a2u7_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u7 0,0 >= 550\n\tand I_UnitDistanceFromPosition a2u7 0,0 < 600\n\tif I_CompareCounter a2u7_distance != 15\n\tset_counter a2u7_stuck 0\n\tend_if\n\tset_counter a2u7_distance 15\n\tinc_counter a2u7_stuck 1\n\tend_if\n\n\tif I_CompareCounter a2u7_stuck = 4\n\tunit_order_halt a2u7\n\tunit_set_morale a2u7 wavering\n\tbattle_wait 0.1\n\tunit_unset_morale a2u7\n\trelease_unit a2u7\n\tset_counter a2u7_stuck 0\n\tend_if\n\n\tend_if\nend_if\n\nif I_CompareCounter enemy_unit_count > 7\nand ! I_UnitDestroyed a2u8\n\n\tif I_UnitStatus a2u8 moving\n\tif I_CompareCounter a2u8_status = 0\n\tset_counter a2u8_status 1\n\tend_if\n\tif I_CompareCounter a2u8_status != 1\n\tset_counter a2u8_status 0\n\tend_if\n\tend_if\n\n\tif I_UnitStatus a2u8 routing\n\tif I_CompareCounter a2u8_status = 0\n\tset_counter a2u8_status 2\n\tend_if\n\tif I_CompareCounter a2u8_status != 2\n\tset_counter a2u8_status 0\n\tend_if\n\tend_if\n\n\tif ! I_UnitStatus a2u8 moving\n\tand ! I_UnitStatus a2u8 routing\n\tset_counter a2u8_status 0\n\tend_if\n\n\tif I_CompareCounter a2u8_status > 0\n\n\tif I_UnitDistanceFromPosition a2u8 0,0 >= 150\n\tand I_UnitDistanceFromPosition a2u8 0,0 < 175\n\tif I_CompareCounter a2u8_distance != 1\n\tset_counter a2u8_stuck 0\n\tend_if\n\tset_counter a2u8_distance 1\n\tinc_counter a2u8_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u8 0,0 >= 175\n\tand I_UnitDistanceFromPosition a2u8 0,0 < 200\n\tif I_CompareCounter a2u8_distance != 2\n\tset_counter a2u8_stuck 0\n\tend_if\n\tset_counter a2u8_distance 2\n\tinc_counter a2u8_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u8 0,0 >= 200\n\tand I_UnitDistanceFromPosition a2u8 0,0 < 225\n\tif I_CompareCounter a2u8_distance != 3\n\tset_counter a2u8_stuck 0\n\tend_if\n\tset_counter a2u8_distance 3\n\tinc_counter a2u8_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u8 0,0 >= 225\n\tand I_UnitDistanceFromPosition a2u8 0,0 < 250\n\tif I_CompareCounter a2u8_distance != 4\n\tset_counter a2u8_stuck 0\n\tend_if\n\tset_counter a2u8_distance 4\n\tinc_counter a2u8_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u8 0,0 >= 250\n\tand I_UnitDistanceFromPosition a2u8 0,0 < 275\n\tif I_CompareCounter a2u8_distance != 5\n\tset_counter a2u8_stuck 0\n\tend_if\n\tset_counter a2u8_distance 5\n\tinc_counter a2u8_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u8 0,0 >= 275\n\tand I_UnitDistanceFromPosition a2u8 0,0 < 300\n\tif I_CompareCounter a2u8_distance != 6\n\tset_counter a2u8_stuck 0\n\tend_if\n\tset_counter a2u8_distance 6\n\tinc_counter a2u8_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u8 0,0 >= 300\n\tand I_UnitDistanceFromPosition a2u8 0,0 < 325\n\tif I_CompareCounter a2u8_distance != 7\n\tset_counter a2u8_stuck 0\n\tend_if\n\tset_counter a2u8_distance 7\n\tinc_counter a2u8_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u8 0,0 >= 325\n\tand I_UnitDistanceFromPosition a2u8 0,0 < 350\n\tif I_CompareCounter a2u8_distance != 8\n\tset_counter a2u8_stuck 0\n\tend_if\n\tset_counter a2u8_distance 8\n\tinc_counter a2u8_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u8 0,0 >= 350\n\tand I_UnitDistanceFromPosition a2u8 0,0 < 375\n\tif I_CompareCounter a2u8_distance != 9\n\tset_counter a2u8_stuck 0\n\tend_if\n\tset_counter a2u8_distance 9\n\tinc_counter a2u8_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u8 0,0 >= 375\n\tand I_UnitDistanceFromPosition a2u8 0,0 < 400\n\tif I_CompareCounter a2u8_distance != 10\n\tset_counter a2u8_stuck 0\n\tend_if\n\tset_counter a2u8_distance 10\n\tinc_counter a2u8_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u8 0,0 >= 400\n\tand I_UnitDistanceFromPosition a2u8 0,0 < 425\n\tif I_CompareCounter a2u8_distance != 11\n\tset_counter a2u8_stuck 0\n\tend_if\n\tset_counter a2u8_distance 11\n\tinc_counter a2u8_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u8 0,0 >= 425\n\tand I_UnitDistanceFromPosition a2u8 0,0 < 450\n\tif I_CompareCounter a2u8_distance != 12\n\tset_counter a2u8_stuck 0\n\tend_if\n\tset_counter a2u8_distance 12\n\tinc_counter a2u8_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u8 0,0 >= 450\n\tand I_UnitDistanceFromPosition a2u8 0,0 < 500\n\tif I_CompareCounter a2u8_distance != 13\n\tset_counter a2u8_stuck 0\n\tend_if\n\tset_counter a2u8_distance 13\n\tinc_counter a2u8_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u8 0,0 >= 500\n\tand I_UnitDistanceFromPosition a2u8 0,0 < 550\n\tif I_CompareCounter a2u8_distance != 14\n\tset_counter a2u8_stuck 0\n\tend_if\n\tset_counter a2u8_distance 14\n\tinc_counter a2u8_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u8 0,0 >= 550\n\tand I_UnitDistanceFromPosition a2u8 0,0 < 600\n\tif I_CompareCounter a2u8_distance != 15\n\tset_counter a2u8_stuck 0\n\tend_if\n\tset_counter a2u8_distance 15\n\tinc_counter a2u8_stuck 1\n\tend_if\n\n\tif I_CompareCounter a2u8_stuck = 4\n\tunit_order_halt a2u8\n\tunit_set_morale a2u8 wavering\n\tbattle_wait 0.1\n\tunit_unset_morale a2u8\n\trelease_unit a2u8\n\tset_counter a2u8_stuck 0\n\tend_if\n\n\tend_if\nend_if\n\nif I_CompareCounter enemy_unit_count > 8\nand ! I_UnitDestroyed a2u9\n\n\tif I_UnitStatus a2u9 moving\n\tif I_CompareCounter a2u9_status = 0\n\tset_counter a2u9_status 1\n\tend_if\n\tif I_CompareCounter a2u9_status != 1\n\tset_counter a2u9_status 0\n\tend_if\n\tend_if\n\n\tif I_UnitStatus a2u9 routing\n\tif I_CompareCounter a2u9_status = 0\n\tset_counter a2u9_status 2\n\tend_if\n\tif I_CompareCounter a2u9_status != 2\n\tset_counter a2u9_status 0\n\tend_if\n\tend_if\n\n\tif ! I_UnitStatus a2u9 moving\n\tand ! I_UnitStatus a2u9 routing\n\tset_counter a2u9_status 0\n\tend_if\n\n\tif I_CompareCounter a2u9_status > 0\n\n\tif I_UnitDistanceFromPosition a2u9 0,0 >= 150\n\tand I_UnitDistanceFromPosition a2u9 0,0 < 175\n" +
                    "\tif I_CompareCounter a2u9_distance != 1\n\tset_counter a2u9_stuck 0\n\tend_if\n\tset_counter a2u9_distance 1\n\tinc_counter a2u9_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u9 0,0 >= 175\n\tand I_UnitDistanceFromPosition a2u9 0,0 < 200\n\tif I_CompareCounter a2u9_distance != 2\n\tset_counter a2u9_stuck 0\n\tend_if\n\tset_counter a2u9_distance 2\n\tinc_counter a2u9_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u9 0,0 >= 200\n\tand I_UnitDistanceFromPosition a2u9 0,0 < 225\n\tif I_CompareCounter a2u9_distance != 3\n\tset_counter a2u9_stuck 0\n\tend_if\n\tset_counter a2u9_distance 3\n\tinc_counter a2u9_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u9 0,0 >= 225\n\tand I_UnitDistanceFromPosition a2u9 0,0 < 250\n\tif I_CompareCounter a2u9_distance != 4\n\tset_counter a2u9_stuck 0\n\tend_if\n\tset_counter a2u9_distance 4\n\tinc_counter a2u9_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u9 0,0 >= 250\n\tand I_UnitDistanceFromPosition a2u9 0,0 < 275\n\tif I_CompareCounter a2u9_distance != 5\n\tset_counter a2u9_stuck 0\n\tend_if\n\tset_counter a2u9_distance 5\n\tinc_counter a2u9_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u9 0,0 >= 275\n\tand I_UnitDistanceFromPosition a2u9 0,0 < 300\n\tif I_CompareCounter a2u9_distance != 6\n\tset_counter a2u9_stuck 0\n\tend_if\n\tset_counter a2u9_distance 6\n\tinc_counter a2u9_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u9 0,0 >= 300\n\tand I_UnitDistanceFromPosition a2u9 0,0 < 325\n\tif I_CompareCounter a2u9_distance != 7\n\tset_counter a2u9_stuck 0\n\tend_if\n\tset_counter a2u9_distance 7\n\tinc_counter a2u9_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u9 0,0 >= 325\n\tand I_UnitDistanceFromPosition a2u9 0,0 < 350\n\tif I_CompareCounter a2u9_distance != 8\n\tset_counter a2u9_stuck 0\n\tend_if\n\tset_counter a2u9_distance 8\n\tinc_counter a2u9_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u9 0,0 >= 350\n\tand I_UnitDistanceFromPosition a2u9 0,0 < 375\n\tif I_CompareCounter a2u9_distance != 9\n\tset_counter a2u9_stuck 0\n\tend_if\n\tset_counter a2u9_distance 9\n\tinc_counter a2u9_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u9 0,0 >= 375\n\tand I_UnitDistanceFromPosition a2u9 0,0 < 400\n\tif I_CompareCounter a2u9_distance != 10\n\tset_counter a2u9_stuck 0\n\tend_if\n\tset_counter a2u9_distance 10\n\tinc_counter a2u9_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u9 0,0 >= 400\n\tand I_UnitDistanceFromPosition a2u9 0,0 < 425\n\tif I_CompareCounter a2u9_distance != 11\n\tset_counter a2u9_stuck 0\n\tend_if\n\tset_counter a2u9_distance 11\n\tinc_counter a2u9_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u9 0,0 >= 425\n\tand I_UnitDistanceFromPosition a2u9 0,0 < 450\n\tif I_CompareCounter a2u9_distance != 12\n\tset_counter a2u9_stuck 0\n\tend_if\n\tset_counter a2u9_distance 12\n\tinc_counter a2u9_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u9 0,0 >= 450\n\tand I_UnitDistanceFromPosition a2u9 0,0 < 500\n\tif I_CompareCounter a2u9_distance != 13\n\tset_counter a2u9_stuck 0\n\tend_if\n\tset_counter a2u9_distance 13\n\tinc_counter a2u9_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u9 0,0 >= 500\n\tand I_UnitDistanceFromPosition a2u9 0,0 < 550\n\tif I_CompareCounter a2u9_distance != 14\n\tset_counter a2u9_stuck 0\n\tend_if\n\tset_counter a2u9_distance 14\n\tinc_counter a2u9_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u9 0,0 >= 550\n\tand I_UnitDistanceFromPosition a2u9 0,0 < 600\n\tif I_CompareCounter a2u9_distance != 15\n\tset_counter a2u9_stuck 0\n\tend_if\n\tset_counter a2u9_distance 15\n\tinc_counter a2u9_stuck 1\n\tend_if\n\n\tif I_CompareCounter a2u9_stuck = 4\n\tunit_order_halt a2u9\n\tunit_set_morale a2u9 wavering\n\tbattle_wait 0.1\n\tunit_unset_morale a2u9\n\trelease_unit a2u9\n\tset_counter a2u9_stuck 0\n\tend_if\n\n\tend_if\nend_if\n\nif I_CompareCounter enemy_unit_count > 9\nand ! I_UnitDestroyed a2u10\n\n\tif I_UnitStatus a2u10 moving\n\tif I_CompareCounter a2u10_status = 0\n\tset_counter a2u10_status 1\n\tend_if\n\tif I_CompareCounter a2u10_status != 1\n\tset_counter a2u10_status 0\n\tend_if\n\tend_if\n\n\tif I_UnitStatus a2u10 routing\n\tif I_CompareCounter a2u10_status = 0\n\tset_counter a2u10_status 2\n\tend_if\n\tif I_CompareCounter a2u10_status != 2\n\tset_counter a2u10_status 0\n\tend_if\n\tend_if\n\n\tif ! I_UnitStatus a2u10 moving\n\tand ! I_UnitStatus a2u10 routing\n\tset_counter a2u10_status 0\n\tend_if\n\n\tif I_CompareCounter a2u10_status > 0\n\n\tif I_UnitDistanceFromPosition a2u10 0,0 >= 150\n\tand I_UnitDistanceFromPosition a2u10 0,0 < 175\n\tif I_CompareCounter a2u10_distance != 1\n\tset_counter a2u10_stuck 0\n\tend_if\n\tset_counter a2u10_distance 1\n\tinc_counter a2u10_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u10 0,0 >= 175\n\tand I_UnitDistanceFromPosition a2u10 0,0 < 200\n\tif I_CompareCounter a2u10_distance != 2\n\tset_counter a2u10_stuck 0\n\tend_if\n\tset_counter a2u10_distance 2\n\tinc_counter a2u10_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u10 0,0 >= 200\n\tand I_UnitDistanceFromPosition a2u10 0,0 < 225\n\tif I_CompareCounter a2u10_distance != 3\n\tset_counter a2u10_stuck 0\n\tend_if\n\tset_counter a2u10_distance 3\n\tinc_counter a2u10_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u10 0,0 >= 225\n\tand I_UnitDistanceFromPosition a2u10 0,0 < 250\n\tif I_CompareCounter a2u10_distance != 4\n\tset_counter a2u10_stuck 0\n\tend_if\n\tset_counter a2u10_distance 4\n\tinc_counter a2u10_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u10 0,0 >= 250\n\tand I_UnitDistanceFromPosition a2u10 0,0 < 275\n\tif I_CompareCounter a2u10_distance != 5\n\tset_counter a2u10_stuck 0\n\tend_if\n\tset_counter a2u10_distance 5\n\tinc_counter a2u10_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u10 0,0 >= 275\n\tand I_UnitDistanceFromPosition a2u10 0,0 < 300\n\tif I_CompareCounter a2u10_distance != 6\n\tset_counter a2u10_stuck 0\n\tend_if\n\tset_counter a2u10_distance 6\n\tinc_counter a2u10_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u10 0,0 >= 300\n\tand I_UnitDistanceFromPosition a2u10 0,0 < 325\n\tif I_CompareCounter a2u10_distance != 7\n\tset_counter a2u10_stuck 0\n\tend_if\n\tset_counter a2u10_distance 7\n\tinc_counter a2u10_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u10 0,0 >= 325\n\tand I_UnitDistanceFromPosition a2u10 0,0 < 350\n\tif I_CompareCounter a2u10_distance != 8\n\tset_counter a2u10_stuck 0\n\tend_if\n\tset_counter a2u10_distance 8\n\tinc_counter a2u10_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u10 0,0 >= 350\n\tand I_UnitDistanceFromPosition a2u10 0,0 < 375\n\tif I_CompareCounter a2u10_distance != 9\n\tset_counter a2u10_stuck 0\n\tend_if\n\tset_counter a2u10_distance 9\n\tinc_counter a2u10_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u10 0,0 >= 375\n\tand I_UnitDistanceFromPosition a2u10 0,0 < 400\n\tif I_CompareCounter a2u10_distance != 10\n\tset_counter a2u10_stuck 0\n\tend_if\n\tset_counter a2u10_distance 10\n\tinc_counter a2u10_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u10 0,0 >= 400\n\tand I_UnitDistanceFromPosition a2u10 0,0 < 425\n\tif I_CompareCounter a2u10_distance != 11\n\tset_counter a2u10_stuck 0\n\tend_if\n\tset_counter a2u10_distance 11\n\tinc_counter a2u10_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u10 0,0 >= 425\n\tand I_UnitDistanceFromPosition a2u10 0,0 < 450\n\tif I_CompareCounter a2u10_distance != 12\n\tset_counter a2u10_stuck 0\n\tend_if\n\tset_counter a2u10_distance 12\n\tinc_counter a2u10_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u10 0,0 >= 450\n\tand I_UnitDistanceFromPosition a2u10 0,0 < 500\n\tif I_CompareCounter a2u10_distance != 13\n\tset_counter a2u10_stuck 0\n\tend_if\n\tset_counter a2u10_distance 13\n" +
                    "\tinc_counter a2u10_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u10 0,0 >= 500\n\tand I_UnitDistanceFromPosition a2u10 0,0 < 550\n\tif I_CompareCounter a2u10_distance != 14\n\tset_counter a2u10_stuck 0\n\tend_if\n\tset_counter a2u10_distance 14\n\tinc_counter a2u10_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u10 0,0 >= 550\n\tand I_UnitDistanceFromPosition a2u10 0,0 < 600\n\tif I_CompareCounter a2u10_distance != 15\n\tset_counter a2u10_stuck 0\n\tend_if\n\tset_counter a2u10_distance 15\n\tinc_counter a2u10_stuck 1\n\tend_if\n\n\tif I_CompareCounter a2u10_stuck = 4\n\tunit_order_halt a2u10\n\tunit_set_morale a2u10 wavering\n\tbattle_wait 0.1\n\tunit_unset_morale a2u10\n\trelease_unit a2u10\n\tset_counter a2u10_stuck 0\n\tend_if\n\n\tend_if\nend_if\n\nif I_CompareCounter enemy_unit_count > 10\nand ! I_UnitDestroyed a2u11\n\n\tif I_UnitStatus a2u11 moving\n\tif I_CompareCounter a2u11_status = 0\n\tset_counter a2u11_status 1\n\tend_if\n\tif I_CompareCounter a2u11_status != 1\n\tset_counter a2u11_status 0\n\tend_if\n\tend_if\n\n\tif I_UnitStatus a2u11 routing\n\tif I_CompareCounter a2u11_status = 0\n\tset_counter a2u11_status 2\n\tend_if\n\tif I_CompareCounter a2u11_status != 2\n\tset_counter a2u11_status 0\n\tend_if\n\tend_if\n\n\tif ! I_UnitStatus a2u11 moving\n\tand ! I_UnitStatus a2u11 routing\n\tset_counter a2u11_status 0\n\tend_if\n\n\tif I_CompareCounter a2u11_status > 0\n\n\tif I_UnitDistanceFromPosition a2u11 0,0 >= 150\n\tand I_UnitDistanceFromPosition a2u11 0,0 < 175\n\tif I_CompareCounter a2u11_distance != 1\n\tset_counter a2u11_stuck 0\n\tend_if\n\tset_counter a2u11_distance 1\n\tinc_counter a2u11_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u11 0,0 >= 175\n\tand I_UnitDistanceFromPosition a2u11 0,0 < 200\n\tif I_CompareCounter a2u11_distance != 2\n\tset_counter a2u11_stuck 0\n\tend_if\n\tset_counter a2u11_distance 2\n\tinc_counter a2u11_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u11 0,0 >= 200\n\tand I_UnitDistanceFromPosition a2u11 0,0 < 225\n\tif I_CompareCounter a2u11_distance != 3\n\tset_counter a2u11_stuck 0\n\tend_if\n\tset_counter a2u11_distance 3\n\tinc_counter a2u11_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u11 0,0 >= 225\n\tand I_UnitDistanceFromPosition a2u11 0,0 < 250\n\tif I_CompareCounter a2u11_distance != 4\n\tset_counter a2u11_stuck 0\n\tend_if\n\tset_counter a2u11_distance 4\n\tinc_counter a2u11_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u11 0,0 >= 250\n\tand I_UnitDistanceFromPosition a2u11 0,0 < 275\n\tif I_CompareCounter a2u11_distance != 5\n\tset_counter a2u11_stuck 0\n\tend_if\n\tset_counter a2u11_distance 5\n\tinc_counter a2u11_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u11 0,0 >= 275\n\tand I_UnitDistanceFromPosition a2u11 0,0 < 300\n\tif I_CompareCounter a2u11_distance != 6\n\tset_counter a2u11_stuck 0\n\tend_if\n\tset_counter a2u11_distance 6\n\tinc_counter a2u11_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u11 0,0 >= 300\n\tand I_UnitDistanceFromPosition a2u11 0,0 < 325\n\tif I_CompareCounter a2u11_distance != 7\n\tset_counter a2u11_stuck 0\n\tend_if\n\tset_counter a2u11_distance 7\n\tinc_counter a2u11_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u11 0,0 >= 325\n\tand I_UnitDistanceFromPosition a2u11 0,0 < 350\n\tif I_CompareCounter a2u11_distance != 8\n\tset_counter a2u11_stuck 0\n\tend_if\n\tset_counter a2u11_distance 8\n\tinc_counter a2u11_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u11 0,0 >= 350\n\tand I_UnitDistanceFromPosition a2u11 0,0 < 375\n\tif I_CompareCounter a2u11_distance != 9\n\tset_counter a2u11_stuck 0\n\tend_if\n\tset_counter a2u11_distance 9\n\tinc_counter a2u11_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u11 0,0 >= 375\n\tand I_UnitDistanceFromPosition a2u11 0,0 < 400\n\tif I_CompareCounter a2u11_distance != 10\n\tset_counter a2u11_stuck 0\n\tend_if\n\tset_counter a2u11_distance 10\n\tinc_counter a2u11_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u11 0,0 >= 400\n\tand I_UnitDistanceFromPosition a2u11 0,0 < 425\n\tif I_CompareCounter a2u11_distance != 11\n\tset_counter a2u11_stuck 0\n\tend_if\n\tset_counter a2u11_distance 11\n\tinc_counter a2u11_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u11 0,0 >= 425\n\tand I_UnitDistanceFromPosition a2u11 0,0 < 450\n\tif I_CompareCounter a2u11_distance != 12\n\tset_counter a2u11_stuck 0\n\tend_if\n\tset_counter a2u11_distance 12\n\tinc_counter a2u11_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u11 0,0 >= 450\n\tand I_UnitDistanceFromPosition a2u11 0,0 < 500\n\tif I_CompareCounter a2u11_distance != 13\n\tset_counter a2u11_stuck 0\n\tend_if\n\tset_counter a2u11_distance 13\n\tinc_counter a2u11_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u11 0,0 >= 500\n\tand I_UnitDistanceFromPosition a2u11 0,0 < 550\n\tif I_CompareCounter a2u11_distance != 14\n\tset_counter a2u11_stuck 0\n\tend_if\n\tset_counter a2u11_distance 14\n\tinc_counter a2u11_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u11 0,0 >= 550\n\tand I_UnitDistanceFromPosition a2u11 0,0 < 600\n\tif I_CompareCounter a2u11_distance != 15\n\tset_counter a2u11_stuck 0\n\tend_if\n\tset_counter a2u11_distance 15\n\tinc_counter a2u11_stuck 1\n\tend_if\n\n\tif I_CompareCounter a2u11_stuck = 4\n\tunit_order_halt a2u11\n\tunit_set_morale a2u11 wavering\n" +
                    "\tbattle_wait 0.1\n\tunit_unset_morale a2u11\n\trelease_unit a2u11\n\tset_counter a2u11_stuck 0\n\tend_if\n\n\tend_if\nend_if\n\nif I_CompareCounter enemy_unit_count > 11\nand ! I_UnitDestroyed a2u12\n\n\tif I_UnitStatus a2u12 moving\n\tif I_CompareCounter a2u12_status = 0\n\tset_counter a2u12_status 1\n\tend_if\n\tif I_CompareCounter a2u12_status != 1\n\tset_counter a2u12_status 0\n\tend_if\n\tend_if\n\n\tif I_UnitStatus a2u12 routing\n\tif I_CompareCounter a2u12_status = 0\n\tset_counter a2u12_status 2\n\tend_if\n\tif I_CompareCounter a2u12_status != 2\n\tset_counter a2u12_status 0\n\tend_if\n\tend_if\n\n\tif ! I_UnitStatus a2u12 moving\n\tand ! I_UnitStatus a2u12 routing\n\tset_counter a2u12_status 0\n\tend_if\n\n\tif I_CompareCounter a2u12_status > 0\n\n\tif I_UnitDistanceFromPosition a2u12 0,0 >= 150\n\tand I_UnitDistanceFromPosition a2u12 0,0 < 175\n\tif I_CompareCounter a2u12_distance != 1\n\tset_counter a2u12_stuck 0\n\tend_if\n\tset_counter a2u12_distance 1\n\tinc_counter a2u12_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u12 0,0 >= 175\n\tand I_UnitDistanceFromPosition a2u12 0,0 < 200\n\tif I_CompareCounter a2u12_distance != 2\n\tset_counter a2u12_stuck 0\n\tend_if\n\tset_counter a2u12_distance 2\n\tinc_counter a2u12_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u12 0,0 >= 200\n\tand I_UnitDistanceFromPosition a2u12 0,0 < 225\n\tif I_CompareCounter a2u12_distance != 3\n\tset_counter a2u12_stuck 0\n\tend_if\n\tset_counter a2u12_distance 3\n\tinc_counter a2u12_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u12 0,0 >= 225\n\tand I_UnitDistanceFromPosition a2u12 0,0 < 250\n\tif I_CompareCounter a2u12_distance != 4\n\tset_counter a2u12_stuck 0\n\tend_if\n\tset_counter a2u12_distance 4\n\tinc_counter a2u12_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u12 0,0 >= 250\n\tand I_UnitDistanceFromPosition a2u12 0,0 < 275\n\tif I_CompareCounter a2u12_distance != 5\n\tset_counter a2u12_stuck 0\n\tend_if\n\tset_counter a2u12_distance 5\n\tinc_counter a2u12_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u12 0,0 >= 275\n\tand I_UnitDistanceFromPosition a2u12 0,0 < 300\n\tif I_CompareCounter a2u12_distance != 6\n\tset_counter a2u12_stuck 0\n\tend_if\n\tset_counter a2u12_distance 6\n\tinc_counter a2u12_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u12 0,0 >= 300\n\tand I_UnitDistanceFromPosition a2u12 0,0 < 325\n\tif I_CompareCounter a2u12_distance != 7\n\tset_counter a2u12_stuck 0\n\tend_if\n\tset_counter a2u12_distance 7\n\tinc_counter a2u12_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u12 0,0 >= 325\n\tand I_UnitDistanceFromPosition a2u12 0,0 < 350\n\tif I_CompareCounter a2u12_distance != 8\n\tset_counter a2u12_stuck 0\n\tend_if\n\tset_counter a2u12_distance 8\n\tinc_counter a2u12_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u12 0,0 >= 350\n\tand I_UnitDistanceFromPosition a2u12 0,0 < 375\n\tif I_CompareCounter a2u12_distance != 9\n\tset_counter a2u12_stuck 0\n\tend_if\n\tset_counter a2u12_distance 9\n\tinc_counter a2u12_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u12 0,0 >= 375\n\tand I_UnitDistanceFromPosition a2u12 0,0 < 400\n\tif I_CompareCounter a2u12_distance != 10\n\tset_counter a2u12_stuck 0\n\tend_if\n\tset_counter a2u12_distance 10\n\tinc_counter a2u12_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u12 0,0 >= 400\n\tand I_UnitDistanceFromPosition a2u12 0,0 < 425\n\tif I_CompareCounter a2u12_distance != 11\n\tset_counter a2u12_stuck 0\n\tend_if\n\tset_counter a2u12_distance 11\n\tinc_counter a2u12_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u12 0,0 >= 425\n\tand I_UnitDistanceFromPosition a2u12 0,0 < 450\n\tif I_CompareCounter a2u12_distance != 12\n\tset_counter a2u12_stuck 0\n\tend_if\n\tset_counter a2u12_distance 12\n\tinc_counter a2u12_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u12 0,0 >= 450\n\tand I_UnitDistanceFromPosition a2u12 0,0 < 500\n\tif I_CompareCounter a2u12_distance != 13\n\tset_counter a2u12_stuck 0\n\tend_if\n\tset_counter a2u12_distance 13\n\tinc_counter a2u12_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u12 0,0 >= 500\n\tand I_UnitDistanceFromPosition a2u12 0,0 < 550\n\tif I_CompareCounter a2u12_distance != 14\n\tset_counter a2u12_stuck 0\n\tend_if\n\tset_counter a2u12_distance 14\n\tinc_counter a2u12_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u12 0,0 >= 550\n\tand I_UnitDistanceFromPosition a2u12 0,0 < 600\n\tif I_CompareCounter a2u12_distance != 15\n\tset_counter a2u12_stuck 0\n\tend_if\n\tset_counter a2u12_distance 15\n\tinc_counter a2u12_stuck 1\n\tend_if\n\n\tif I_CompareCounter a2u12_stuck = 4\n\tunit_order_halt a2u12\n\tunit_set_morale a2u12 wavering\n\tbattle_wait 0.1\n\tunit_unset_morale a2u12\n\trelease_unit a2u12\n\tset_counter a2u12_stuck 0\n\tend_if\n\n\tend_if\nend_if\n\nif I_CompareCounter enemy_unit_count > 12\nand ! I_UnitDestroyed a2u13\n\n\tif I_UnitStatus a2u13 moving\n\tif I_CompareCounter a2u13_status = 0\n\tset_counter a2u13_status 1\n\tend_if\n\tif I_CompareCounter a2u13_status != 1\n\tset_counter a2u13_status 0\n\tend_if\n\tend_if\n\n\tif I_UnitStatus a2u13 routing\n\tif I_CompareCounter a2u13_status = 0\n\tset_counter a2u13_status 2\n\tend_if\n\tif I_CompareCounter a2u13_status != 2\n\tset_counter a2u13_status 0\n\tend_if\n\tend_if\n\n\tif ! I_UnitStatus a2u13 moving\n\tand ! I_UnitStatus a2u13 routing\n\tset_counter a2u13_status 0\n\tend_if\n\n\tif I_CompareCounter a2u13_status > 0\n\n\tif I_UnitDistanceFromPosition a2u13 0,0 >= 150\n\tand I_UnitDistanceFromPosition a2u13 0,0 < 175\n\tif I_CompareCounter a2u13_distance != 1\n\tset_counter a2u13_stuck 0\n\tend_if\n\tset_counter a2u13_distance 1\n\tinc_counter a2u13_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u13 0,0 >= 175\n\tand I_UnitDistanceFromPosition a2u13 0,0 < 200\n\tif I_CompareCounter a2u13_distance != 2\n\tset_counter a2u13_stuck 0\n\tend_if\n\tset_counter a2u13_distance 2\n\tinc_counter a2u13_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u13 0,0 >= 200\n\tand I_UnitDistanceFromPosition a2u13 0,0 < 225\n\tif I_CompareCounter a2u13_distance != 3\n\tset_counter a2u13_stuck 0\n\tend_if\n\tset_counter a2u13_distance 3\n\tinc_counter a2u13_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u13 0,0 >= 225\n\tand I_UnitDistanceFromPosition a2u13 0,0 < 250\n\tif I_CompareCounter a2u13_distance != 4\n\tset_counter a2u13_stuck 0\n\tend_if\n\tset_counter a2u13_distance 4\n\tinc_counter a2u13_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u13 0,0 >= 250\n\tand I_UnitDistanceFromPosition a2u13 0,0 < 275\n\tif I_CompareCounter a2u13_distance != 5\n\tset_counter a2u13_stuck 0\n\tend_if\n\tset_counter a2u13_distance 5\n\tinc_counter a2u13_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u13 0,0 >= 275\n\tand I_UnitDistanceFromPosition a2u13 0,0 < 300\n\tif I_CompareCounter a2u13_distance != 6\n\tset_counter a2u13_stuck 0\n\tend_if\n\tset_counter a2u13_distance 6\n\tinc_counter a2u13_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u13 0,0 >= 300\n\tand I_UnitDistanceFromPosition a2u13 0,0 < 325\n\tif I_CompareCounter a2u13_distance != 7\n\tset_counter a2u13_stuck 0\n\tend_if\n\tset_counter a2u13_distance 7\n\tinc_counter a2u13_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u13 0,0 >= 325\n\tand I_UnitDistanceFromPosition a2u13 0,0 < 350\n\tif I_CompareCounter a2u13_distance != 8\n\tset_counter a2u13_stuck 0\n\tend_if\n\tset_counter a2u13_distance 8\n\tinc_counter a2u13_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u13 0,0 >= 350\n\tand I_UnitDistanceFromPosition a2u13 0,0 < 375\n\tif I_CompareCounter a2u13_distance != 9\n\tset_counter a2u13_stuck 0\n\tend_if\n\tset_counter a2u13_distance 9\n\tinc_counter a2u13_stuck 1\n\tend_if\n\n" +
                    "\tif I_UnitDistanceFromPosition a2u13 0,0 >= 375\n\tand I_UnitDistanceFromPosition a2u13 0,0 < 400\n\tif I_CompareCounter a2u13_distance != 10\n\tset_counter a2u13_stuck 0\n\tend_if\n\tset_counter a2u13_distance 10\n\tinc_counter a2u13_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u13 0,0 >= 400\n\tand I_UnitDistanceFromPosition a2u13 0,0 < 425\n\tif I_CompareCounter a2u13_distance != 11\n\tset_counter a2u13_stuck 0\n\tend_if\n\tset_counter a2u13_distance 11\n\tinc_counter a2u13_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u13 0,0 >= 425\n\tand I_UnitDistanceFromPosition a2u13 0,0 < 450\n\tif I_CompareCounter a2u13_distance != 12\n\tset_counter a2u13_stuck 0\n\tend_if\n\tset_counter a2u13_distance 12\n\tinc_counter a2u13_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u13 0,0 >= 450\n\tand I_UnitDistanceFromPosition a2u13 0,0 < 500\n\tif I_CompareCounter a2u13_distance != 13\n\tset_counter a2u13_stuck 0\n\tend_if\n\tset_counter a2u13_distance 13\n\tinc_counter a2u13_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u13 0,0 >= 500\n\tand I_UnitDistanceFromPosition a2u13 0,0 < 550\n\tif I_CompareCounter a2u13_distance != 14\n\tset_counter a2u13_stuck 0\n\tend_if\n\tset_counter a2u13_distance 14\n\tinc_counter a2u13_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u13 0,0 >= 550\n\tand I_UnitDistanceFromPosition a2u13 0,0 < 600\n\tif I_CompareCounter a2u13_distance != 15\n\tset_counter a2u13_stuck 0\n\tend_if\n\tset_counter a2u13_distance 15\n\tinc_counter a2u13_stuck 1\n\tend_if\n\n\tif I_CompareCounter a2u13_stuck = 4\n\tunit_order_halt a2u13\n\tunit_set_morale a2u13 wavering\n\tbattle_wait 0.1\n\tunit_unset_morale a2u13\n\trelease_unit a2u13\n\tset_counter a2u13_stuck 0\n\tend_if\n\n\tend_if\nend_if\n\nif I_CompareCounter enemy_unit_count > 13\nand ! I_UnitDestroyed a2u14\n\n\tif I_UnitStatus a2u14 moving\n\tif I_CompareCounter a2u14_status = 0\n\tset_counter a2u14_status 1\n\tend_if\n\tif I_CompareCounter a2u14_status != 1\n\tset_counter a2u14_status 0\n\tend_if\n\tend_if\n\n\tif I_UnitStatus a2u14 routing\n\tif I_CompareCounter a2u14_status = 0\n\tset_counter a2u14_status 2\n\tend_if\n\tif I_CompareCounter a2u14_status != 2\n\tset_counter a2u14_status 0\n\tend_if\n\tend_if\n\n\tif ! I_UnitStatus a2u14 moving\n\tand ! I_UnitStatus a2u14 routing\n\tset_counter a2u14_status 0\n\tend_if\n\n\tif I_CompareCounter a2u14_status > 0\n\n\tif I_UnitDistanceFromPosition a2u14 0,0 >= 150\n\tand I_UnitDistanceFromPosition a2u14 0,0 < 175\n\tif I_CompareCounter a2u14_distance != 1\n\tset_counter a2u14_stuck 0\n\tend_if\n\tset_counter a2u14_distance 1\n\tinc_counter a2u14_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u14 0,0 >= 175\n\tand I_UnitDistanceFromPosition a2u14 0,0 < 200\n\tif I_CompareCounter a2u14_distance != 2\n\tset_counter a2u14_stuck 0\n\tend_if\n\tset_counter a2u14_distance 2\n\tinc_counter a2u14_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u14 0,0 >= 200\n\tand I_UnitDistanceFromPosition a2u14 0,0 < 225\n\tif I_CompareCounter a2u14_distance != 3\n\tset_counter a2u14_stuck 0\n\tend_if\n\tset_counter a2u14_distance 3\n\tinc_counter a2u14_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u14 0,0 >= 225\n\tand I_UnitDistanceFromPosition a2u14 0,0 < 250\n\tif I_CompareCounter a2u14_distance != 4\n\tset_counter a2u14_stuck 0\n\tend_if\n\tset_counter a2u14_distance 4\n\tinc_counter a2u14_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u14 0,0 >= 250\n\tand I_UnitDistanceFromPosition a2u14 0,0 < 275\n\tif I_CompareCounter a2u14_distance != 5\n\tset_counter a2u14_stuck 0\n\tend_if\n\tset_counter a2u14_distance 5\n\tinc_counter a2u14_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u14 0,0 >= 275\n\tand I_UnitDistanceFromPosition a2u14 0,0 < 300\n\tif I_CompareCounter a2u14_distance != 6\n\tset_counter a2u14_stuck 0\n\tend_if\n\tset_counter a2u14_distance 6\n\tinc_counter a2u14_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u14 0,0 >= 300\n\tand I_UnitDistanceFromPosition a2u14 0,0 < 325\n\tif I_CompareCounter a2u14_distance != 7\n\tset_counter a2u14_stuck 0\n\tend_if\n\tset_counter a2u14_distance 7\n\tinc_counter a2u14_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u14 0,0 >= 325\n\tand I_UnitDistanceFromPosition a2u14 0,0 < 350\n\tif I_CompareCounter a2u14_distance != 8\n\tset_counter a2u14_stuck 0\n\tend_if\n\tset_counter a2u14_distance 8\n\tinc_counter a2u14_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u14 0,0 >= 350\n\tand I_UnitDistanceFromPosition a2u14 0,0 < 375\n\tif I_CompareCounter a2u14_distance != 9\n\tset_counter a2u14_stuck 0\n\tend_if\n\tset_counter a2u14_distance 9\n\tinc_counter a2u14_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u14 0,0 >= 375\n\tand I_UnitDistanceFromPosition a2u14 0,0 < 400\n\tif I_CompareCounter a2u14_distance != 10\n\tset_counter a2u14_stuck 0\n\tend_if\n\tset_counter a2u14_distance 10\n\tinc_counter a2u14_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u14 0,0 >= 400\n\tand I_UnitDistanceFromPosition a2u14 0,0 < 425\n\tif I_CompareCounter a2u14_distance != 11\n\tset_counter a2u14_stuck 0\n\tend_if\n\tset_counter a2u14_distance 11\n\tinc_counter a2u14_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u14 0,0 >= 425\n\tand I_UnitDistanceFromPosition a2u14 0,0 < 450\n\tif I_CompareCounter a2u14_distance != 12\n\tset_counter a2u14_stuck 0\n\tend_if\n\tset_counter a2u14_distance 12\n\tinc_counter a2u14_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u14 0,0 >= 450\n\tand I_UnitDistanceFromPosition a2u14 0,0 < 500\n\tif I_CompareCounter a2u14_distance != 13\n\tset_counter a2u14_stuck 0\n\tend_if\n\tset_counter a2u14_distance 13\n\tinc_counter a2u14_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u14 0,0 >= 500\n\tand I_UnitDistanceFromPosition a2u14 0,0 < 550\n\tif I_CompareCounter a2u14_distance != 14\n\tset_counter a2u14_stuck 0\n\tend_if\n\tset_counter a2u14_distance 14\n\tinc_counter a2u14_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u14 0,0 >= 550\n\tand I_UnitDistanceFromPosition a2u14 0,0 < 600\n\tif I_CompareCounter a2u14_distance != 15\n\tset_counter a2u14_stuck 0\n\tend_if\n\tset_counter a2u14_distance 15\n\tinc_counter a2u14_stuck 1\n\tend_if\n\n\tif I_CompareCounter a2u14_stuck = 4\n\tunit_order_halt a2u14\n\tunit_set_morale a2u14 wavering\n\tbattle_wait 0.1\n\tunit_unset_morale a2u14\n\trelease_unit a2u14\n\tset_counter a2u14_stuck 0\n\tend_if\n\n\tend_if\nend_if\n\nif I_CompareCounter enemy_unit_count > 14\nand ! I_UnitDestroyed a2u15\n\n\tif I_UnitStatus a2u15 moving\n" +
                    "\tif I_CompareCounter a2u15_status = 0\n\tset_counter a2u15_status 1\n\tend_if\n\tif I_CompareCounter a2u15_status != 1\n\tset_counter a2u15_status 0\n\tend_if\n\tend_if\n\n\tif I_UnitStatus a2u15 routing\n\tif I_CompareCounter a2u15_status = 0\n\tset_counter a2u15_status 2\n\tend_if\n\tif I_CompareCounter a2u15_status != 2\n\tset_counter a2u15_status 0\n\tend_if\n\tend_if\n\n\tif ! I_UnitStatus a2u15 moving\n\tand ! I_UnitStatus a2u15 routing\n\tset_counter a2u15_status 0\n\tend_if\n\n\tif I_CompareCounter a2u15_status > 0\n\n\tif I_UnitDistanceFromPosition a2u15 0,0 >= 150\n\tand I_UnitDistanceFromPosition a2u15 0,0 < 175\n\tif I_CompareCounter a2u15_distance != 1\n\tset_counter a2u15_stuck 0\n\tend_if\n\tset_counter a2u15_distance 1\n\tinc_counter a2u15_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u15 0,0 >= 175\n\tand I_UnitDistanceFromPosition a2u15 0,0 < 200\n\tif I_CompareCounter a2u15_distance != 2\n\tset_counter a2u15_stuck 0\n\tend_if\n\tset_counter a2u15_distance 2\n\tinc_counter a2u15_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u15 0,0 >= 200\n\tand I_UnitDistanceFromPosition a2u15 0,0 < 225\n\tif I_CompareCounter a2u15_distance != 3\n\tset_counter a2u15_stuck 0\n\tend_if\n\tset_counter a2u15_distance 3\n\tinc_counter a2u15_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u15 0,0 >= 225\n\tand I_UnitDistanceFromPosition a2u15 0,0 < 250\n\tif I_CompareCounter a2u15_distance != 4\n\tset_counter a2u15_stuck 0\n\tend_if\n\tset_counter a2u15_distance 4\n\tinc_counter a2u15_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u15 0,0 >= 250\n\tand I_UnitDistanceFromPosition a2u15 0,0 < 275\n\tif I_CompareCounter a2u15_distance != 5\n\tset_counter a2u15_stuck 0\n\tend_if\n\tset_counter a2u15_distance 5\n\tinc_counter a2u15_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u15 0,0 >= 275\n\tand I_UnitDistanceFromPosition a2u15 0,0 < 300\n\tif I_CompareCounter a2u15_distance != 6\n\tset_counter a2u15_stuck 0\n\tend_if\n\tset_counter a2u15_distance 6\n\tinc_counter a2u15_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u15 0,0 >= 300\n\tand I_UnitDistanceFromPosition a2u15 0,0 < 325\n\tif I_CompareCounter a2u15_distance != 7\n\tset_counter a2u15_stuck 0\n\tend_if\n\tset_counter a2u15_distance 7\n\tinc_counter a2u15_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u15 0,0 >= 325\n\tand I_UnitDistanceFromPosition a2u15 0,0 < 350\n\tif I_CompareCounter a2u15_distance != 8\n\tset_counter a2u15_stuck 0\n\tend_if\n\tset_counter a2u15_distance 8\n\tinc_counter a2u15_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u15 0,0 >= 350\n\tand I_UnitDistanceFromPosition a2u15 0,0 < 375\n\tif I_CompareCounter a2u15_distance != 9\n\tset_counter a2u15_stuck 0\n\tend_if\n\tset_counter a2u15_distance 9\n\tinc_counter a2u15_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u15 0,0 >= 375\n\tand I_UnitDistanceFromPosition a2u15 0,0 < 400\n\tif I_CompareCounter a2u15_distance != 10\n\tset_counter a2u15_stuck 0\n\tend_if\n\tset_counter a2u15_distance 10\n\tinc_counter a2u15_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u15 0,0 >= 400\n\tand I_UnitDistanceFromPosition a2u15 0,0 < 425\n\tif I_CompareCounter a2u15_distance != 11\n\tset_counter a2u15_stuck 0\n\tend_if\n\tset_counter a2u15_distance 11\n\tinc_counter a2u15_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u15 0,0 >= 425\n\tand I_UnitDistanceFromPosition a2u15 0,0 < 450\n\tif I_CompareCounter a2u15_distance != 12\n\tset_counter a2u15_stuck 0\n\tend_if\n\tset_counter a2u15_distance 12\n\tinc_counter a2u15_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u15 0,0 >= 450\n\tand I_UnitDistanceFromPosition a2u15 0,0 < 500\n" +
                    "\tif I_CompareCounter a2u15_distance != 13\n\tset_counter a2u15_stuck 0\n\tend_if\n\tset_counter a2u15_distance 13\n\tinc_counter a2u15_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u15 0,0 >= 500\n\tand I_UnitDistanceFromPosition a2u15 0,0 < 550\n\tif I_CompareCounter a2u15_distance != 14\n\tset_counter a2u15_stuck 0\n\tend_if\n\tset_counter a2u15_distance 14\n\tinc_counter a2u15_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u15 0,0 >= 550\n\tand I_UnitDistanceFromPosition a2u15 0,0 < 600\n\tif I_CompareCounter a2u15_distance != 15\n\tset_counter a2u15_stuck 0\n\tend_if\n\tset_counter a2u15_distance 15\n\tinc_counter a2u15_stuck 1\n\tend_if\n\n\tif I_CompareCounter a2u15_stuck = 4\n\tunit_order_halt a2u15\n\tunit_set_morale a2u15 wavering\n\tbattle_wait 0.1\n\tunit_unset_morale a2u15\n\trelease_unit a2u15\n\tset_counter a2u15_stuck 0\n\tend_if\n\n\tend_if\nend_if\n\nif I_CompareCounter enemy_unit_count > 15\nand ! I_UnitDestroyed a2u16\n\n\tif I_UnitStatus a2u16 moving\n\tif I_CompareCounter a2u16_status = 0\n\tset_counter a2u16_status 1\n\tend_if\n\tif I_CompareCounter a2u16_status != 1\n\tset_counter a2u16_status 0\n\tend_if\n\tend_if\n\n\tif I_UnitStatus a2u16 routing\n\tif I_CompareCounter a2u16_status = 0\n\tset_counter a2u16_status 2\n\tend_if\n\tif I_CompareCounter a2u16_status != 2\n\tset_counter a2u16_status 0\n\tend_if\n\tend_if\n\n\tif ! I_UnitStatus a2u16 moving\n\tand ! I_UnitStatus a2u16 routing\n\tset_counter a2u16_status 0\n\tend_if\n\n\tif I_CompareCounter a2u16_status > 0\n\n\tif I_UnitDistanceFromPosition a2u16 0,0 >= 150\n\tand I_UnitDistanceFromPosition a2u16 0,0 < 175\n\tif I_CompareCounter a2u16_distance != 1\n\tset_counter a2u16_stuck 0\n\tend_if\n\tset_counter a2u16_distance 1\n\tinc_counter a2u16_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u16 0,0 >= 175\n\tand I_UnitDistanceFromPosition a2u16 0,0 < 200\n\tif I_CompareCounter a2u16_distance != 2\n\tset_counter a2u16_stuck 0\n\tend_if\n\tset_counter a2u16_distance 2\n\tinc_counter a2u16_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u16 0,0 >= 200\n\tand I_UnitDistanceFromPosition a2u16 0,0 < 225\n\tif I_CompareCounter a2u16_distance != 3\n\tset_counter a2u16_stuck 0\n\tend_if\n\tset_counter a2u16_distance 3\n\tinc_counter a2u16_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u16 0,0 >= 225\n\tand I_UnitDistanceFromPosition a2u16 0,0 < 250\n\tif I_CompareCounter a2u16_distance != 4\n\tset_counter a2u16_stuck 0\n\tend_if\n\tset_counter a2u16_distance 4\n\tinc_counter a2u16_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u16 0,0 >= 250\n\tand I_UnitDistanceFromPosition a2u16 0,0 < 275\n\tif I_CompareCounter a2u16_distance != 5\n\tset_counter a2u16_stuck 0\n\tend_if\n\tset_counter a2u16_distance 5\n\tinc_counter a2u16_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u16 0,0 >= 275\n\tand I_UnitDistanceFromPosition a2u16 0,0 < 300\n\tif I_CompareCounter a2u16_distance != 6\n\tset_counter a2u16_stuck 0\n\tend_if\n\tset_counter a2u16_distance 6\n\tinc_counter a2u16_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u16 0,0 >= 300\n\tand I_UnitDistanceFromPosition a2u16 0,0 < 325\n\tif I_CompareCounter a2u16_distance != 7\n\tset_counter a2u16_stuck 0\n\tend_if\n\tset_counter a2u16_distance 7\n\tinc_counter a2u16_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u16 0,0 >= 325\n\tand I_UnitDistanceFromPosition a2u16 0,0 < 350\n\tif I_CompareCounter a2u16_distance != 8\n\tset_counter a2u16_stuck 0\n\tend_if\n\tset_counter a2u16_distance 8\n\tinc_counter a2u16_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u16 0,0 >= 350\n\tand I_UnitDistanceFromPosition a2u16 0,0 < 375\n\tif I_CompareCounter a2u16_distance != 9\n\tset_counter a2u16_stuck 0\n\tend_if\n\tset_counter a2u16_distance 9\n\tinc_counter a2u16_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u16 0,0 >= 375\n\tand I_UnitDistanceFromPosition a2u16 0,0 < 400\n\tif I_CompareCounter a2u16_distance != 10\n\tset_counter a2u16_stuck 0\n\tend_if\n\tset_counter a2u16_distance 10\n\tinc_counter a2u16_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u16 0,0 >= 400\n\tand I_UnitDistanceFromPosition a2u16 0,0 < 425\n\tif I_CompareCounter a2u16_distance != 11\n\tset_counter a2u16_stuck 0\n\tend_if\n\tset_counter a2u16_distance 11\n\tinc_counter a2u16_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u16 0,0 >= 425\n\tand I_UnitDistanceFromPosition a2u16 0,0 < 450\n\tif I_CompareCounter a2u16_distance != 12\n\tset_counter a2u16_stuck 0\n\tend_if\n\tset_counter a2u16_distance 12\n\tinc_counter a2u16_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u16 0,0 >= 450\n\tand I_UnitDistanceFromPosition a2u16 0,0 < 500\n\tif I_CompareCounter a2u16_distance != 13\n\tset_counter a2u16_stuck 0\n\tend_if\n\tset_counter a2u16_distance 13\n\tinc_counter a2u16_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u16 0,0 >= 500\n\tand I_UnitDistanceFromPosition a2u16 0,0 < 550\n\tif I_CompareCounter a2u16_distance != 14\n\tset_counter a2u16_stuck 0\n\tend_if\n\tset_counter a2u16_distance 14\n\tinc_counter a2u16_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u16 0,0 >= 550\n\tand I_UnitDistanceFromPosition a2u16 0,0 < 600\n\tif I_CompareCounter a2u16_distance != 15\n\tset_counter a2u16_stuck 0\n\tend_if\n\tset_counter a2u16_distance 15\n\tinc_counter a2u16_stuck 1\n\tend_if\n\n\tif I_CompareCounter a2u16_stuck = 4\n\tunit_order_halt a2u16\n\tunit_set_morale a2u16 wavering\n\tbattle_wait 0.1\n\tunit_unset_morale a2u16\n\trelease_unit a2u16\n\tset_counter a2u16_stuck 0\n\tend_if\n\n\tend_if\nend_if\n\nif I_CompareCounter enemy_unit_count > 16\nand ! I_UnitDestroyed a2u17\n\n\tif I_UnitStatus a2u17 moving\n\tif I_CompareCounter a2u17_status = 0\n\tset_counter a2u17_status 1\n\tend_if\n\tif I_CompareCounter a2u17_status != 1\n\tset_counter a2u17_status 0\n\tend_if\n\tend_if\n\n\tif I_UnitStatus a2u17 routing\n\tif I_CompareCounter a2u17_status = 0\n\tset_counter a2u17_status 2\n\tend_if\n\tif I_CompareCounter a2u17_status != 2\n\tset_counter a2u17_status 0\n\tend_if\n\tend_if\n\n\tif ! I_UnitStatus a2u17 moving\n\tand ! I_UnitStatus a2u17 routing\n\tset_counter a2u17_status 0\n\tend_if\n\n\tif I_CompareCounter a2u17_status > 0\n\n\tif I_UnitDistanceFromPosition a2u17 0,0 >= 150\n\tand I_UnitDistanceFromPosition a2u17 0,0 < 175\n\tif I_CompareCounter a2u17_distance != 1\n\tset_counter a2u17_stuck 0\n\tend_if\n\tset_counter a2u17_distance 1\n\tinc_counter a2u17_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u17 0,0 >= 175\n\tand I_UnitDistanceFromPosition a2u17 0,0 < 200\n\tif I_CompareCounter a2u17_distance != 2\n\tset_counter a2u17_stuck 0\n\tend_if\n\tset_counter a2u17_distance 2\n\tinc_counter a2u17_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u17 0,0 >= 200\n\tand I_UnitDistanceFromPosition a2u17 0,0 < 225\n\tif I_CompareCounter a2u17_distance != 3\n\tset_counter a2u17_stuck 0\n\tend_if\n\tset_counter a2u17_distance 3\n\tinc_counter a2u17_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u17 0,0 >= 225\n\tand I_UnitDistanceFromPosition a2u17 0,0 < 250\n\tif I_CompareCounter a2u17_distance != 4\n\tset_counter a2u17_stuck 0\n\tend_if\n\tset_counter a2u17_distance 4\n\tinc_counter a2u17_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u17 0,0 >= 250\n\tand I_UnitDistanceFromPosition a2u17 0,0 < 275\n\tif I_CompareCounter a2u17_distance != 5\n\tset_counter a2u17_stuck 0\n\tend_if\n\tset_counter a2u17_distance 5\n\tinc_counter a2u17_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u17 0,0 >= 275\n\tand I_UnitDistanceFromPosition a2u17 0,0 < 300\n\tif I_CompareCounter a2u17_distance != 6\n\tset_counter a2u17_stuck 0\n\tend_if\n\tset_counter a2u17_distance 6\n\tinc_counter a2u17_stuck 1\n\tend_if\n\n" +
                    "\tif I_UnitDistanceFromPosition a2u17 0,0 >= 300\n\tand I_UnitDistanceFromPosition a2u17 0,0 < 325\n\tif I_CompareCounter a2u17_distance != 7\n\tset_counter a2u17_stuck 0\n\tend_if\n\tset_counter a2u17_distance 7\n\tinc_counter a2u17_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u17 0,0 >= 325\n\tand I_UnitDistanceFromPosition a2u17 0,0 < 350\n\tif I_CompareCounter a2u17_distance != 8\n\tset_counter a2u17_stuck 0\n\tend_if\n\tset_counter a2u17_distance 8\n\tinc_counter a2u17_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u17 0,0 >= 350\n\tand I_UnitDistanceFromPosition a2u17 0,0 < 375\n\tif I_CompareCounter a2u17_distance != 9\n\tset_counter a2u17_stuck 0\n\tend_if\n\tset_counter a2u17_distance 9\n\tinc_counter a2u17_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u17 0,0 >= 375\n\tand I_UnitDistanceFromPosition a2u17 0,0 < 400\n\tif I_CompareCounter a2u17_distance != 10\n\tset_counter a2u17_stuck 0\n\tend_if\n\tset_counter a2u17_distance 10\n\tinc_counter a2u17_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u17 0,0 >= 400\n\tand I_UnitDistanceFromPosition a2u17 0,0 < 425\n\tif I_CompareCounter a2u17_distance != 11\n\tset_counter a2u17_stuck 0\n\tend_if\n\tset_counter a2u17_distance 11\n\tinc_counter a2u17_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u17 0,0 >= 425\n\tand I_UnitDistanceFromPosition a2u17 0,0 < 450\n\tif I_CompareCounter a2u17_distance != 12\n\tset_counter a2u17_stuck 0\n\tend_if\n\tset_counter a2u17_distance 12\n\tinc_counter a2u17_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u17 0,0 >= 450\n\tand I_UnitDistanceFromPosition a2u17 0,0 < 500\n\tif I_CompareCounter a2u17_distance != 13\n\tset_counter a2u17_stuck 0\n\tend_if\n\tset_counter a2u17_distance 13\n\tinc_counter a2u17_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u17 0,0 >= 500\n\tand I_UnitDistanceFromPosition a2u17 0,0 < 550\n\tif I_CompareCounter a2u17_distance != 14\n\tset_counter a2u17_stuck 0\n\tend_if\n\tset_counter a2u17_distance 14\n\tinc_counter a2u17_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u17 0,0 >= 550\n\tand I_UnitDistanceFromPosition a2u17 0,0 < 600\n\tif I_CompareCounter a2u17_distance != 15\n\tset_counter a2u17_stuck 0\n\tend_if\n\tset_counter a2u17_distance 15\n\tinc_counter a2u17_stuck 1\n\tend_if\n\n\tif I_CompareCounter a2u17_stuck = 4\n\tunit_order_halt a2u17\n\tunit_set_morale a2u17 wavering\n\tbattle_wait 0.1\n\tunit_unset_morale a2u17\n\trelease_unit a2u17\n\tset_counter a2u17_stuck 0\n\tend_if\n\n\tend_if\nend_if\n\nif I_CompareCounter enemy_unit_count > 17\nand ! I_UnitDestroyed a2u18\n\n\tif I_UnitStatus a2u18 moving\n\tif I_CompareCounter a2u18_status = 0\n\tset_counter a2u18_status 1\n\tend_if\n\tif I_CompareCounter a2u18_status != 1\n\tset_counter a2u18_status 0\n\tend_if\n\tend_if\n\n\tif I_UnitStatus a2u18 routing\n\tif I_CompareCounter a2u18_status = 0\n\tset_counter a2u18_status 2\n\tend_if\n\tif I_CompareCounter a2u18_status != 2\n\tset_counter a2u18_status 0\n\tend_if\n\tend_if\n\n\tif ! I_UnitStatus a2u18 moving\n\tand ! I_UnitStatus a2u18 routing\n\tset_counter a2u18_status 0\n\tend_if\n\n\tif I_CompareCounter a2u18_status > 0\n\n\tif I_UnitDistanceFromPosition a2u18 0,0 >= 150\n\tand I_UnitDistanceFromPosition a2u18 0,0 < 175\n\tif I_CompareCounter a2u18_distance != 1\n\tset_counter a2u18_stuck 0\n\tend_if\n\tset_counter a2u18_distance 1\n\tinc_counter a2u18_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u18 0,0 >= 175\n\tand I_UnitDistanceFromPosition a2u18 0,0 < 200\n\tif I_CompareCounter a2u18_distance != 2\n\tset_counter a2u18_stuck 0\n\tend_if\n\tset_counter a2u18_distance 2\n\tinc_counter a2u18_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u18 0,0 >= 200\n\tand I_UnitDistanceFromPosition a2u18 0,0 < 225\n\tif I_CompareCounter a2u18_distance != 3\n\tset_counter a2u18_stuck 0\n\tend_if\n\tset_counter a2u18_distance 3\n\tinc_counter a2u18_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u18 0,0 >= 225\n\tand I_UnitDistanceFromPosition a2u18 0,0 < 250\n\tif I_CompareCounter a2u18_distance != 4\n\tset_counter a2u18_stuck 0\n\tend_if\n\tset_counter a2u18_distance 4\n\tinc_counter a2u18_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u18 0,0 >= 250\n\tand I_UnitDistanceFromPosition a2u18 0,0 < 275\n\tif I_CompareCounter a2u18_distance != 5\n\tset_counter a2u18_stuck 0\n\tend_if\n\tset_counter a2u18_distance 5\n\tinc_counter a2u18_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u18 0,0 >= 275\n\tand I_UnitDistanceFromPosition a2u18 0,0 < 300\n\tif I_CompareCounter a2u18_distance != 6\n\tset_counter a2u18_stuck 0\n\tend_if\n\tset_counter a2u18_distance 6\n\tinc_counter a2u18_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u18 0,0 >= 300\n\tand I_UnitDistanceFromPosition a2u18 0,0 < 325\n\tif I_CompareCounter a2u18_distance != 7\n\tset_counter a2u18_stuck 0\n\tend_if\n\tset_counter a2u18_distance 7\n\tinc_counter a2u18_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u18 0,0 >= 325\n\tand I_UnitDistanceFromPosition a2u18 0,0 < 350\n\tif I_CompareCounter a2u18_distance != 8\n\tset_counter a2u18_stuck 0\n\tend_if\n\tset_counter a2u18_distance 8\n\tinc_counter a2u18_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u18 0,0 >= 350\n\tand I_UnitDistanceFromPosition a2u18 0,0 < 375\n\tif I_CompareCounter a2u18_distance != 9\n\tset_counter a2u18_stuck 0\n\tend_if\n\tset_counter a2u18_distance 9\n\tinc_counter a2u18_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u18 0,0 >= 375\n\tand I_UnitDistanceFromPosition a2u18 0,0 < 400\n\tif I_CompareCounter a2u18_distance != 10\n\tset_counter a2u18_stuck 0\n\tend_if\n\tset_counter a2u18_distance 10\n\tinc_counter a2u18_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u18 0,0 >= 400\n\tand I_UnitDistanceFromPosition a2u18 0,0 < 425\n\tif I_CompareCounter a2u18_distance != 11\n\tset_counter a2u18_stuck 0\n\tend_if\n\tset_counter a2u18_distance 11\n\tinc_counter a2u18_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u18 0,0 >= 425\n\tand I_UnitDistanceFromPosition a2u18 0,0 < 450\n\tif I_CompareCounter a2u18_distance != 12\n\tset_counter a2u18_stuck 0\n\tend_if\n\tset_counter a2u18_distance 12\n\tinc_counter a2u18_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u18 0,0 >= 450\n\tand I_UnitDistanceFromPosition a2u18 0,0 < 500\n\tif I_CompareCounter a2u18_distance != 13\n\tset_counter a2u18_stuck 0\n\tend_if\n\tset_counter a2u18_distance 13\n\tinc_counter a2u18_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u18 0,0 >= 500\n" +
                    "\tand I_UnitDistanceFromPosition a2u18 0,0 < 550\n\tif I_CompareCounter a2u18_distance != 14\n\tset_counter a2u18_stuck 0\n\tend_if\n\tset_counter a2u18_distance 14\n\tinc_counter a2u18_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u18 0,0 >= 550\n\tand I_UnitDistanceFromPosition a2u18 0,0 < 600\n\tif I_CompareCounter a2u18_distance != 15\n\tset_counter a2u18_stuck 0\n\tend_if\n\tset_counter a2u18_distance 15\n\tinc_counter a2u18_stuck 1\n\tend_if\n\n\tif I_CompareCounter a2u18_stuck = 4\n\tunit_order_halt a2u18\n\tunit_set_morale a2u18 wavering\n\tbattle_wait 0.1\n\tunit_unset_morale a2u18\n\trelease_unit a2u18\n\tset_counter a2u18_stuck 0\n\tend_if\n\n\tend_if\nend_if\n\nif I_CompareCounter enemy_unit_count > 18\nand ! I_UnitDestroyed a2u19\n\n\tif I_UnitStatus a2u19 moving\n\tif I_CompareCounter a2u19_status = 0\n\tset_counter a2u19_status 1\n\tend_if\n\tif I_CompareCounter a2u19_status != 1\n\tset_counter a2u19_status 0\n\tend_if\n\tend_if\n\n\tif I_UnitStatus a2u19 routing\n\tif I_CompareCounter a2u19_status = 0\n\tset_counter a2u19_status 2\n\tend_if\n\tif I_CompareCounter a2u19_status != 2\n\tset_counter a2u19_status 0\n\tend_if\n\tend_if\n\n\tif ! I_UnitStatus a2u19 moving\n\tand ! I_UnitStatus a2u19 routing\n\tset_counter a2u19_status 0\n\tend_if\n\n\tif I_CompareCounter a2u19_status > 0\n\n\tif I_UnitDistanceFromPosition a2u19 0,0 >= 150\n\tand I_UnitDistanceFromPosition a2u19 0,0 < 175\n\tif I_CompareCounter a2u19_distance != 1\n\tset_counter a2u19_stuck 0\n\tend_if\n\tset_counter a2u19_distance 1\n\tinc_counter a2u19_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u19 0,0 >= 175\n\tand I_UnitDistanceFromPosition a2u19 0,0 < 200\n\tif I_CompareCounter a2u19_distance != 2\n\tset_counter a2u19_stuck 0\n\tend_if\n\tset_counter a2u19_distance 2\n\tinc_counter a2u19_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u19 0,0 >= 200\n\tand I_UnitDistanceFromPosition a2u19 0,0 < 225\n\tif I_CompareCounter a2u19_distance != 3\n\tset_counter a2u19_stuck 0\n\tend_if\n\tset_counter a2u19_distance 3\n\tinc_counter a2u19_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u19 0,0 >= 225\n\tand I_UnitDistanceFromPosition a2u19 0,0 < 250\n\tif I_CompareCounter a2u19_distance != 4\n\tset_counter a2u19_stuck 0\n\tend_if\n\tset_counter a2u19_distance 4\n\tinc_counter a2u19_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u19 0,0 >= 250\n\tand I_UnitDistanceFromPosition a2u19 0,0 < 275\n\tif I_CompareCounter a2u19_distance != 5\n\tset_counter a2u19_stuck 0\n\tend_if\n\tset_counter a2u19_distance 5\n\tinc_counter a2u19_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u19 0,0 >= 275\n\tand I_UnitDistanceFromPosition a2u19 0,0 < 300\n\tif I_CompareCounter a2u19_distance != 6\n\tset_counter a2u19_stuck 0\n\tend_if\n\tset_counter a2u19_distance 6\n\tinc_counter a2u19_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u19 0,0 >= 300\n\tand I_UnitDistanceFromPosition a2u19 0,0 < 325\n\tif I_CompareCounter a2u19_distance != 7\n\tset_counter a2u19_stuck 0\n\tend_if\n\tset_counter a2u19_distance 7\n\tinc_counter a2u19_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u19 0,0 >= 325\n\tand I_UnitDistanceFromPosition a2u19 0,0 < 350\n\tif I_CompareCounter a2u19_distance != 8\n\tset_counter a2u19_stuck 0\n\tend_if\n\tset_counter a2u19_distance 8\n\tinc_counter a2u19_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u19 0,0 >= 350\n\tand I_UnitDistanceFromPosition a2u19 0,0 < 375\n\tif I_CompareCounter a2u19_distance != 9\n\tset_counter a2u19_stuck 0\n\tend_if\n\tset_counter a2u19_distance 9\n\tinc_counter a2u19_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u19 0,0 >= 375\n\tand I_UnitDistanceFromPosition a2u19 0,0 < 400\n\tif I_CompareCounter a2u19_distance != 10\n\tset_counter a2u19_stuck 0\n\tend_if\n\tset_counter a2u19_distance 10\n\tinc_counter a2u19_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u19 0,0 >= 400\n\tand I_UnitDistanceFromPosition a2u19 0,0 < 425\n\tif I_CompareCounter a2u19_distance != 11\n\tset_counter a2u19_stuck 0\n\tend_if\n\tset_counter a2u19_distance 11\n\tinc_counter a2u19_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u19 0,0 >= 425\n\tand I_UnitDistanceFromPosition a2u19 0,0 < 450\n\tif I_CompareCounter a2u19_distance != 12\n\tset_counter a2u19_stuck 0\n\tend_if\n\tset_counter a2u19_distance 12\n\tinc_counter a2u19_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u19 0,0 >= 450\n\tand I_UnitDistanceFromPosition a2u19 0,0 < 500\n\tif I_CompareCounter a2u19_distance != 13\n\tset_counter a2u19_stuck 0\n\tend_if\n\tset_counter a2u19_distance 13\n\tinc_counter a2u19_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u19 0,0 >= 500\n\tand I_UnitDistanceFromPosition a2u19 0,0 < 550\n\tif I_CompareCounter a2u19_distance != 14\n\tset_counter a2u19_stuck 0\n\tend_if\n\tset_counter a2u19_distance 14\n\tinc_counter a2u19_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u19 0,0 >= 550\n\tand I_UnitDistanceFromPosition a2u19 0,0 < 600\n\tif I_CompareCounter a2u19_distance != 15\n\tset_counter a2u19_stuck 0\n\tend_if\n\tset_counter a2u19_distance 15\n\tinc_counter a2u19_stuck 1\n\tend_if\n\n\tif I_CompareCounter a2u19_stuck = 4\n\tunit_order_halt a2u19\n\tunit_set_morale a2u19 wavering\n\tbattle_wait 0.1\n\tunit_unset_morale a2u19\n\trelease_unit a2u19\n\tset_counter a2u19_stuck 0\n\tend_if\n\n\tend_if\nend_if\n\nif I_CompareCounter enemy_unit_count = 20\nand ! I_UnitDestroyed a2u20\n\n\tif I_UnitStatus a2u20 moving\n\tif I_CompareCounter a2u20_status = 0\n\tset_counter a2u20_status 1\n\tend_if\n\tif I_CompareCounter a2u20_status != 1\n\tset_counter a2u20_status 0\n\tend_if\n\tend_if\n\n\tif I_UnitStatus a2u20 routing\n\tif I_CompareCounter a2u20_status = 0\n\tset_counter a2u20_status 2\n\tend_if\n\tif I_CompareCounter a2u20_status != 2\n\tset_counter a2u20_status 0\n\tend_if\n\tend_if\n\n\tif ! I_UnitStatus a2u20 moving\n\tand ! I_UnitStatus a2u20 routing\n\tset_counter a2u20_status 0\n\tend_if\n\n\tif I_CompareCounter a2u20_status > 0\n\n\tif I_UnitDistanceFromPosition a2u20 0,0 >= 150\n\tand I_UnitDistanceFromPosition a2u20 0,0 < 175\n\tif I_CompareCounter a2u20_distance != 1\n\tset_counter a2u20_stuck 0\n\tend_if\n\tset_counter a2u20_distance 1\n\tinc_counter a2u20_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u20 0,0 >= 175\n\tand I_UnitDistanceFromPosition a2u20 0,0 < 200\n\tif I_CompareCounter a2u20_distance != 2\n\tset_counter a2u20_stuck 0\n\tend_if\n\tset_counter a2u20_distance 2\n\tinc_counter a2u20_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u20 0,0 >= 200\n\tand I_UnitDistanceFromPosition a2u20 0,0 < 225\n\tif I_CompareCounter a2u20_distance != 3\n\tset_counter a2u20_stuck 0\n\tend_if\n\tset_counter a2u20_distance 3\n\tinc_counter a2u20_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u20 0,0 >= 225\n\tand I_UnitDistanceFromPosition a2u20 0,0 < 250\n\tif I_CompareCounter a2u20_distance != 4\n\tset_counter a2u20_stuck 0\n\tend_if\n\tset_counter a2u20_distance 4\n\tinc_counter a2u20_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u20 0,0 >= 250\n\tand I_UnitDistanceFromPosition a2u20 0,0 < 275\n\tif I_CompareCounter a2u20_distance != 5\n\tset_counter a2u20_stuck 0\n\tend_if\n\tset_counter a2u20_distance 5\n\tinc_counter a2u20_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u20 0,0 >= 275\n\tand I_UnitDistanceFromPosition a2u20 0,0 < 300\n\tif I_CompareCounter a2u20_distance != 6\n\tset_counter a2u20_stuck 0\n\tend_if\n\tset_counter a2u20_distance 6\n\tinc_counter a2u20_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u20 0,0 >= 300\n\tand I_UnitDistanceFromPosition a2u20 0,0 < 325\n\tif I_CompareCounter a2u20_distance != 7\n\tset_counter a2u20_stuck 0\n\tend_if\n\tset_counter a2u20_distance 7\n" +
                    "\tinc_counter a2u20_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u20 0,0 >= 325\n\tand I_UnitDistanceFromPosition a2u20 0,0 < 350\n\tif I_CompareCounter a2u20_distance != 8\n\tset_counter a2u20_stuck 0\n\tend_if\n\tset_counter a2u20_distance 8\n\tinc_counter a2u20_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u20 0,0 >= 350\n\tand I_UnitDistanceFromPosition a2u20 0,0 < 375\n\tif I_CompareCounter a2u20_distance != 9\n\tset_counter a2u20_stuck 0\n\tend_if\n\tset_counter a2u20_distance 9\n\tinc_counter a2u20_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u20 0,0 >= 375\n\tand I_UnitDistanceFromPosition a2u20 0,0 < 400\n\tif I_CompareCounter a2u20_distance != 10\n\tset_counter a2u20_stuck 0\n\tend_if\n\tset_counter a2u20_distance 10\n\tinc_counter a2u20_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u20 0,0 >= 400\n\tand I_UnitDistanceFromPosition a2u20 0,0 < 425\n\tif I_CompareCounter a2u20_distance != 11\n\tset_counter a2u20_stuck 0\n\tend_if\n\tset_counter a2u20_distance 11\n\tinc_counter a2u20_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u20 0,0 >= 425\n\tand I_UnitDistanceFromPosition a2u20 0,0 < 450\n\tif I_CompareCounter a2u20_distance != 12\n\tset_counter a2u20_stuck 0\n\tend_if\n\tset_counter a2u20_distance 12\n\tinc_counter a2u20_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u20 0,0 >= 450\n\tand I_UnitDistanceFromPosition a2u20 0,0 < 500\n\tif I_CompareCounter a2u20_distance != 13\n\tset_counter a2u20_stuck 0\n\tend_if\n\tset_counter a2u20_distance 13\n\tinc_counter a2u20_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u20 0,0 >= 500\n\tand I_UnitDistanceFromPosition a2u20 0,0 < 550\n\tif I_CompareCounter a2u20_distance != 14\n\tset_counter a2u20_stuck 0\n\tend_if\n\tset_counter a2u20_distance 14\n\tinc_counter a2u20_stuck 1\n\tend_if\n\n\tif I_UnitDistanceFromPosition a2u20 0,0 >= 550\n\tand I_UnitDistanceFromPosition a2u20 0,0 < 600\n\tif I_CompareCounter a2u20_distance != 15\n\tset_counter a2u20_stuck 0\n\tend_if\n\tset_counter a2u20_distance 15\n\tinc_counter a2u20_stuck 1\n\tend_if\n\n\tif I_CompareCounter a2u20_stuck = 4\n\tunit_order_halt a2u20\n\tunit_set_morale a2u20 wavering\n\tbattle_wait 0.1\n\tunit_unset_morale a2u20\n\trelease_unit a2u20\n\tset_counter a2u20_stuck 0\n\tend_if\n\n\tend_if\nend_if\n\n\tbattle_wait 10\nend_monitor\n\n;;;;;;;Anti-CTD\nmonitor_event BattleDeploymentPhaseCommenced FactionIsLocal\n\twait 0.5\n\tsimulate_mouse_click lclick_down\n\tsimulate_mouse_click lclick_up\nend_monitor\n\n;################## Cleaning up ##################\n\nmonitor_event ScrollOpened ScrollOpened post_battle_scroll\n\n\t;;;;;;;\n\tset_counter fire_labels 0\n;\tset_counter panel_check 0\n\tset_counter player_unit_count 0\n\tset_counter enemy_unit_count 0\n\tset_counter open_battle 0\n\tset_counter labels_only 0\n\tset_counter stakes_lock 0\n\t;;;;;;;\n\tset_counter pu1_missile 0\n\tset_counter pu2_missile 0\n\tset_counter pu3_missile 0\n\tset_counter pu4_missile 0\n\tset_counter pu5_missile 0\n\tset_counter pu6_missile 0\n\tset_counter pu7_missile 0\n\tset_counter pu8_missile 0\n\tset_counter pu9_missile 0\n\tset_counter pu10_missile 0\n\tset_counter pu11_missile 0\n\tset_counter pu12_missile 0\n\tset_counter pu13_missile 0\n\tset_counter pu14_missile 0\n\tset_counter pu15_missile 0\n\tset_counter pu16_missile 0\n\tset_counter pu17_missile 0\n\tset_counter pu18_missile 0\n\tset_counter pu19_missile 0\n\tset_counter pu20_missile 0\n\t;;;;;;;Checks\n\tset_counter check_timer 0\n\tset_counter elephant_fix_check 0\n\tset_counter elephant_fix_check_sally 0\n\tset_counter reinf_check 0\n\tset_counter script_delay 0\n\tset_counter sally_defense_check 0\n\tset_counter sally_check 0\n\t;;;;;;;Stakes\n\tset_counter label_ready 0\n\tset_counter stakes_on 0\n\t;;;;;;;Reinforcements\n\tset_counter army4_ready 0\n\tset_counter reinf_late 0\n\n\tset_counter distance_trigger1 0\n\tset_counter distance_trigger2 0\n\tset_counter distance_trigger3 0\n\tset_counter distance_trigger4 0\n\tset_counter distance_trigger5 0\n\n\tset_counter kill_labelling_reinf_allied 0\n\tset_counter army3_reinf_allied 0\n\tset_counter army4_reinf_allied 0\n\tset_counter army5_reinf_allied 0\n\tset_counter army6_reinf_allied 0\n\tset_counter army7_reinf_allied 0\n\tset_counter army8_reinf_allied 0\n\tset_counter army9_reinf_allied 0\n\tset_counter army10_reinf_allied 0\n\tset_counter army11_reinf_allied 0\n\tset_counter army12_reinf_allied 0\n\tset_counter army13_reinf_allied 0\n\tset_counter army14_reinf_allied 0\n\tset_counter army15_reinf_allied 0\n\tset_counter army16_reinf_allied 0\n\tset_counter launch_alliance_0 0\n\tset_counter launch_alliance_1 0\n\n\tset_counter apply_strategy 0\n\tset_counter relaunch_movement 0\n\n\tset_counter att_alliance_ready 0\n\tset_counter def_alliance_ready 0\n\tset_counter def_alliance_ready_siege 0\n\n\tset_counter army3_moving 0\n\tset_counter army3_run 0\n\tset_counter army3_reinf_late 0\n\tset_counter army4_moving 0\n\tset_counter army4_run 0\n\tset_counter army4_reinf_late 0\n\tset_counter army5_moving 0\n\tset_counter army5_run 0\n\tset_counter army5_reinf_late 0\n\tset_counter army6_moving 0\n\tset_counter army6_run 0\n\tset_counter army6_reinf_late 0\n\tset_counter army7_moving 0\n\tset_counter army7_run 0\n\tset_counter army7_reinf_late 0\n\tset_counter army8_moving 0\n\tset_counter army8_run 0\n\tset_counter army8_reinf_late 0\n" +
                    "\tset_counter army9_moving 0\n\tset_counter army9_run 0\n\tset_counter army9_reinf_late 0\n\tset_counter army10_moving 0\n\tset_counter army10_run 0\n\tset_counter army10_reinf_late 0\n\tset_counter army11_moving 0\n\tset_counter army11_run 0\n\tset_counter army11_reinf_late 0\n\tset_counter army12_moving 0\n\tset_counter army12_run 0\n\tset_counter army12_reinf_late 0\n\tset_counter army13_moving 0\n\tset_counter army13_run 0\n\tset_counter army13_reinf_late 0\n\tset_counter army14_moving 0\n\tset_counter army14_run 0\n\tset_counter army14_reinf_late 0\n\tset_counter army15_moving 0\n\tset_counter army15_run 0\n\tset_counter army15_reinf_late 0\n\tset_counter army16_moving 0\n\tset_counter army16_run 0\n\tset_counter army16_reinf_late 0\n\n\tset_counter army4_ready_siege 0 ; acts as launching counter\n\tset_counter army4_moving_siege 0\n\tset_counter army4_run_siege 0\n\tset_counter reinf_check_interval 0\n\n\t;;;;;;;HA Fix\n\tset_counter ha_fix 0\n\t;;;;;;;Elephant Fix\n\tset_counter elephant_fix 0\n\tset_counter elephant_gate 0\n\tset_counter elephant_gate_s 0\n\tset_counter elephant_gate_tier2 0\n\tset_counter elephant_gate_tier3 0\n\tset_counter elephant_gate_tier2s 0\n\tset_counter elephant_gate_tier3s 0\n\tset_counter rally_walls 0\n\tset_counter rally_walls_s 0\n\tset_counter second_ring 0\n\tset_counter third_ring 0\n\tset_counter second_ring_s 0\n\tset_counter third_ring_s 0\n\tset_counter del_objective 0\n\tset_counter del_objective_s 0\n\t;;;;;;;Sally-out\n\tset_counter sally-out_fix 0\n\tset_counter sally_defense 0\n\tset_counter reform_back 0\n\tset_counter reform_multi 0\n\tset_counter unit_under_fire 0\n\tset_counter kill_sally 0\n\tset_counter sally_reinf 0\n\tset_counter reset_position 0\n\tset_counter defend_location 0\n\tset_counter reset_army2 0\n\tset_counter assign_labels 0\n\t;;;;;;;Siege\n\tset_counter siege_fix 0\n\tset_counter army_sieging 0\n\tset_counter army_south 0\n\tset_counter army_north 0\n\tset_counter army_east 0\n\tset_counter army_west 0\n\tset_counter emergency_stop 0\n\tset_counter omfg_cannon_tower 0\n\tset_counter army2_sally 0\n\tset_counter wall_advance_s 0\n\t;;;;;;;Protect General\n\tset_counter protect_general 0\n\tset_counter general_wait 0\n\tset_counter protect_siege 0\n\tset_counter g_stop 0\n\t;;;;;;;Sally-out, AI defending\n\tset_counter army4_ready_sally 0\n\tset_counter army4_location 0\n\tset_counter path_n 0\n\tset_counter path_ne 0\n\tset_counter path_e 0\n\tset_counter path_se 0\n\tset_counter path_s 0\n\tset_counter path_sw 0\n\tset_counter path_w 0\n\tset_counter path_nw 0\n\tset_counter obstacle_check 0\n\tset_counter label_army4 0\n\tset_counter army4_moving_s 0\n\tset_counter army4_idle_s 0\n\tset_counter line_passed 0\n\tset_counter army2_idle_s 0\n\tset_counter army4_idle_r 0\n\tset_counter wall_line_passed 0\n\tset_counter reset_position_s 0\n\tset_counter repeat_test1 0\n\tset_counter repeat_test2 0\n\tset_counter repeat_test3 0\n\tset_counter repeat_test4 0\n\tset_counter repeat_test5 0\n\tset_counter repeat_test6 0\n\t;;;;;;;Open Battles\n\tset_counter ob_defense_launch 0\n\tset_counter ob_defend 0\n\tset_counter ob_siege_attack 0\n\tset_counter ob_under_fire 0\n\tset_counter ob_repeat_test 0\n\tset_counter ob_engaged 0\n\tset_counter player_units_closing 0\n\tset_counter player_enveloping 0\n\tset_counter player_engaged_reinf 0\n\t;;;;;;;AI Stuck Fix\n\tset_counter ai_stuck_launch 0\n\tset_counter a2u1_stuck 0\n\tset_counter a2u2_stuck 0\n\tset_counter a2u3_stuck 0\n\tset_counter a2u4_stuck 0\n\tset_counter a2u5_stuck 0\n\tset_counter a2u6_stuck 0\n\tset_counter a2u7_stuck 0\n\tset_counter a2u8_stuck 0\n\tset_counter a2u9_stuck 0\n\tset_counter a2u10_stuck 0\n\tset_counter a2u11_stuck 0\n\tset_counter a2u12_stuck 0\n\tset_counter a2u13_stuck 0\n\tset_counter a2u14_stuck 0\n\tset_counter a2u15_stuck 0\n\tset_counter a2u16_stuck 0\n\tset_counter a2u17_stuck 0\n\tset_counter a2u18_stuck 0\n\tset_counter a2u19_stuck 0\n\tset_counter a2u20_stuck 0\n\tset_counter a2u1_status 0\n\tset_counter a2u2_status 0\n\tset_counter a2u3_status 0\n\tset_counter a2u4_status 0\n\tset_counter a2u5_status 0\n\tset_counter a2u6_status 0\n\tset_counter a2u7_status 0\n\tset_counter a2u8_status 0\n\tset_counter a2u9_status 0\n\tset_counter a2u10_status 0\n\tset_counter a2u11_status 0\n\tset_counter a2u12_status 0\n\tset_counter a2u13_status 0\n\tset_counter a2u14_status 0\n\tset_counter a2u15_status 0\n\tset_counter a2u16_status 0\n\tset_counter a2u17_status 0\n\tset_counter a2u18_status 0\n\tset_counter a2u19_status 0\n\tset_counter a2u20_status 0\n\tset_counter a2u1_distance 0\n\tset_counter a2u2_distance 0\n\tset_counter a2u3_distance 0\n\tset_counter a2u4_distance 0\n\tset_counter a2u5_distance 0\n\tset_counter a2u6_distance 0\n\tset_counter a2u7_distance 0\n\tset_counter a2u8_distance 0\n\tset_counter a2u9_distance 0\n\tset_counter a2u10_distance 0\n\tset_counter a2u11_distance 0\n\tset_counter a2u12_distance 0\n\tset_counter a2u13_distance 0\n\tset_counter a2u14_distance 0\n\tset_counter a2u15_distance 0\n\tset_counter a2u16_distance 0\n\tset_counter a2u17_distance 0\n\tset_counter a2u18_distance 0\n\tset_counter a2u19_distance 0\n\tset_counter a2u20_distance 0\n;\tsuspend_unscripted_advice false\nend_monitor\n";
                foreach (var variable in BAI_VARIABLES)
                    c.Append($"\ndeclare_counter {variable}");
                c.Append(BAI);
                return new Script(scriptGroup, c.ToString(), isAlwaysActive, order);
            }
            return new Script(scriptGroup, "", isAlwaysActive, order);
        }
    }
}
